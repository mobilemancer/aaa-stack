!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Au={})}(this,function(t){"use strict";const e=Object.freeze({}),i=Symbol("meta");function s(t,e,i){if(e){if(e.innerError&&i)return e;const s="\n------------------------------------------------\n";t+=`${s}Inner Error:\n`,"string"==typeof e?t+=`Message: ${e}`:(e.message?t+=`Message: ${e.message}`:t+=`Unknown Inner Error Type. Displaying Inner Error as JSON:\n ${JSON.stringify(e,null,"  ")}`,e.stack&&(t+=`\nInner Error Stack:\n${e.stack}`,t+="\nEnd Inner Error Stack")),t+=s}let s=new Error(t);return e&&(s.innerError=e),s}"function"!=typeof Reflect.getOwnMetadata&&(Reflect.getOwnMetadata=function(t,s,n){if(s.hasOwnProperty(i))return(s[i][n]||e)[t]}),"function"!=typeof Reflect.defineMetadata&&(Reflect.defineMetadata=function(t,e,s,n){let r;s.hasOwnProperty(i)?r=s[i]:Reflect.defineProperty(s,i,{configurable:!0,value:r={}}),(r[n]||(r[n]={}))[t]=e}),"function"!=typeof Reflect.metadata&&(Reflect.metadata=function(t,e){return function(i,s){Reflect.defineMetadata(t,e,i,s)}});const n={},r={noop(){},eachModule(){},moduleName:t=>t};r.global="undefined"!=typeof self?self:"undefined"!=typeof global?global:new Function("return this")();const h={};function l(e){t.isInitialized||(t.isInitialized=!0,"function"!=typeof Object.getPropertyDescriptor&&(Object.getPropertyDescriptor=function(t,e){let i=Object.getOwnPropertyDescriptor(t,e),s=Object.getPrototypeOf(t);for(;void 0===i&&null!==s;)i=Object.getOwnPropertyDescriptor(s,e),s=Object.getPrototypeOf(s);return i}),e(r,n,h))}t.isInitialized=!1;const o={location:window.location,history:window.history,addEventListener(t,e,i){this.global.addEventListener(t,e,i)},removeEventListener(t,e,i){this.global.removeEventListener(t,e,i)},performance:window.performance,requestAnimationFrame(t){return this.global.requestAnimationFrame(t)}},u={shadowDOM:!!HTMLElement.prototype.attachShadow,scopedCSS:"scoped"in document.createElement("style"),htmlTemplateElement:function(){let t=document.createElement("div");return t.innerHTML="<template></template>","content"in t.children[0]}(),mutationObserver:!(!window.MutationObserver&&!window.WebKitMutationObserver),ensureHTMLTemplateElement:t=>t},a={Element,SVGElement,boundary:"aurelia-dom-boundary",addEventListener(t,e,i){document.addEventListener(t,e,i)},removeEventListener(t,e,i){document.removeEventListener(t,e,i)},adoptNode:t=>document.adoptNode(t,!0),createAttribute:t=>document.createAttribute(t),createElement:t=>document.createElement(t),createTextNode:t=>document.createTextNode(t),createComment:t=>document.createComment(t),createDocumentFragment:()=>document.createDocumentFragment(),createTemplateElement(){let t=document.createElement("template");return u.ensureHTMLTemplateElement(t)},createMutationObserver:t=>new(window.MutationObserver||window.WebKitMutationObserver)(t),createCustomEvent:(t,e)=>new window.CustomEvent(t,e),dispatchEvent(t){document.dispatchEvent(t)},getComputedStyle:t=>window.getComputedStyle(t),getElementById:t=>document.getElementById(t),querySelectorAll:t=>document.querySelectorAll(t),nextElementSibling(t){if(t.nextElementSibling)return t.nextElementSibling;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t},createTemplateFromMarkup(t){let e=document.createElement("div");e.innerHTML=t;let i=e.firstElementChild;if(!i||"TEMPLATE"!==i.nodeName)throw new Error("Template markup must be wrapped in a <template> element e.g. <template> \x3c!-- markup here --\x3e </template>");return u.ensureHTMLTemplateElement(i)},appendNode(t,e){(e||document.body).appendChild(t)},replaceNode(t,e,i){e.parentNode?e.parentNode.replaceChild(t,e):null!==shadowPoly?shadowPoly.unwrap(i).replaceChild(shadowPoly.unwrap(t),shadowPoly.unwrap(e)):i.replaceChild(t,e)},removeNode(t,e){t.parentNode?t.parentNode.removeChild(t):e&&(null!==shadowPoly?shadowPoly.unwrap(e).removeChild(shadowPoly.unwrap(t)):e.removeChild(t))},injectStyles(t,e,i){let s=document.createElement("style");return s.innerHTML=t,s.type="text/css",e=e||document.head,i&&e.childNodes.length>0?e.insertBefore(s,e.childNodes[0]):e.appendChild(s),s}};t.isInitialized||l((t,e,i)=>{Object.assign(t,o),Object.assign(e,u),Object.assign(i,a),Object.defineProperty(i,"title",{get:()=>document.title,set:t=>{document.title=t}}),Object.defineProperty(i,"activeElement",{get:()=>document.activeElement}),Object.defineProperty(t,"XMLHttpRequest",{get:()=>t.global.XMLHttpRequest})});const c={none:0,error:10,warn:20,info:30,debug:40};let f={},d=[],m=c.none;const p=["none","error","warn","info","debug"];function g(t){return p.filter(e=>e===t).length>0}function w(){return[this,...arguments]}function v(t){const e=c[t];return function(){if(this.level<e)return;const i=w.apply(this,arguments);let s=d.length;for(;s--;)d[s][t](...i)}}function b(t){const e=c[t];return function(){if(this.level<e)return;const i=w.apply(this,arguments);let s=d.length;for(;s--;){const e=d[s];void 0!==e[t]&&e[t](...i)}}}function x(){let t=E.prototype;for(let e in c)g(e)?"none"!==e&&(t[e]=v(e)):t[e]=b(e)}function y(t){return f[t]||new E(t)}function k(t){1===d.push(t)&&x()}function C(t){m=t;for(let e in f)f[e].setLevel(t)}let E=class{constructor(t){let e=f[t];if(e)return e;f[t]=this,this.id=t,this.level=m}debug(t,...e){}info(t,...e){}warn(t,...e){}error(t,...e){}setLevel(t){this.level=t}};var R=Object.freeze({logLevel:c,getLogger:y,addAppender:k,removeAppender:function(t){d=d.filter(e=>e!==t)},getAppenders:function(){return[...d]},clearAppenders:function(){d=[],function(){let t=E.prototype;for(let e in c)"none"!==e&&(t[e]=function(){})}()},addCustomLevel:function(t,e){if(void 0!==c[t])throw Error(`Log level "${t}" already exists.`);if(isNaN(e))throw Error("Value must be a number.");c[t]=e,d.length>0?x():E.prototype[t]=function(){}},removeCustomLevel:function(t){if(void 0!==c[t]){if(g(t))throw Error(`Built-in log level "${t}" cannot be removed.`);delete c[t],delete E.prototype[t]}},setLevel:C,getLevel:function(){return m},Logger:E});var A=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};function P(t){return t&&("function"==typeof t||"object"==typeof t)}const j={resource:"aurelia:resource",paramTypes:"design:paramtypes",propertyType:"design:type",properties:"design:properties",get(t,e,i){if(!P(e))return;let s=j.getOwn(t,e,i);return void 0===s?j.get(t,Object.getPrototypeOf(e),i):s},getOwn(t,e,i){if(P(e))return Reflect.getOwnMetadata(t,e,i)},define(t,e,i,s){Reflect.defineMetadata(t,e,i,s)},getOrCreateOwn(t,e,i,s){let n=j.getOwn(t,i,s);return void 0===n&&(n=new e,Reflect.defineMetadata(t,n,i,s)),n}},O=new Map,$=Object.freeze({moduleId:void 0,moduleMember:void 0});let T=class t{constructor(t,e){this.moduleId=t,this.moduleMember=e}static get(e){let i=O.get(e);return void 0===i&&r.eachModule((s,n)=>{if("object"==typeof n)for(let r in n){if(n[r]===e)return O.set(e,i=new t(s,r)),!0}return n===e&&(O.set(e,i=new t(s,"default")),!0)}),i||$}static set(t,e){O.set(t,e)}};function V(t){const e=Object.keys(t);return function(i){let s=function(i){let s="function"==typeof i?i.prototype:i,n=e.length;for(;n--;){let i=e[n];Object.defineProperty(s,i,{value:t[i],writable:!0})}};return i?s(i):s}}function q(){return!0}function S(){}function _(t){return void 0===t?t={}:"function"==typeof t&&(t={validate:t}),t.validate||(t.validate=q),t.compose||(t.compose=S),t}function I(t){return function(e){return!0===t(e)}}function L(t,e){return function(i){let s=e(i);if(!0!==s)throw new Error(s||`${t} was not correctly implemented.`)}}function M(t,e){e=_(e);let i=function(s){let n="function"==typeof s?s.prototype:s;e.compose(n),i.assert(n),Object.defineProperty(n,"protocol:"+t,{enumerable:!1,configurable:!1,writable:!1,value:!0})};return i.validate=I(e.validate),i.assert=L(t,e.validate),i}var B,F,N,D,z,U,H;M.create=function(t,e){e=_(e);let i="protocol:"+t,s=function(i){let s=M(t,e);return i?s(i):s};return s.decorates=function(t){return!0===t[i]},s.validate=I(e.validate),s.assert=L(t,e.validate),s};const G=M.create("aurelia:resolver",function(t){return"function"==typeof t.get||"Resolvers must implement: get(container: Container, key: any): any"});let W=G()(B=class t{constructor(t){this.t=t}get(t){return()=>t.get(this.t)}static of(e){return new t(e)}})||B,Q=G()(F=class t{constructor(t){this.t=t}get(t){return t.getAll(this.t)}static of(e){return new t(e)}})||F,Y=G()(N=class t{constructor(t,e=!0){this.t=t,this.e=e}get(t){return t.hasResolver(this.t,this.e)?t.get(this.t):null}static of(e,i=!0){return new t(e,i)}})||N,J=G()(D=class t{constructor(t){this.t=t}get(t){return t.parent?t.parent.get(this.t):null}static of(e){return new t(e)}})||D,X=G()(z=class{constructor(t,e){this.strategy=t,this.state=e}get(t,e){switch(this.strategy){case 0:return this.state;case 1:let i=t.invoke(this.state);return this.state=i,this.strategy=0,i;case 2:return t.invoke(this.state);case 3:return this.state(t,e,this);case 4:return this.state[0].get(t,e);case 5:return t.get(this.state);default:throw new Error("Invalid strategy: "+this.strategy)}}})||z,Z=G()(U=class t{constructor(t){this.t=t}get(t){return(...e)=>t.invoke(this.t,e)}static of(e){return new t(e)}})||U,K=G()(H=class t{constructor(t,...e){this.key=t,this.asKey=t,this.dynamicDependencies=e}get(t){let e=this.dynamicDependencies.length>0?this.dynamicDependencies.map(e=>e["protocol:aurelia:resolver"]?e.get(t):t.get(e)):void 0;const i=t.invoke(this.key,e);return t.registerInstance(this.asKey,i),i}as(t){return this.asKey=t,this}static of(e,...i){return new t(e,...i)}})||H;function tt(t,e){let i=t.inject;if("function"==typeof i)throw new Error("Decorator "+e+' cannot be used with "inject()".  Please use an array instead.');return i||(i=j.getOwn(j.paramTypes,t).slice(),t.inject=i),i}let et=class{invoke(t,e,i){let s=i.length,n=new Array(s);for(;s--;)n[s]=t.get(i[s]);return e.apply(void 0,n)}invokeWithDynamicDependencies(t,e,i,s){let n=i.length,r=new Array(n);for(;n--;)r[n]=t.get(i[n]);return void 0!==s&&(r=r.concat(s)),e.apply(void 0,r)}};function it(t){return function(e){j.define(j.registration,t,e)}}et.instance=new et;let st=class{constructor(t){this.t=t}registerResolver(t,e,i){let s=t.getResolver(this.t||e);return void 0===s?t.registerTransient(this.t||e,i):s}},nt=class{constructor(t,e=!1){"boolean"==typeof t?this.i=t:(this.t=t,this.i=e)}registerResolver(t,e,i){let s=this.i?t:t.root,n=s.getResolver(this.t||e);return void 0===n?s.registerSingleton(this.t||e,i):n}};function rt(t){if(null==t)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}const ht=Object.freeze([]);j.registration="aurelia:registration",j.invoker="aurelia:invoker";let lt=G.decorates,ot=class{constructor(t,e,i){this.fn=t,this.invoker=e,this.dependencies=i}invoke(t,e){return void 0!==e?this.invoker.invokeWithDynamicDependencies(t,this.fn,this.dependencies,e):this.invoker.invoke(t,this.fn,this.dependencies)}};function ut(t,e,i,s){let n,r=i.length,h=new Array(r);for(;r--;){if(null==(n=i[r]))throw new Error("Constructor Parameter with index "+r+" cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?");h[r]=t.get(n)}return void 0!==s&&(h=h.concat(s)),Reflect.construct(e,h)}let at={0:{invoke:(t,e)=>new e,invokeWithDynamicDependencies:ut},1:{invoke:(t,e,i)=>new e(t.get(i[0])),invokeWithDynamicDependencies:ut},2:{invoke:(t,e,i)=>new e(t.get(i[0]),t.get(i[1])),invokeWithDynamicDependencies:ut},3:{invoke:(t,e,i)=>new e(t.get(i[0]),t.get(i[1]),t.get(i[2])),invokeWithDynamicDependencies:ut},4:{invoke:(t,e,i)=>new e(t.get(i[0]),t.get(i[1]),t.get(i[2]),t.get(i[3])),invokeWithDynamicDependencies:ut},5:{invoke:(t,e,i)=>new e(t.get(i[0]),t.get(i[1]),t.get(i[2]),t.get(i[3]),t.get(i[4])),invokeWithDynamicDependencies:ut},fallback:{invoke:ut,invokeWithDynamicDependencies:ut}};let ct=class t{constructor(t){void 0===t&&(t={}),this.s=t,this.n=t.onHandlerCreated,this.r=t.handlers||(t.handlers=new Map),this.h=new Map,this.root=this,this.parent=null}makeGlobal(){return t.instance=this,this}setHandlerCreatedCallback(t){this.n=t,this.s.onHandlerCreated=t}registerInstance(t,e){return this.registerResolver(t,new X(0,void 0===e?t:e))}registerSingleton(t,e){return this.registerResolver(t,new X(1,void 0===e?t:e))}registerTransient(t,e){return this.registerResolver(t,new X(2,void 0===e?t:e))}registerHandler(t,e){return this.registerResolver(t,new X(3,e))}registerAlias(t,e){return this.registerResolver(e,new X(5,t))}registerResolver(t,e){rt(t);let i=this.h,s=i.get(t);return void 0===s?i.set(t,e):4===s.strategy?s.state.push(e):i.set(t,new X(4,[s,e])),e}autoRegister(t,e){if("function"==typeof(e=void 0===e?t:e)){let i=j.get(j.registration,e);return void 0===i?this.registerResolver(t,new X(1,e)):i.registerResolver(this,t,e)}return this.registerResolver(t,new X(0,e))}autoRegisterAll(t){let e=t.length;for(;e--;)this.autoRegister(t[e])}unregister(t){this.h.delete(t)}hasResolver(t,e=!1){return rt(t),this.h.has(t)||e&&null!==this.parent&&this.parent.hasResolver(t,e)}getResolver(t){return this.h.get(t)}get(e){if(rt(e),e===t)return this;if(lt(e))return e.get(this,e);let i=this.h.get(e);if(void 0===i){if(null===this.parent)return this.autoRegister(e).get(this,e);let t=j.get(j.registration,e);return void 0===t?this.parent.l(e):t.registerResolver(this,e,e).get(this,e)}return i.get(this,e)}l(t){let e=this.h.get(t);return void 0===e?null===this.parent?this.autoRegister(t).get(this,t):this.parent.l(t):e.get(this,t)}getAll(t){rt(t);let e=this.h.get(t);if(void 0===e)return null===this.parent?ht:this.parent.getAll(t);if(4===e.strategy){let i=e.state,s=i.length,n=new Array(s);for(;s--;)n[s]=i[s].get(this,t);return n}return[e.get(this,t)]}createChild(){let e=new t(this.s);return e.root=this.root,e.parent=this,e}invoke(t,e){try{let i=this.r.get(t);return void 0===i&&(i=this.o(t),this.r.set(t,i)),i.invoke(this,e)}catch(e){throw new s(`Error invoking ${t.name}. Check the inner error for details.`,e,!0)}}o(t){let e;if(void 0===t.inject)e=j.getOwn(j.paramTypes,t)||ht;else{e=[];let s=t;for(;"function"==typeof s;)e.push(...(i=s,i.hasOwnProperty("inject")?"function"==typeof i.inject?i.inject():i.inject:[])),s=Object.getPrototypeOf(s)}var i;let s=j.getOwn(j.invoker,t)||at[e.length]||at.fallback,n=new ot(t,s,e);return void 0!==this.n?this.n(n):n}};function ft(...t){return function(e,i,s){if("number"==typeof s&&1===t.length){let i=e.inject;if("function"==typeof i)throw new Error('Decorator inject cannot be used with "inject()".  Please use an array instead.');return i||(i=j.getOwn(j.paramTypes,e).slice(),e.inject=i),void(i[s]=t[0])}if(s){s.value.inject=t}else e.inject=t}}function dt(t,e){let i=e&&e.split("/"),s=t.trim().split("/");if("."===s[0].charAt(0)&&i){let t=i.slice(0,i.length-1);s.unshift(...t)}return function(t){for(let e=0;e<t.length;++e){let i=t[e];if("."===i)t.splice(e,1),e-=1;else if(".."===i){if(0===e||1===e&&".."===t[2]||".."===t[e-1])continue;e>0&&(t.splice(e-1,2),e-=2)}}}(s),s.join("/")}function mt(t,e){if(!t)return e;if(!e)return t;let i,s=t.match(/^([^/]*?:)\//),n=s&&s.length>0?s[1]:"";i=0===(t=t.substr(n.length)).indexOf("///")&&"file:"===n?"///":0===t.indexOf("//")?"//":0===t.indexOf("/")?"/":"";let r="/"===e.slice(-1)?"/":"",h=t.split("/"),l=e.split("/"),o=[];for(let t=0,e=h.length;t<e;++t)if(".."===h[t])o.pop();else{if("."===h[t]||""===h[t])continue;o.push(h[t])}for(let t=0,e=l.length;t<e;++t)if(".."===l[t])o.pop();else{if("."===l[t]||""===l[t])continue;o.push(l[t])}return n+i+o.join("/")+r}let pt=encodeURIComponent,gt=t=>pt(t).replace("%24","$");function wt(t,e,i){let s=[];if(null==e)return s;if(Array.isArray(e))for(let n=0,r=e.length;n<r;n++)if(i)s.push(`${gt(t)}=${pt(e[n])}`);else{let i=t+"["+("object"==typeof e[n]&&null!==e[n]?n:"")+"]";s=s.concat(wt(i,e[n]))}else if("object"!=typeof e||i)s.push(`${gt(t)}=${pt(e)}`);else for(let i in e)s=s.concat(wt(t+"["+i+"]",e[i]));return s}function vt(t,e){let i=[],s=Object.keys(t||{}).sort();for(let n=0,r=s.length;n<r;n++){let r=s[n];i=i.concat(wt(r,t[r],e))}return 0===i.length?"":i.join("&")}function bt(t,e,i){let s=t,n=e.length-1;for(let t=0;t<=n;t++){let r=""===e[t]?s.length:e[t];if(t<n){let i=s[r]&&"object"!=typeof s[r]?[s[r]]:s[r];s=s[r]=i||(isNaN(e[t+1])?{}:[])}else s=s[r]=i}}function xt(t){let e={};if(!t||"string"!=typeof t)return e;let i=t;"?"===i.charAt(0)&&(i=i.substr(1));let s=i.replace(/\+/g," ").split("&");for(let t=0;t<s.length;t++){let i=s[t].split("="),r=decodeURIComponent(i[0]);if(!r)continue;let h=r.split("]["),l=h.length-1;if(/\[/.test(h[0])&&/\]$/.test(h[l])?(h[l]=h[l].replace(/\]$/,""),l=(h=h.shift().split("[").concat(h)).length-1):l=0,i.length>=2){let t=i[1]?decodeURIComponent(i[1]):"";l?bt(e,h,t):e[r]=(n=e[r],t=t,Array.isArray(n)?(n.push(t),n):void 0!==n?[n,t]:t)}else e[r]=!0}var n,r;return e}class yt{constructor(t,e){this.src=t,this.name=e}}class kt{constructor(t){this.templateIsLoaded=!1,this.factoryIsReady=!1,this.resources=null,this.dependencies=null,this.address=t,this.onReady=null,this.u=null,this.c=null}get template(){return this.u}set template(t){let e,i,s,n,r=this.address;this.u=t,this.templateIsLoaded=!0,e=t.content.querySelectorAll("require"),n=this.dependencies=new Array(e.length);for(let t=0,h=e.length;t<h;++t){if(!(s=(i=e[t]).getAttribute("from")))throw new Error(`<require> element in ${r} has no "from" attribute.`);n[t]=new yt(dt(s,r),i.getAttribute("as")),i.parentNode&&i.parentNode.removeChild(i)}}get factory(){return this.c}set factory(t){this.c=t,this.factoryIsReady=!0}addDependency(t,e){let i="string"==typeof t?dt(t,this.address):T.get(t).moduleId;this.dependencies.push(new yt(i,e))}}class Ct{constructor(){this.templateRegistry={}}map(t,e){throw new Error("Loaders must implement map(id, source).")}normalizeSync(t,e){throw new Error("Loaders must implement normalizeSync(moduleId, relativeTo).")}normalize(t,e){throw new Error("Loaders must implement normalize(moduleId: string, relativeTo: string): Promise<string>.")}loadModule(t){throw new Error("Loaders must implement loadModule(id).")}loadAllModules(t){throw new Error("Loader must implement loadAllModules(ids).")}loadTemplate(t){throw new Error("Loader must implement loadTemplate(url).")}loadText(t){throw new Error("Loader must implement loadText(url).")}applyPluginToUrl(t,e){throw new Error("Loader must implement applyPluginToUrl(url, pluginName).")}addPlugin(t,e){throw new Error("Loader must implement addPlugin(pluginName, implementation).")}getOrCreateTemplateRegistryEntry(t){return this.templateRegistry[t]||(this.templateRegistry[t]=new kt(t))}}let Et="function"==typeof setImmediate;function Rt(t){return function(){let e=setTimeout(s,0),i=setInterval(s,50);function s(){clearTimeout(e),clearInterval(i),t()}}}let At=class{constructor(){this.flushing=!1,this.longStacks=!1,this.microTaskQueue=[],this.microTaskQueueCapacity=1024,this.taskQueue=[],n.mutationObserver?this.requestFlushMicroTaskQueue=function(t){let e=1,i=h.createMutationObserver(t),s=h.createTextNode("");return i.observe(s,{characterData:!0}),function(){e=-e,s.data=e}}(()=>this.flushMicroTaskQueue()):this.requestFlushMicroTaskQueue=Rt(()=>this.flushMicroTaskQueue()),this.requestFlushTaskQueue=Rt(()=>this.flushTaskQueue())}f(t,e){let i,s=0;try{for(this.flushing=!0;s<t.length;)if(i=t[s],this.longStacks&&(this.stack="string"==typeof i.stack?i.stack:void 0),i.call(),++s>e){for(let e=0,i=t.length-s;e<i;e++)t[e]=t[e+s];t.length-=s,s=0}}catch(t){!function(t,e,i){i&&e.stack&&"object"==typeof t&&null!==t&&(t.stack=Pt(t.stack)+e.stack),"onError"in e?e.onError(t):Et?setImmediate(()=>{throw t}):setTimeout(()=>{throw t},0)}(t,i,this.longStacks)}finally{this.flushing=!1}}queueMicroTask(t){this.microTaskQueue.length<1&&this.requestFlushMicroTaskQueue(),this.longStacks&&(t.stack=this.prepareQueueStack("\nEnqueued in MicroTaskQueue by:\n")),this.microTaskQueue.push(t)}queueTask(t){this.taskQueue.length<1&&this.requestFlushTaskQueue(),this.longStacks&&(t.stack=this.prepareQueueStack("\nEnqueued in TaskQueue by:\n")),this.taskQueue.push(t)}flushTaskQueue(){let t=this.taskQueue;this.taskQueue=[],this.f(t,Number.MAX_VALUE)}flushMicroTaskQueue(){let t=this.microTaskQueue;this.f(t,this.microTaskQueueCapacity),t.length=0}prepareQueueStack(t){let e=t+function(t){return t.replace(/^[\s\S]*?\bqueue(Micro)?Task\b[^\n]*\n/,"")}(function(){let t=new Error;if(t.stack)return t.stack;try{throw t}catch(t){return t.stack}}());return"string"==typeof this.stack&&(e=Pt(e)+this.stack),e}};function Pt(t){let e=t.lastIndexOf("flushMicroTaskQueue");return e<0&&(e=t.lastIndexOf("flushTaskQueue"))<0?t:(e=t.lastIndexOf("\n",e))<0?t:t.substr(0,e)}var jt,Ot,$t,Tt,Vt,qt,St,_t,It,Lt,Mt,Bt,Ft;const Nt="Binding:target",Dt="Binding:source",zt=Object.create(null);function Ut(t){if(t in zt)return zt[t];const e=t.charAt(0).toLowerCase()+t.slice(1).replace(/[_.-](\w|$)/g,(t,e)=>e.toUpperCase());return zt[t]=e,e}function Ht(t,e){return{bindingContext:t,parentOverrideContext:e||null}}function Gt(t,e,i){let s=e.overrideContext;if(i){for(;i&&s;)i--,s=s.parentOverrideContext;if(i||!s)return;return t in s?s:s.bindingContext}for(;s&&!(t in s)&&!(s.bindingContext&&t in s.bindingContext);)s=s.parentOverrideContext;return s?t in s?s:s.bindingContext:e.bindingContext||e.overrideContext}const Wt=[],Qt=[];for(let t=0;t<100;t++)Wt.push(`_observer${t}`),Qt.push(`_observerVersion${t}`);function Yt(t){let e=void 0===this.d?0:this.d,i=e;for(;i--&&this[Wt[i]]!==t;);if(-1===i){for(i=0;this[Wt[i]];)i++;this[Wt[i]]=t,t.subscribe(Dt,this),i===e&&(this.d=i+1)}void 0===this.m&&(this.m=0),this[Qt[i]]=this.m}function Jt(t,e){let i=this.observerLocator.getObserver(t,e);Yt.call(this,i)}function Xt(t){let e=this.observerLocator.getArrayObserver(t);Yt.call(this,e)}function Zt(t){let e=this.d;for(;e--;)if(t||this[Qt[e]]!==this.m){let t=this[Wt[e]];this[Wt[e]]=null,t&&t.unsubscribe(Dt,this)}}function Kt(){return function(t){t.prototype.observeProperty=Jt,t.prototype.observeArray=Xt,t.prototype.unobserve=Zt,t.prototype.addObserver=Yt}}const te=[],ee={};let ie=0;const se=100,ne=15;let re=!1,he=0;function le(t){const e=te.length;let i=0;for(;i<e;){const e=te[i];if(ee[e.__connectQueueId]=!1,e.connect(!0),++i%100==0&&r.performance.now()-t>ne)break}te.splice(0,i),te.length?r.requestAnimationFrame(le):(re=!1,he=0)}function oe(t){if(he<se)he++,t.connect(!1);else{let e=t.__connectQueueId;void 0===e&&(e=ie,ie++,t.__connectQueueId=e),ee[e]||(te.push(t),ee[e]=!0)}re||(re=!0,r.requestAnimationFrame(le))}function ue(t,e){return!this.hasSubscriber(t,e)&&(this.p?this.w?this.v?this.b?(this.b.push(t),this.x.push(e),!0):(this.b=[t],this.x=[e],!0):(this.v=t,this.y=e,!0):(this.w=t,this.k=e,!0):(this.p=t,this.C=e,!0))}function ae(t,e){if(this.p===t&&this.C===e)return this.p=null,this.C=null,!0;if(this.w===t&&this.k===e)return this.w=null,this.k=null,!0;if(this.v===t&&this.y===e)return this.v=null,this.y=null,!0;const i=this.x;if(void 0===i||0===i.length)return!1;const s=this.b;let n=0;for(;(i[n]!==e||s[n]!==t)&&i.length>n;)n++;return!(n>=i.length)&&(s.splice(n,1),i.splice(n,1),!0)}let ce=[],fe=[],de=[];function me(t,e){let i,s,n,r,h=this.p,l=this.C,o=this.w,u=this.k,a=this.v,c=this.y,f=this.b?this.b.length:0;if(f){for(n=de.length;n--&&de[n];);for(n<0?(n=de.length,i=[],s=[],de.push(!0),ce.push(i),fe.push(s)):(de[n]=!0,i=ce[n],s=fe[n]),r=f;r--;)i[r]=this.b[r],s[r]=this.x[r]}if(h&&(l?l.call(h,t,e):h(t,e)),o&&(u?u.call(o,t,e):o(t,e)),a&&(c?c.call(a,t,e):a(t,e)),f){for(r=0;r<f;r++){let n=s[r],h=i[r];n?n.call(h,t,e):h(t,e),i[r]=null,s[r]=null}de[n]=!1}}function pe(){return!!(this.p||this.w||this.v||this.b&&this.b.length)}function ge(t,e){let i;if(this.p===t&&this.C===e||this.w===t&&this.k===e||this.v===t&&this.y===e)return!0;let s=this.b;if(!s||0===(i=s.length))return!1;let n=this.x;for(;i--;)if(s[i]===t&&n[i]===e)return!0;return!1}function we(){return function(t){t.prototype.addSubscriber=ue,t.prototype.removeSubscriber=ae,t.prototype.callSubscribers=me,t.prototype.hasSubscribers=pe,t.prototype.hasSubscriber=ge}}let ve=Kt()(jt=we()(jt=class{constructor(t,e,i,s){this.scope=t,this.expression=e,this.observerLocator=i,this.lookupFunctions=s}getValue(){return this.expression.evaluate(this.scope,this.lookupFunctions)}setValue(t){this.expression.assign(this.scope,t)}subscribe(t,e){if(this.hasSubscribers()||(this.oldValue=this.expression.evaluate(this.scope,this.lookupFunctions),this.expression.connect(this,this.scope)),this.addSubscriber(t,e),1===arguments.length&&t instanceof Function)return{dispose:()=>{this.unsubscribe(t,e)}}}unsubscribe(t,e){this.removeSubscriber(t,e)&&!this.hasSubscribers()&&(this.unobserve(!0),this.oldValue=void 0)}call(){let t=this.expression.evaluate(this.scope,this.lookupFunctions),e=this.oldValue;t!==e&&(this.oldValue=t,this.callSubscribers(t,e)),this.m++,this.expression.connect(this,this.scope),this.unobserve(!1)}})||jt)||jt;function be(t){return+t}function xe(t,e,i){return{index:t,removed:e,addedCount:i}}function ye(){}ye.prototype={calcEditDistances:function(t,e,i,s,n,r){let h,l,o=r-n+1,u=i-e+1,a=new Array(o);for(let t=0;t<o;++t)a[t]=new Array(u),a[t][0]=t;for(let t=0;t<u;++t)a[0][t]=t;for(let i=1;i<o;++i)for(let r=1;r<u;++r)this.equals(t[e+r-1],s[n+i-1])?a[i][r]=a[i-1][r-1]:(h=a[i-1][r]+1,l=a[i][r-1]+1,a[i][r]=h<l?h:l);return a},spliceOperationsFromEditDistances:function(t){let e=t.length-1,i=t[0].length-1,s=t[e][i],n=[];for(;e>0||i>0;){if(0===e){n.push(2),i--;continue}if(0===i){n.push(3),e--;continue}let r,h=t[e-1][i-1],l=t[e-1][i],o=t[e][i-1];(r=l<o?l<h?l:h:o<h?o:h)===h?(h===s?n.push(0):(n.push(1),s=h),e--,i--):r===l?(n.push(3),e--,s=l):(n.push(2),i--,s=o)}return n.reverse(),n},calcSplices:function(t,e,i,s,n,r){let h=0,l=0,o=Math.min(i-e,r-n);if(0===e&&0===n&&(h=this.sharedPrefix(t,s,o)),i===t.length&&r===s.length&&(l=this.sharedSuffix(t,s,o-h)),n+=h,r-=l,(i-=l)-(e+=h)==0&&r-n==0)return[];if(e===i){let t=xe(e,[],0);for(;n<r;)t.removed.push(s[n++]);return[t]}if(n===r)return[xe(e,[],i-e)];let u=this.spliceOperationsFromEditDistances(this.calcEditDistances(t,e,i,s,n,r)),a=void 0,c=[],f=e,d=n;for(let t=0;t<u.length;++t)switch(u[t]){case 0:a&&(c.push(a),a=void 0),f++,d++;break;case 1:a||(a=xe(f,[],0)),a.addedCount++,f++,a.removed.push(s[d]),d++;break;case 2:a||(a=xe(f,[],0)),a.addedCount++,f++;break;case 3:a||(a=xe(f,[],0)),a.removed.push(s[d]),d++}return a&&c.push(a),c},sharedPrefix:function(t,e,i){for(let s=0;s<i;++s)if(!this.equals(t[s],e[s]))return s;return i},sharedSuffix:function(t,e,i){let s=t.length,n=e.length,r=0;for(;r<i&&this.equals(t[--s],e[--n]);)r++;return r},calculateSplices:function(t,e){return this.calcSplices(t,0,t.length,e,0,e.length)},equals:function(t,e){return t===e}};let ke=new ye;function Ce(t,e,i,s,n,r){return ke.calcSplices(t,e,i,s,n,r)}function Ee(t,e,i,s){let n=xe(e,i,s),r=!1,h=0;for(let e=0;e<t.length;e++){let i=t[e];if(i.index+=h,r)continue;let s=(l=n.index,o=n.index+n.removed.length,u=i.index,a=i.index+i.addedCount,o<u||a<l?-1:o===u||a===l?0:l<u?o<a?o-u:a-u:a<o?a-l:o-l);if(s>=0){t.splice(e,1),e--,h-=i.addedCount-i.removed.length,n.addedCount+=i.addedCount-s;let l=n.removed.length+i.removed.length-s;if(n.addedCount||l){let t=i.removed;if(n.index<i.index){let e=n.removed.slice(0,i.index-n.index);Array.prototype.push.apply(e,t),t=e}if(n.index+n.removed.length>i.index+i.addedCount){let e=n.removed.slice(i.index+i.addedCount-n.index);Array.prototype.push.apply(t,e)}n.removed=t,i.index<n.index&&(n.index=i.index)}else r=!0}else if(n.index<i.index){r=!0,t.splice(e,0,n),e++;let s=n.addedCount-n.removed.length;i.index+=s,h+=s}}var l,o,u,a;r||t.push(n)}function Re(t,e){let i=[];return function(t,e){let i=[];for(let t=0;t<e.length;t++){let n=e[t];switch(n.type){case"splice":Ee(i,n.index,n.removed.slice(),n.addedCount);break;case"add":case"update":case"delete":if(+(s=n.name)!=s>>>0)continue;let t=be(n.name);if(t<0)continue;Ee(i,t,[n.oldValue],"delete"===n.type?0:1);break;default:console.error("Unexpected record type: "+JSON.stringify(n))}}var s;return i}(0,e).forEach(function(e){1!==e.addedCount||1!==e.removed.length?i=i.concat(Ce(t,e.index,e.index+e.addedCount,e.removed,0,e.removed.length)):e.removed[0]!==t[e.index]&&i.push(e)}),i}function Ae(t){let e,i=new Array(t.size),s=t.keys(),n=0;for(;(e=s.next())&&!e.done;)i[n]=(r="added",h=t,l=e.value,{type:r,object:h,key:l,oldValue:void 0}),n++;var r,h,l;return i}let Pe=we()(Ot=class{constructor(t,e){this.taskQueue=t,this.queued=!1,this.changeRecords=null,this.oldCollection=null,this.collection=e,this.lengthPropertyName=e instanceof Map||e instanceof Set?"size":"length"}subscribe(t,e){this.addSubscriber(t,e)}unsubscribe(t,e){this.removeSubscriber(t,e)}addChangeRecord(t){if(this.hasSubscribers()||this.lengthObserver){if("splice"===t.type){let e=t.index,i=t.object.length;e>i?e=i-t.addedCount:e<0&&(e=i+t.removed.length+e-t.addedCount),e<0&&(e=0),t.index=e}null===this.changeRecords?this.changeRecords=[t]:this.changeRecords.push(t),this.queued||(this.queued=!0,this.taskQueue.queueMicroTask(this))}}flushChangeRecords(){(this.changeRecords&&this.changeRecords.length||this.oldCollection)&&this.call()}reset(t){this.oldCollection=t,this.hasSubscribers()&&!this.queued&&(this.queued=!0,this.taskQueue.queueMicroTask(this))}getLengthObserver(){return this.lengthObserver||(this.lengthObserver=new je(this.collection))}call(){let t,e=this.changeRecords,i=this.oldCollection;this.queued=!1,this.changeRecords=[],this.oldCollection=null,this.hasSubscribers()&&(t=i?this.collection instanceof Map||this.collection instanceof Set?Ae(i):Ce(this.collection,0,this.collection.length,i,0,i.length):this.collection instanceof Map||this.collection instanceof Set?e:Re(this.collection,e),this.callSubscribers(t)),this.lengthObserver&&this.lengthObserver.call(this.collection[this.lengthPropertyName])}})||Ot,je=we()($t=class{constructor(t){this.collection=t,this.lengthPropertyName=t instanceof Map||t instanceof Set?"size":"length",this.currentValue=t[this.lengthPropertyName]}getValue(){return this.collection[this.lengthPropertyName]}setValue(t){this.collection[this.lengthPropertyName]=t}subscribe(t,e){this.addSubscriber(t,e)}unsubscribe(t,e){this.removeSubscriber(t,e)}call(t){let e=this.currentValue;this.callSubscribers(t,e),this.currentValue=t}})||$t,Oe=Array.prototype.pop,$e=Array.prototype.push,Te=Array.prototype.reverse,Ve=Array.prototype.shift,qe=Array.prototype.sort,Se=Array.prototype.splice,_e=Array.prototype.unshift;function Ie(t,e){return Le.for(t,e)}Array.prototype.pop=function(){let t=this.length>0,e=Oe.apply(this,arguments);return t&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:this.length,oldValue:e}),e},Array.prototype.push=function(){let t=$e.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:this.length-arguments.length,removed:[],addedCount:arguments.length}),t},Array.prototype.reverse=function(){let t;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),t=this.slice());let e=Te.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(t),e},Array.prototype.shift=function(){let t=this.length>0,e=Ve.apply(this,arguments);return t&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:0,oldValue:e}),e},Array.prototype.sort=function(){let t;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),t=this.slice());let e=qe.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(t),e},Array.prototype.splice=function(){let t=Se.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:+arguments[0],removed:t,addedCount:arguments.length>2?arguments.length-2:0}),t},Array.prototype.unshift=function(){let t=_e.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:0,removed:[],addedCount:arguments.length}),t};let Le=class t extends Pe{constructor(t,e){super(t,e)}static for(e,i){return"__array_observer__"in i||Reflect.defineProperty(i,"__array_observer__",{value:t.create(e,i),enumerable:!1,configurable:!1}),i.__array_observer__}static create(e,i){return new t(e,i)}},Me=class{constructor(){this.isChain=!1,this.isAssignable=!1}evaluate(t,e,i){throw new Error(`Binding expression "${this}" cannot be evaluated.`)}assign(t,e,i){throw new Error(`Binding expression "${this}" cannot be assigned to.`)}toString(){return t.Unparser.unparse(this)}},Be=class extends Me{constructor(t){super(),this.expressions=t,this.isChain=!0}evaluate(t,e){let i,s,n=this.expressions;for(let r=0,h=n.length;r<h;++r)null!==(s=n[r].evaluate(t,e))&&(i=s);return i}accept(t){return t.visitChain(this)}},Fe=class extends Me{constructor(t,e,i){super(),this.expression=t,this.name=e,this.args=i}evaluate(t,e){return this.expression.evaluate(t,e)}assign(t,e,i){return this.expression.assign(t,e,i)}accept(t){return t.visitBindingBehavior(this)}connect(t,e){this.expression.connect(t,e)}bind(t,e,i){this.expression.expression&&this.expression.bind&&this.expression.bind(t,e,i);let s=i.bindingBehaviors(this.name);if(!s)throw new Error(`No BindingBehavior named "${this.name}" was found!`);let n=`behavior-${this.name}`;if(t[n])throw new Error(`A binding behavior named "${this.name}" has already been applied to "${this.expression}"`);t[n]=s,s.bind.apply(s,[t,e].concat(si(e,this.args,t.lookupFunctions)))}unbind(t,e){let i=`behavior-${this.name}`;t[i].unbind(t,e),t[i]=null,this.expression.expression&&this.expression.unbind&&this.expression.unbind(t,e)}},Ne=class extends Me{constructor(t,e,i,s){super(),this.expression=t,this.name=e,this.args=i,this.allArgs=s}evaluate(t,e){let i=e.valueConverters(this.name);if(!i)throw new Error(`No ValueConverter named "${this.name}" was found!`);return"toView"in i?i.toView.apply(i,si(t,this.allArgs,e)):this.allArgs[0].evaluate(t,e)}assign(t,e,i){let s=i.valueConverters(this.name);if(!s)throw new Error(`No ValueConverter named "${this.name}" was found!`);return"fromView"in s&&(e=s.fromView.apply(s,[e].concat(si(t,this.args,i)))),this.allArgs[0].assign(t,e,i)}accept(t){return t.visitValueConverter(this)}connect(t,e){let i=this.allArgs,s=i.length;for(;s--;)i[s].connect(t,e);let n=t.lookupFunctions.valueConverters(this.name);if(!n)throw new Error(`No ValueConverter named "${this.name}" was found!`);let r=n.signals;if(void 0!==r)for(s=r.length;s--;)gn(t,r[s])}},De=class extends Me{constructor(t,e){super(),this.target=t,this.value=e,this.isAssignable=!0}evaluate(t,e){return this.target.assign(t,this.value.evaluate(t,e))}accept(t){t.visitAssign(this)}connect(t,e){}assign(t,e){this.value.assign(t,e),this.target.assign(t,e)}},ze=class extends Me{constructor(t,e,i){super(),this.condition=t,this.yes=e,this.no=i}evaluate(t,e){return this.condition.evaluate(t,e)?this.yes.evaluate(t,e):this.no.evaluate(t,e)}accept(t){return t.visitConditional(this)}connect(t,e){this.condition.connect(t,e),this.condition.evaluate(e)?this.yes.connect(t,e):this.no.connect(t,e)}},Ue=class extends Me{constructor(t){super(),this.ancestor=t}evaluate(t,e){let i=t.overrideContext,s=this.ancestor;for(;s--&&i;)i=i.parentOverrideContext;return s<1&&i?i.bindingContext:void 0}accept(t){return t.visitAccessThis(this)}connect(t,e){}},He=class extends Me{constructor(t,e){super(),this.name=t,this.ancestor=e,this.isAssignable=!0}evaluate(t,e){return Gt(this.name,t,this.ancestor)[this.name]}assign(t,e){let i=Gt(this.name,t,this.ancestor);return i?i[this.name]=e:void 0}accept(t){return t.visitAccessScope(this)}connect(t,e){let i=Gt(this.name,e,this.ancestor);t.observeProperty(i,this.name)}},Ge=class extends Me{constructor(t,e){super(),this.object=t,this.name=e,this.isAssignable=!0}evaluate(t,e){let i=this.object.evaluate(t,e);return null==i?i:i[this.name]}assign(t,e){let i=this.object.evaluate(t);return null==i&&(i={},this.object.assign(t,i)),i[this.name]=e,e}accept(t){return t.visitAccessMember(this)}connect(t,e){this.object.connect(t,e);let i=this.object.evaluate(e);i&&t.observeProperty(i,this.name)}},We=class extends Me{constructor(t,e){super(),this.object=t,this.key=e,this.isAssignable=!0}evaluate(t,e){return function(t,e){if(Array.isArray(t))return t[parseInt(e,10)];if(t)return t[e];if(null==t)return;return t[e]}(this.object.evaluate(t,e),this.key.evaluate(t,e))}assign(t,e){return function(t,e,i){if(Array.isArray(t)){let s=parseInt(e,10);t.length<=s&&(t.length=s+1),t[s]=i}else t[e]=i;return i}(this.object.evaluate(t),this.key.evaluate(t),e)}accept(t){return t.visitAccessKeyed(this)}connect(t,e){this.object.connect(t,e);let i=this.object.evaluate(e);if(i instanceof Object){this.key.connect(t,e);let s=this.key.evaluate(e);null==s||Array.isArray(i)&&"number"==typeof s||t.observeProperty(i,s)}}},Qe=class extends Me{constructor(t,e,i){super(),this.name=t,this.args=e,this.ancestor=i}evaluate(t,e,i){let s=si(t,this.args,e),n=Gt(this.name,t,this.ancestor),r=ni(n,this.name,i);if(r)return r.apply(n,s)}accept(t){return t.visitCallScope(this)}connect(t,e){let i=this.args,s=i.length;for(;s--;)i[s].connect(t,e)}},Ye=class extends Me{constructor(t,e,i){super(),this.object=t,this.name=e,this.args=i}evaluate(t,e,i){let s=this.object.evaluate(t,e),n=si(t,this.args,e),r=ni(s,this.name,i);if(r)return r.apply(s,n)}accept(t){return t.visitCallMember(this)}connect(t,e){if(this.object.connect(t,e),ni(this.object.evaluate(e),this.name,!1)){let i=this.args,s=i.length;for(;s--;)i[s].connect(t,e)}}},Je=class extends Me{constructor(t,e){super(),this.func=t,this.args=e}evaluate(t,e,i){let s=this.func.evaluate(t,e);if("function"==typeof s)return s.apply(null,si(t,this.args,e));if(i||null!=s)throw new Error(`${this.func} is not a function`)}accept(t){return t.visitCallFunction(this)}connect(t,e){if(this.func.connect(t,e),"function"==typeof this.func.evaluate(e)){let i=this.args,s=i.length;for(;s--;)i[s].connect(t,e)}}},Xe=class extends Me{constructor(t,e,i){super(),this.operation=t,this.left=e,this.right=i}evaluate(t,e){let i=this.left.evaluate(t,e);switch(this.operation){case"&&":return i&&this.right.evaluate(t,e);case"||":return i||this.right.evaluate(t,e)}let s=this.right.evaluate(t,e);switch(this.operation){case"==":return i==s;case"===":return i===s;case"!=":return i!=s;case"!==":return i!==s}if(null===i||null===s||void 0===i||void 0===s){switch(this.operation){case"+":return null!=i?i:null!=s?s:0;case"-":return null!=i?i:null!=s?0-s:0}return null}switch(this.operation){case"+":return function(t,e){if(null!==t&&null!==e)return"string"==typeof t&&"string"!=typeof e?t+e.toString():"string"!=typeof t&&"string"==typeof e?t.toString()+e:t+e;if(null!==t)return t;if(null!==e)return e;return 0}(i,s);case"-":return i-s;case"*":return i*s;case"/":return i/s;case"%":return i%s;case"<":return i<s;case">":return i>s;case"<=":return i<=s;case">=":return i>=s;case"^":return i^s}throw new Error(`Internal error [${this.operation}] not handled`)}accept(t){return t.visitBinary(this)}connect(t,e){this.left.connect(t,e);let i=this.left.evaluate(e);"&&"===this.operation&&!i||"||"===this.operation&&i||this.right.connect(t,e)}},Ze=class extends Me{constructor(t,e){super(),this.operation=t,this.expression=e}evaluate(t,e){return!this.expression.evaluate(t,e)}accept(t){return t.visitPrefix(this)}connect(t,e){this.expression.connect(t,e)}},Ke=class extends Me{constructor(t){super(),this.value=t}evaluate(t,e){return this.value}accept(t){return t.visitLiteralPrimitive(this)}connect(t,e){}},ti=class extends Me{constructor(t){super(),this.value=t}evaluate(t,e){return this.value}accept(t){return t.visitLiteralString(this)}connect(t,e){}},ei=class extends Me{constructor(t){super(),this.elements=t}evaluate(t,e){let i=this.elements,s=[];for(let n=0,r=i.length;n<r;++n)s[n]=i[n].evaluate(t,e);return s}accept(t){return t.visitLiteralArray(this)}connect(t,e){let i=this.elements.length;for(let s=0;s<i;s++)this.elements[s].connect(t,e)}},ii=class extends Me{constructor(t,e){super(),this.keys=t,this.values=e}evaluate(t,e){let i={},s=this.keys,n=this.values;for(let r=0,h=s.length;r<h;++r)i[s[r]]=n[r].evaluate(t,e);return i}accept(t){return t.visitLiteralObject(this)}connect(t,e){let i=this.keys.length;for(let s=0;s<i;s++)this.values[s].connect(t,e)}};function si(t,e,i){const s=e.length,n=[];for(let r=0;r<s;r++)n[r]=e[r].evaluate(t,i);return n}function ni(t,e,i){let s=null==t?null:t[e];if("function"==typeof s)return s;if(!i&&null==s)return null;throw new Error(`${e} is not a function`)}t.Unparser=null,t.Unparser=class{constructor(t){this.buffer=t}static unparse(e){let i=[],s=new t.Unparser(i);return e.accept(s),i.join("")}write(t){this.buffer.push(t)}writeArgs(t){this.write("(");for(let e=0,i=t.length;e<i;++e)0!==e&&this.write(","),t[e].accept(this);this.write(")")}visitChain(t){let e=t.expressions;for(let t=0,i=expression.length;t<i;++t)0!==t&&this.write(";"),e[t].accept(this)}visitBindingBehavior(t){let e=t.args;t.expression.accept(this),this.write(`&${t.name}`);for(let t=0,i=e.length;t<i;++t)this.write(":"),e[t].accept(this)}visitValueConverter(t){let e=t.args;t.expression.accept(this),this.write(`|${t.name}`);for(let t=0,i=e.length;t<i;++t)this.write(":"),e[t].accept(this)}visitAssign(t){t.target.accept(this),this.write("="),t.value.accept(this)}visitConditional(t){t.condition.accept(this),this.write("?"),t.yes.accept(this),this.write(":"),t.no.accept(this)}visitAccessThis(t){if(0===t.ancestor)return void this.write("$this");this.write("$parent");let e=t.ancestor-1;for(;e--;)this.write(".$parent")}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.write("$parent.");this.write(t.name)}visitAccessMember(t){t.object.accept(this),this.write(`.${t.name}`)}visitAccessKeyed(t){t.object.accept(this),this.write("["),t.key.accept(this),this.write("]")}visitCallScope(t){let e=t.ancestor;for(;e--;)this.write("$parent.");this.write(t.name),this.writeArgs(t.args)}visitCallFunction(t){t.func.accept(this),this.writeArgs(t.args)}visitCallMember(t){t.object.accept(this),this.write(`.${t.name}`),this.writeArgs(t.args)}visitPrefix(t){this.write(`(${t.operation}`),t.expression.accept(this),this.write(")")}visitBinary(t){t.left.accept(this),this.write(t.operation),t.right.accept(this)}visitLiteralPrimitive(t){this.write(`${t.value}`)}visitLiteralArray(t){let e=t.elements;this.write("[");for(let t=0,i=e.length;t<i;++t)0!==t&&this.write(","),e[t].accept(this);this.write("]")}visitLiteralObject(t){let e=t.keys,i=t.values;this.write("{");for(let t=0,s=e.length;t<s;++t)0!==t&&this.write(","),this.write(`'${e[t]}':`),i[t].accept(this);this.write("}")}visitLiteralString(t){let e=t.value.replace(/'/g,"'");this.write(`'${e}'`)}},t.ExpressionCloner=null,t.cloneExpression=null,t.ExpressionCloner=class{cloneExpressionArray(t){let e=[],i=t.length;for(;i--;)e[i]=t[i].accept(this);return e}visitChain(t){return new Be(this.cloneExpressionArray(t.expressions))}visitBindingBehavior(t){return new Fe(t.expression.accept(this),t.name,this.cloneExpressionArray(t.args))}visitValueConverter(t){return new Ne(t.expression.accept(this),t.name,this.cloneExpressionArray(t.args))}visitAssign(t){return new De(t.target.accept(this),t.value.accept(this))}visitConditional(t){return new ze(t.condition.accept(this),t.yes.accept(this),t.no.accept(this))}visitAccessThis(t){return new Ue(t.ancestor)}visitAccessScope(t){return new He(t.name,t.ancestor)}visitAccessMember(t){return new Ge(t.object.accept(this),t.name)}visitAccessKeyed(t){return new We(t.object.accept(this),t.key.accept(this))}visitCallScope(t){return new Qe(t.name,this.cloneExpressionArray(t.args),t.ancestor)}visitCallFunction(t){return new Je(t.func.accept(this),this.cloneExpressionArray(t.args))}visitCallMember(t){return new Ye(t.object.accept(this),t.name,this.cloneExpressionArray(t.args))}visitPrefix(t){return new Ze(t.operation,t.expression.accept(this))}visitBinary(t){return new Xe(t.operation,t.left.accept(this),t.right.accept(this))}visitLiteralPrimitive(t){return new Ke(t)}visitLiteralArray(t){return new ei(this.cloneExpressionArray(t.elements))}visitLiteralObject(t){return new ii(t.keys,this.cloneExpressionArray(t.values))}visitLiteralString(t){return new ti(t.value)}},t.cloneExpression=function(e){let i=new t.ExpressionCloner;return e.accept(i)};const ri={oneTime:0,toView:1,oneWay:1,twoWay:2,fromView:3};class hi{constructor(t,e){this.index=t,this.text=e}withOp(t){return this.opKey=t,this}withGetterSetter(t){return this.key=t,this}withValue(t){return this.value=t,this}toString(){return`Token(${this.text})`}}let li=class{lex(t){let e=new oi(t),i=[],s=e.scanToken();for(;s;)i.push(s),s=e.scanToken();return i}},oi=class{constructor(t){this.input=t,this.length=t.length,this.peek=0,this.index=-1,this.advance()}scanToken(){for(;this.peek<=gi;){if(++this.index>=this.length)return this.peek=ai,null;this.peek=this.input.charCodeAt(this.index)}if(hs(this.peek))return this.scanIdentifier();if(ls(this.peek))return this.scanNumber(this.index);let t=this.index;switch(this.peek){case Oi:return this.advance(),ls(this.peek)?this.scanNumber(t):new hi(t,".");case Ci:case Ei:case is:case ns:case Di:case Ui:case Pi:case Ti:case Vi:return this.scanCharacter(t,String.fromCharCode(this.peek));case ki:case vi:return this.scanString();case Ai:case ji:case Ri:case $i:case xi:case Hi:case Ii:return this.scanOperator(t,String.fromCharCode(this.peek));case qi:case _i:case wi:case Si:return this.scanComplexOperator(t,Si,String.fromCharCode(this.peek),"=");case yi:return this.scanComplexOperator(t,yi,"&","&");case ss:return this.scanComplexOperator(t,ss,"|","|");case rs:for(;(e=this.peek)>=ci&&e<=gi||e===rs;)this.advance();return this.scanToken()}var e;let i=String.fromCharCode(this.peek);return this.error(`Unexpected character [${i}]`),null}scanCharacter(t,e){return as(this.peek===e.charCodeAt(0)),this.advance(),new hi(t,e)}scanOperator(t,e){return as(this.peek===e.charCodeAt(0)),as(1===ui[e]),this.advance(),new hi(t,e).withOp(e)}scanComplexOperator(t,e,i,s){as(this.peek===i.charCodeAt(0)),this.advance();let n=i;return this.peek===e&&(this.advance(),n+=s),this.peek===e&&(this.advance(),n+=s),as(1===ui[n]),new hi(t,n).withOp(n)}scanIdentifier(){as(hs(this.peek));let t=this.index;for(this.advance();e=this.peek,Wi<=e&&e<=es||Bi<=e&&e<=Ni||Li<=e&&e<=Mi||e===Gi||e===bi;)this.advance();var e;let i=this.input.substring(t,this.index),s=new hi(t,i);return 1===ui[i]?s.withOp(i):s.withGetterSetter(i),s}scanNumber(t){as(ls(this.peek));let e=this.index===t;for(this.advance();;){if(!ls(this.peek))if(this.peek===Oi)e=!1;else{if((i=this.peek)!==Qi&&i!==Fi)break;this.advance(),os(this.peek)&&this.advance(),ls(this.peek)||this.error("Invalid exponent",-1),e=!1}this.advance()}var i;let s=this.input.substring(t,this.index),n=e?parseInt(s,10):parseFloat(s);return new hi(t,s).withValue(n)}scanString(){as(this.peek===ki||this.peek===vi);let t,e=this.index,i=this.peek;this.advance();let s=this.index;for(;this.peek!==i;)if(this.peek===zi){let e;if(t||(t=[]),t.push(this.input.substring(s,this.index)),this.advance(),this.peek===Ki){let t=this.input.substring(this.index+1,this.index+5);/[A-Z0-9]{4}/.test(t)||this.error(`Invalid unicode escape [\\u${t}]`),e=parseInt(t,16);for(let t=0;t<5;++t)this.advance()}else e=us(this.peek),this.advance();t.push(String.fromCharCode(e)),s=this.index}else this.peek===ai?this.error("Unterminated quote"):this.advance();let n=this.input.substring(s,this.index);this.advance();let r=this.input.substring(e,this.index),h=n;return null!=t&&(t.push(n),h=t.join("")),new hi(e,r).withValue(h)}advance(){++this.index>=this.length?this.peek=ai:this.peek=this.input.charCodeAt(this.index)}error(t,e=0){let i=this.index+e;throw new Error(`Lexer Error: ${t} at column ${i} in expression [${this.input}]`)}};const ui={undefined:1,null:1,true:1,false:1,"+":1,"-":1,"*":1,"/":1,"%":1,"^":1,"=":1,"==":1,"===":1,"!=":1,"!==":1,"<":1,">":1,"<=":1,">=":1,"&&":1,"||":1,"&":1,"|":1,"!":1,"?":1},ai=0,ci=9,fi=10,di=11,mi=12,pi=13,gi=32,wi=33,vi=34,bi=36,xi=37,yi=38,ki=39,Ci=40,Ei=41,Ri=42,Ai=43,Pi=44,ji=45,Oi=46,$i=47,Ti=58,Vi=59,qi=60,Si=61,_i=62,Ii=63,Li=48,Mi=57,Bi=65,Fi=69,Ni=90,Di=91,zi=92,Ui=93,Hi=94,Gi=95,Wi=97,Qi=101,Yi=102,Ji=110,Xi=114,Zi=116,Ki=117,ts=118,es=122,is=123,ss=124,ns=125,rs=160;function hs(t){return Wi<=t&&t<=es||Bi<=t&&t<=Ni||t===Gi||t===bi}function ls(t){return Li<=t&&t<=Mi}function os(t){return t===ji||t===Ai}function us(t){switch(t){case Ji:return fi;case Yi:return mi;case Xi:return pi;case Zi:return ci;case ts:return di;default:return t}}function as(t,e){if(!t)throw e||"Assertion failed"}let cs=new hi(-1,null),fs=class{constructor(){this.cache={},this.lexer=new li}parse(t){return t=t||"",this.cache[t]||(this.cache[t]=new ds(this.lexer,t).parseChain())}},ds=class{constructor(t,e){this.index=0,this.input=e,this.tokens=t.lex(e)}get peek(){return this.index<this.tokens.length?this.tokens[this.index]:cs}parseChain(){let t=!1,e=[];for(;this.optional(";");)t=!0;for(;this.index<this.tokens.length;){")"!==this.peek.text&&"}"!==this.peek.text&&"]"!==this.peek.text||this.error(`Unconsumed token ${this.peek.text}`);let i=this.parseBindingBehavior();for(e.push(i);this.optional(";");)t=!0;t&&this.error("Multiple expressions are not allowed.")}return 1===e.length?e[0]:new Be(e)}parseBindingBehavior(){let t=this.parseValueConverter();for(;this.optional("&");){let e=this.peek.text,i=[];for(this.advance();this.optional(":");)i.push(this.parseExpression());t=new Fe(t,e,i)}return t}parseValueConverter(){let t=this.parseExpression();for(;this.optional("|");){let e=this.peek.text,i=[];for(this.advance();this.optional(":");)i.push(this.parseExpression());t=new Ne(t,e,i,[t].concat(i))}return t}parseExpression(){let t=this.peek.index,e=this.parseConditional();for(;"="===this.peek.text;){if(!e.isAssignable){let e=this.index<this.tokens.length?this.peek.index:this.input.length,i=this.input.substring(t,e);this.error(`Expression ${i} is not assignable`)}this.expect("="),e=new De(e,this.parseConditional())}return e}parseConditional(){let t=this.peek.index,e=this.parseLogicalOr();if(this.optional("?")){let i=this.parseExpression();if(!this.optional(":")){let e=this.index<this.tokens.length?this.peek.index:this.input.length,i=this.input.substring(t,e);this.error(`Conditional expression ${i} requires all 3 expressions`)}let s=this.parseExpression();e=new ze(e,i,s)}return e}parseLogicalOr(){let t=this.parseLogicalAnd();for(;this.optional("||");)t=new Xe("||",t,this.parseLogicalAnd());return t}parseLogicalAnd(){let t=this.parseEquality();for(;this.optional("&&");)t=new Xe("&&",t,this.parseEquality());return t}parseEquality(){let t=this.parseRelational();for(;;)if(this.optional("=="))t=new Xe("==",t,this.parseRelational());else if(this.optional("!="))t=new Xe("!=",t,this.parseRelational());else if(this.optional("==="))t=new Xe("===",t,this.parseRelational());else{if(!this.optional("!=="))return t;t=new Xe("!==",t,this.parseRelational())}}parseRelational(){let t=this.parseAdditive();for(;;)if(this.optional("<"))t=new Xe("<",t,this.parseAdditive());else if(this.optional(">"))t=new Xe(">",t,this.parseAdditive());else if(this.optional("<="))t=new Xe("<=",t,this.parseAdditive());else{if(!this.optional(">="))return t;t=new Xe(">=",t,this.parseAdditive())}}parseAdditive(){let t=this.parseMultiplicative();for(;;)if(this.optional("+"))t=new Xe("+",t,this.parseMultiplicative());else{if(!this.optional("-"))return t;t=new Xe("-",t,this.parseMultiplicative())}}parseMultiplicative(){let t=this.parsePrefix();for(;;)if(this.optional("*"))t=new Xe("*",t,this.parsePrefix());else if(this.optional("%"))t=new Xe("%",t,this.parsePrefix());else{if(!this.optional("/"))return t;t=new Xe("/",t,this.parsePrefix())}}parsePrefix(){return this.optional("+")?this.parsePrefix():this.optional("-")?new Xe("-",new Ke(0),this.parsePrefix()):this.optional("!")?new Ze("!",this.parsePrefix()):this.parseAccessOrCallMember()}parseAccessOrCallMember(){let t=this.parsePrimary();for(;;)if(this.optional(".")){let e=this.peek.text;if(this.advance(),this.optional("(")){let i=this.parseExpressionList(")");this.expect(")"),t=t instanceof Ue?new Qe(e,i,t.ancestor):new Ye(t,e,i)}else t=t instanceof Ue?new He(e,t.ancestor):new Ge(t,e)}else if(this.optional("[")){let e=this.parseExpression();this.expect("]"),t=new We(t,e)}else{if(!this.optional("("))return t;{let e=this.parseExpressionList(")");this.expect(")"),t=new Je(t,e)}}}parsePrimary(){if(this.optional("(")){let t=this.parseExpression();return this.expect(")"),t}if(this.optional("null"))return new Ke(null);if(this.optional("undefined"))return new Ke(void 0);if(this.optional("true"))return new Ke(!0);if(this.optional("false"))return new Ke(!1);if(this.optional("[")){let t=this.parseExpressionList("]");return this.expect("]"),new ei(t)}if("{"===this.peek.text)return this.parseObject();if(null!==this.peek.key&&void 0!==this.peek.key)return this.parseAccessOrCallScope();if(null!==this.peek.value&&void 0!==this.peek.value){let t=this.peek.value;return this.advance(),t instanceof String||"string"==typeof t?new ti(t):new Ke(t)}if(this.index>=this.tokens.length)throw new Error(`Unexpected end of expression: ${this.input}`);this.error(`Unexpected token ${this.peek.text}`)}parseAccessOrCallScope(){let t=this.peek.key;if(this.advance(),"$this"===t)return new Ue(0);let e=0;for(;"$parent"===t;)if(e++,this.optional("."))t=this.peek.key,this.advance();else{if(this.peek===cs||"("===this.peek.text||")"===this.peek.text||"["===this.peek.text||"}"===this.peek.text||","===this.peek.text||"|"===this.peek.text||"&"===this.peek.text)return new Ue(e);this.error(`Unexpected token ${this.peek.text}`)}if(this.optional("(")){let i=this.parseExpressionList(")");return this.expect(")"),new Qe(t,i,e)}return new He(t,e)}parseObject(){let t=[],e=[];if(this.expect("{"),"}"!==this.peek.text)do{let i=this.peek,s=i.value;t.push("string"==typeof s?s:i.text),this.advance(),!i.key||","!==this.peek.text&&"}"!==this.peek.text?(this.expect(":"),e.push(this.parseExpression())):(--this.index,e.push(this.parseAccessOrCallScope()))}while(this.optional(","));return this.expect("}"),new ii(t,e)}parseExpressionList(t){let e=[];if(this.peek.text!==t)do{e.push(this.parseExpression())}while(this.optional(","));return e}optional(t){return this.peek.text===t&&(this.advance(),!0)}expect(t){this.peek.text===t?this.advance():this.error(`Missing expected ${t}`)}advance(){this.index++}error(t){let e=this.index<this.tokens.length?`at column ${this.tokens[this.index].index+1} in`:"at the end of the expression";throw new Error(`Parser Error: ${t} ${e} [${this.input}]`)}},ms=Map.prototype;class ps extends Pe{constructor(t,e){super(t,e)}static for(t,e){return"__map_observer__"in e||Reflect.defineProperty(e,"__map_observer__",{value:ps.create(t,e),enumerable:!1,configurable:!1}),e.__map_observer__}static create(t,e){let i=new ps(t,e),s=ms;return s.set===e.set&&s.delete===e.delete&&s.clear===e.clear||(s={set:e.set,delete:e.delete,clear:e.clear}),e.set=function(){let t=e.has(arguments[0]),n=t?"update":"add",r=e.get(arguments[0]),h=s.set.apply(e,arguments);return t&&r===e.get(arguments[0])||i.addChangeRecord({type:n,object:e,key:arguments[0],oldValue:r}),h},e.delete=function(){let t=e.has(arguments[0]),n=e.get(arguments[0]),r=s.delete.apply(e,arguments);return t&&i.addChangeRecord({type:"delete",object:e,key:arguments[0],oldValue:n}),r},e.clear=function(){let t=s.clear.apply(e,arguments);return i.addChangeRecord({type:"clear",object:e}),t},i}}function gs(t){return t.path&&t.path[0]||t.deepPath&&t.deepPath[0]||t.target}function ws(){this.standardStopPropagation(),this.propagationStopped=!0}function vs(t){t.standardStopPropagation=t.stopPropagation,t.stopPropagation=ws}function bs(t){let e=!1;t.propagationStopped=!1;let i=gs(t),s=[];for(;i;){if(i.capturedCallbacks){let n=i.capturedCallbacks[t.type];n&&(e||(vs(t),e=!0),s.push(n))}i=i.parentNode}for(let e=s.length-1;e>=0;e--){let i=s[e];if("handleEvent"in i?i.handleEvent(t):i(t),t.propagationStopped)break}}class xs{constructor(t){this.eventName=t,this.count=0}increment(){this.count++,1===this.count&&h.addEventListener(this.eventName,bs,!0)}decrement(){this.count--,0===this.count&&h.removeEventListener(this.eventName,bs,!0)}}function ys(t){let e=!1;t.propagationStopped=!1;let i=gs(t);for(;i&&!t.propagationStopped;){if(i.delegatedCallbacks){let s=i.delegatedCallbacks[t.type];s&&(e||(vs(t),e=!0),"handleEvent"in s?s.handleEvent(t):s(t))}i=i.parentNode}}class ks{constructor(t){this.eventName=t,this.count=0}increment(){this.count++,1===this.count&&h.addEventListener(this.eventName,ys,!1)}decrement(){this.count--,0===this.count&&h.removeEventListener(this.eventName,ys)}}class Cs{constructor(){this.delegatedHandlers={},this.capturedHandlers={}}subscribe(t,e,i,s){let n,r,h;if(s===Es.bubbling){n=this.delegatedHandlers,h=n[e]||(n[e]=new ks(e));let s=t.delegatedCallbacks||(t.delegatedCallbacks={});return h.increment(),s[e]=i,function(){h.decrement(),s[e]=null}}if(s===Es.capturing){r=this.capturedHandlers,h=r[e]||(r[e]=new xs(e));let s=t.capturedCallbacks||(t.capturedCallbacks={});return h.increment(),s[e]=i,function(){h.decrement(),s[e]=null}}return t.addEventListener(e,i,!1),function(){t.removeEventListener(e,i)}}}const Es={none:0,capturing:1,bubbling:2};class Rs{constructor(){this.elementHandlerLookup={},this.eventStrategyLookup={},this.registerElementConfig({tagName:"input",properties:{value:["change","input"],checked:["change","input"],files:["change","input"]}}),this.registerElementConfig({tagName:"textarea",properties:{value:["change","input"]}}),this.registerElementConfig({tagName:"select",properties:{value:["change"]}}),this.registerElementConfig({tagName:"content editable",properties:{value:["change","input","blur","keyup","paste"]}}),this.registerElementConfig({tagName:"scrollable element",properties:{scrollTop:["scroll"],scrollLeft:["scroll"]}}),this.defaultEventStrategy=new Cs}registerElementConfig(t){let e,i=t.tagName.toLowerCase(),s=t.properties;for(e in this.elementHandlerLookup[i]={},s)s.hasOwnProperty(e)&&this.registerElementPropertyConfig(i,e,s[e])}registerElementPropertyConfig(t,e,i){this.elementHandlerLookup[t][e]=this.createElementHandler(i)}createElementHandler(t){return{subscribe:(e,i)=>(t.forEach(t=>{e.addEventListener(t,i,!1)}),function(){t.forEach(t=>{e.removeEventListener(t,i,!1)})})}}registerElementHandler(t,e){this.elementHandlerLookup[t.toLowerCase()]=e}registerEventStrategy(t,e){this.eventStrategyLookup[t]=e}getElementHandler(t,e){let i,s=this.elementHandlerLookup;if(t.tagName){if(s[i=t.tagName.toLowerCase()]&&s[i][e])return s[i][e];if("textContent"===e||"innerHTML"===e)return s["content editable"].value;if("scrollTop"===e||"scrollLeft"===e)return s["scrollable element"][e]}return null}addEventListener(t,e,i,s){return(this.eventStrategyLookup[e]||this.defaultEventStrategy).subscribe(t,e,i,s)}}class As{constructor(){this.tracked=[],this.checkDelay=120}addProperty(t){let e=this.tracked;e.push(t),1===e.length&&this.scheduleDirtyCheck()}removeProperty(t){let e=this.tracked;e.splice(e.indexOf(t),1)}scheduleDirtyCheck(){setTimeout(()=>this.check(),this.checkDelay)}check(){let t=this.tracked,e=t.length;for(;e--;){let i=t[e];i.isDirty()&&i.call()}t.length&&this.scheduleDirtyCheck()}}let Ps=we()(Tt=class{constructor(t,e,i){this.dirtyChecker=t,this.obj=e,this.propertyName=i}getValue(){return this.obj[this.propertyName]}setValue(t){this.obj[this.propertyName]=t}call(){let t=this.oldValue,e=this.getValue();this.callSubscribers(e,t),this.oldValue=e}isDirty(){return this.oldValue!==this.obj[this.propertyName]}subscribe(t,e){this.hasSubscribers()||(this.oldValue=this.getValue(),this.dirtyChecker.addProperty(this)),this.addSubscriber(t,e)}unsubscribe(t,e){this.removeSubscriber(t,e)&&!this.hasSubscribers()&&this.dirtyChecker.removeProperty(this)}})||Tt;const js=y("property-observation"),Os={getValue:(t,e)=>t[e],setValue:(t,e,i)=>{e[i]=t}};class $s{constructor(t,e){this.doNotCache=!0,this.primitive=t,this.propertyName=e}getValue(){return this.primitive[this.propertyName]}setValue(){let t=typeof this.primitive;throw new Error(`The ${this.propertyName} property of a ${t} (${this.primitive}) cannot be assigned.`)}subscribe(){}unsubscribe(){}}let Ts=we()(Vt=class{constructor(t,e,i){this.taskQueue=t,this.obj=e,this.propertyName=i,this.queued=!1,this.observing=!1}getValue(){return this.obj[this.propertyName]}setValue(t){this.obj[this.propertyName]=t}getterValue(){return this.currentValue}setterValue(t){let e=this.currentValue;e!==t&&(this.queued||(this.oldValue=e,this.queued=!0,this.taskQueue.queueMicroTask(this)),this.currentValue=t)}call(){let t=this.oldValue,e=this.currentValue;this.queued=!1,this.callSubscribers(e,t)}subscribe(t,e){this.observing||this.convertProperty(),this.addSubscriber(t,e)}unsubscribe(t,e){this.removeSubscriber(t,e)}convertProperty(){this.observing=!0,this.currentValue=this.obj[this.propertyName],this.setValue=this.setterValue,this.getValue=this.getterValue,Reflect.defineProperty(this.obj,this.propertyName,{configurable:!0,enumerable:!(this.propertyName in this.obj)||this.obj.propertyIsEnumerable(this.propertyName),get:this.getValue.bind(this),set:this.setValue.bind(this)})||js.warn(`Cannot observe property '${this.propertyName}' of object`,this.obj)}})||Vt,Vs=class{constructor(t,e,i){this.element=t,this.propertyName=e,this.attributeName=i}getValue(){return this.element.getAttributeNS("http://www.w3.org/1999/xlink",this.attributeName)}setValue(t){return this.element.setAttributeNS("http://www.w3.org/1999/xlink",this.attributeName,t)}subscribe(){throw new Error(`Observation of a "${this.element.nodeName}" element's "${this.propertyName}" property is not supported.`)}};const qs={getValue:(t,e)=>t.getAttribute(e),setValue:(t,e,i)=>{null==t?e.removeAttribute(i):e.setAttribute(i,t)}};let Ss=class{constructor(t,e){this.element=t,this.propertyName=e}getValue(){return this.element.getAttribute(this.propertyName)}setValue(t){return null==t?this.element.removeAttribute(this.propertyName):this.element.setAttribute(this.propertyName,t)}subscribe(){throw new Error(`Observation of a "${this.element.nodeName}" element's "${this.propertyName}" property is not supported.`)}},_s=class{constructor(t,e){this.element=t,this.propertyName=e,this.styles=null,this.version=0}getValue(){return this.element.style.cssText}R(t,e){let i="";null!=e&&"function"==typeof e.indexOf&&-1!==e.indexOf("!important")&&(i="important",e=e.replace("!important","")),this.element.style.setProperty(t,e,i)}setValue(t){let e,i=this.styles||{},s=this.version;if(null!=t)if(t instanceof Object){let n;for(e in t)t.hasOwnProperty(e)&&(n=t[e],i[e=e.replace(/([A-Z])/g,t=>"-"+t.toLowerCase())]=s,this.R(e,n))}else if(t.length){let n,r=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:^"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;for(;null!==(n=r.exec(t));)(e=n[1])&&(i[e]=s,this.R(e,n[2]))}if(this.styles=i,this.version+=1,0!==s)for(e in s-=1,i)i.hasOwnProperty(e)&&i[e]===s&&this.element.style.removeProperty(e)}subscribe(){throw new Error(`Observation of a "${this.element.nodeName}" element's "${this.propertyName}" property is not supported.`)}},Is=we()(qt=class{constructor(t,e,i){this.element=t,this.propertyName=e,this.handler=i,"files"===e&&(this.setValue=(()=>{}))}getValue(){return this.element[this.propertyName]}setValue(t){t=null==t?"":t,this.element[this.propertyName]!==t&&(this.element[this.propertyName]=t,this.notify())}notify(){let t=this.oldValue,e=this.getValue();this.callSubscribers(e,t),this.oldValue=e}handleEvent(){this.notify()}subscribe(t,e){this.hasSubscribers()||(this.oldValue=this.getValue(),this.disposeHandler=this.handler.subscribe(this.element,this)),this.addSubscriber(t,e)}unsubscribe(t,e){this.removeSubscriber(t,e)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)}})||qt;let Ls=we()(St=class{constructor(t,e,i){this.element=t,this.handler=e,this.observerLocator=i}getValue(){return this.value}setValue(t){this.initialSync&&this.value===t||(this.arrayObserver&&(this.arrayObserver.unsubscribe("CheckedObserver:array",this),this.arrayObserver=null),"checkbox"===this.element.type&&Array.isArray(t)&&(this.arrayObserver=this.observerLocator.getArrayObserver(t),this.arrayObserver.subscribe("CheckedObserver:array",this)),this.oldValue=this.value,this.value=t,this.synchronizeElement(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))}call(t,e){this.synchronizeElement(),this.valueObserver||(this.valueObserver=this.element.__observers__.model||this.element.__observers__.value,this.valueObserver&&this.valueObserver.subscribe("CheckedObserver:value",this))}synchronizeElement(){let t=this.value,e=this.element,i=e.hasOwnProperty("model")?e.model:e.value,s="radio"===e.type,n=e.matcher||((t,e)=>t===e);e.checked=s&&!!n(t,i)||!s&&!0===t||!s&&Array.isArray(t)&&-1!==t.findIndex(t=>!!n(t,i))}synchronizeValue(){let t,e=this.value,i=this.element,s=i.hasOwnProperty("model")?i.model:i.value,n=i.matcher||((t,e)=>t===e);if("checkbox"===i.type){if(Array.isArray(e))return t=e.findIndex(t=>!!n(t,s)),void(i.checked&&-1===t?e.push(s):i.checked||-1===t||e.splice(t,1));e=i.checked}else{if(!i.checked)return;e=s}this.oldValue=this.value,this.value=e,this.notify()}notify(){let t=this.oldValue,e=this.value;e!==t&&this.callSubscribers(e,t)}handleEvent(){this.synchronizeValue()}subscribe(t,e){this.hasSubscribers()||(this.disposeHandler=this.handler.subscribe(this.element,this)),this.addSubscriber(t,e)}unsubscribe(t,e){this.removeSubscriber(t,e)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)}unbind(){this.arrayObserver&&(this.arrayObserver.unsubscribe("CheckedObserver:array",this),this.arrayObserver=null),this.valueObserver&&this.valueObserver.unsubscribe("CheckedObserver:value",this)}})||St;let Ms=we()(_t=class{constructor(t,e,i){this.element=t,this.handler=e,this.observerLocator=i}getValue(){return this.value}setValue(t){if(null!=t&&this.element.multiple&&!Array.isArray(t))throw new Error("Only null or Array instances can be bound to a multi-select.");this.value!==t&&(this.arrayObserver&&(this.arrayObserver.unsubscribe("SelectValueObserver:array",this),this.arrayObserver=null),Array.isArray(t)&&(this.arrayObserver=this.observerLocator.getArrayObserver(t),this.arrayObserver.subscribe("SelectValueObserver:array",this)),this.oldValue=this.value,this.value=t,this.synchronizeOptions(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))}call(t,e){this.synchronizeOptions()}synchronizeOptions(){let t,e=this.value;Array.isArray(e)&&(t=!0);let i=this.element.options,s=i.length,n=this.element.matcher||((t,e)=>t===e);for(;s--;){let r=i.item(s),h=r.hasOwnProperty("model")?r.model:r.value;t?r.selected=-1!==e.findIndex(t=>!!n(h,t)):r.selected=!!n(h,e)}}synchronizeValue(){let t=this.element.options,e=0,i=[];for(let s=0,n=t.length;s<n;s++){let n=t.item(s);n.selected&&(i.push(n.hasOwnProperty("model")?n.model:n.value),e++)}if(this.element.multiple){if(Array.isArray(this.value)){let t=this.element.matcher||((t,e)=>t===e),e=0;for(;e<this.value.length;){let s=this.value[e];-1===i.findIndex(e=>t(s,e))?this.value.splice(e,1):e++}for(e=0;e<i.length;){let s=i[e];-1===this.value.findIndex(e=>t(s,e))&&this.value.push(s),e++}return}}else i=0===e?null:i[0];i!==this.value&&(this.oldValue=this.value,this.value=i,this.notify())}notify(){let t=this.oldValue,e=this.value;this.callSubscribers(e,t)}handleEvent(){this.synchronizeValue()}subscribe(t,e){this.hasSubscribers()||(this.disposeHandler=this.handler.subscribe(this.element,this)),this.addSubscriber(t,e)}unsubscribe(t,e){this.removeSubscriber(t,e)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)}bind(){this.domObserver=h.createMutationObserver(()=>{this.synchronizeOptions(),this.synchronizeValue()}),this.domObserver.observe(this.element,{childList:!0,subtree:!0})}unbind(){this.domObserver.disconnect(),this.domObserver=null,this.arrayObserver&&(this.arrayObserver.unsubscribe("SelectValueObserver:array",this),this.arrayObserver=null)}})||_t,Bs=class{constructor(t){this.element=t,this.doNotCache=!0,this.value="",this.version=0}getValue(){return this.value}setValue(t){let e,i,s=this.nameIndex||{},n=this.version;if(null!=t&&t.length)for(let r=0,h=(e=t.split(/\s+/)).length;r<h;r++)""!==(i=e[r])&&(s[i]=n,this.element.classList.add(i));if(this.value=t,this.nameIndex=s,this.version+=1,0!==n)for(i in n-=1,s)s.hasOwnProperty(i)&&s[i]===n&&this.element.classList.remove(i)}subscribe(){throw new Error(`Observation of a "${this.element.nodeName}" element's "class" property is not supported.`)}};function Fs(t){return!!(t&&t.get&&t.get.dependencies)}let Ns,Ds,zs,Us,Hs=class extends Me{constructor(t,e){super(),this.name=t,this.dependencies=e,this.isAssignable=!0}evaluate(t,e){return t.bindingContext[this.name]}assign(t,e){t.bindingContext[this.name]=e}accept(t){throw new Error("not implemented")}connect(t,e){let i=this.dependencies,s=i.length;for(;s--;)i[s].connect(t,e)}};function Gs(t,e,i,s){let n=i.get.dependencies;if(!(n instanceof Hs)){let t=n.length;for(;t--;)n[t]=s.parser.parse(n[t]);n=i.get.dependencies=new Hs(e,n)}let r={bindingContext:t,overrideContext:Ht(t)};return new ve(r,n,s)}{Ns={a:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","target","transform","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],altGlyph:["class","dx","dy","externalResourcesRequired","format","glyphRef","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],altGlyphDef:["id","xml:base","xml:lang","xml:space"],altGlyphItem:["id","xml:base","xml:lang","xml:space"],animate:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateColor:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateMotion:["accumulate","additive","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keyPoints","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","origin","path","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","rotate","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateTransform:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","type","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],circle:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","r","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],clipPath:["class","clipPathUnits","externalResourcesRequired","id","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],"color-profile":["id","local","name","rendering-intent","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],cursor:["externalResourcesRequired","id","requiredExtensions","requiredFeatures","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],defs:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],desc:["class","id","style","xml:base","xml:lang","xml:space"],ellipse:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],feBlend:["class","height","id","in","in2","mode","result","style","width","x","xml:base","xml:lang","xml:space","y"],feColorMatrix:["class","height","id","in","result","style","type","values","width","x","xml:base","xml:lang","xml:space","y"],feComponentTransfer:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feComposite:["class","height","id","in","in2","k1","k2","k3","k4","operator","result","style","width","x","xml:base","xml:lang","xml:space","y"],feConvolveMatrix:["bias","class","divisor","edgeMode","height","id","in","kernelMatrix","kernelUnitLength","order","preserveAlpha","result","style","targetX","targetY","width","x","xml:base","xml:lang","xml:space","y"],feDiffuseLighting:["class","diffuseConstant","height","id","in","kernelUnitLength","result","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feDisplacementMap:["class","height","id","in","in2","result","scale","style","width","x","xChannelSelector","xml:base","xml:lang","xml:space","y","yChannelSelector"],feDistantLight:["azimuth","elevation","id","xml:base","xml:lang","xml:space"],feFlood:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feFuncA:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncB:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncG:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncR:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feGaussianBlur:["class","height","id","in","result","stdDeviation","style","width","x","xml:base","xml:lang","xml:space","y"],feImage:["class","externalResourcesRequired","height","id","preserveAspectRatio","result","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],feMerge:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feMergeNode:["id","xml:base","xml:lang","xml:space"],feMorphology:["class","height","id","in","operator","radius","result","style","width","x","xml:base","xml:lang","xml:space","y"],feOffset:["class","dx","dy","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],fePointLight:["id","x","xml:base","xml:lang","xml:space","y","z"],feSpecularLighting:["class","height","id","in","kernelUnitLength","result","specularConstant","specularExponent","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feSpotLight:["id","limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","xml:base","xml:lang","xml:space","y","z"],feTile:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feTurbulence:["baseFrequency","class","height","id","numOctaves","result","seed","stitchTiles","style","type","width","x","xml:base","xml:lang","xml:space","y"],filter:["class","externalResourcesRequired","filterRes","filterUnits","height","id","primitiveUnits","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],font:["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],"font-face":["accent-height","alphabetic","ascent","bbox","cap-height","descent","font-family","font-size","font-stretch","font-style","font-variant","font-weight","hanging","id","ideographic","mathematical","overline-position","overline-thickness","panose-1","slope","stemh","stemv","strikethrough-position","strikethrough-thickness","underline-position","underline-thickness","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height","xml:base","xml:lang","xml:space"],"font-face-format":["id","string","xml:base","xml:lang","xml:space"],"font-face-name":["id","name","xml:base","xml:lang","xml:space"],"font-face-src":["id","xml:base","xml:lang","xml:space"],"font-face-uri":["id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],foreignObject:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],g:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],glyph:["arabic-form","class","d","glyph-name","horiz-adv-x","id","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],glyphRef:["class","dx","dy","format","glyphRef","id","style","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],hkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"],image:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],line:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","x1","x2","xml:base","xml:lang","xml:space","y1","y2"],linearGradient:["class","externalResourcesRequired","gradientTransform","gradientUnits","id","spreadMethod","style","x1","x2","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y1","y2"],marker:["class","externalResourcesRequired","id","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox","xml:base","xml:lang","xml:space"],mask:["class","externalResourcesRequired","height","id","maskContentUnits","maskUnits","requiredExtensions","requiredFeatures","style","systemLanguage","width","x","xml:base","xml:lang","xml:space","y"],metadata:["id","xml:base","xml:lang","xml:space"],"missing-glyph":["class","d","horiz-adv-x","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],mpath:["externalResourcesRequired","id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],path:["class","d","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","pathLength","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],pattern:["class","externalResourcesRequired","height","id","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],polygon:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],polyline:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],radialGradient:["class","cx","cy","externalResourcesRequired","fx","fy","gradientTransform","gradientUnits","id","r","spreadMethod","style","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],rect:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],script:["externalResourcesRequired","id","type","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],set:["attributeName","attributeType","begin","dur","end","externalResourcesRequired","fill","id","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],stop:["class","id","offset","style","xml:base","xml:lang","xml:space"],style:["id","media","title","type","xml:base","xml:lang","xml:space"],svg:["baseProfile","class","contentScriptType","contentStyleType","externalResourcesRequired","height","id","onabort","onactivate","onclick","onerror","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onresize","onscroll","onunload","onzoom","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","version","viewBox","width","x","xml:base","xml:lang","xml:space","y","zoomAndPan"],switch:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],symbol:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","style","viewBox","xml:base","xml:lang","xml:space"],text:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","transform","x","xml:base","xml:lang","xml:space","y"],textPath:["class","externalResourcesRequired","id","lengthAdjust","method","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","spacing","startOffset","style","systemLanguage","textLength","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],title:["class","id","style","xml:base","xml:lang","xml:space"],tref:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],tspan:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xml:base","xml:lang","xml:space","y"],use:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],view:["externalResourcesRequired","id","preserveAspectRatio","viewBox","viewTarget","xml:base","xml:lang","xml:space","zoomAndPan"],vkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"]},Ds={a:!0,altGlyph:!0,animate:!0,animateColor:!0,circle:!0,clipPath:!0,defs:!0,ellipse:!0,feBlend:!0,feColorMatrix:!0,feComponentTransfer:!0,feComposite:!0,feConvolveMatrix:!0,feDiffuseLighting:!0,feDisplacementMap:!0,feFlood:!0,feGaussianBlur:!0,feImage:!0,feMerge:!0,feMorphology:!0,feOffset:!0,feSpecularLighting:!0,feTile:!0,feTurbulence:!0,filter:!0,font:!0,foreignObject:!0,g:!0,glyph:!0,glyphRef:!0,image:!0,line:!0,linearGradient:!0,marker:!0,mask:!0,"missing-glyph":!0,path:!0,pattern:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,svg:!0,switch:!0,symbol:!0,text:!0,textPath:!0,tref:!0,tspan:!0,use:!0},zs={"alignment-baseline":!0,"baseline-shift":!0,"clip-path":!0,"clip-rule":!0,clip:!0,"color-interpolation-filters":!0,"color-interpolation":!0,"color-profile":!0,"color-rendering":!0,color:!0,cursor:!0,direction:!0,display:!0,"dominant-baseline":!0,"enable-background":!0,"fill-opacity":!0,"fill-rule":!0,fill:!0,filter:!0,"flood-color":!0,"flood-opacity":!0,"font-family":!0,"font-size-adjust":!0,"font-size":!0,"font-stretch":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-horizontal":!0,"glyph-orientation-vertical":!0,"image-rendering":!0,kerning:!0,"letter-spacing":!0,"lighting-color":!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,mask:!0,opacity:!0,overflow:!0,"pointer-events":!0,"shape-rendering":!0,"stop-color":!0,"stop-opacity":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,stroke:!0,"text-anchor":!0,"text-decoration":!0,"text-rendering":!0,"unicode-bidi":!0,visibility:!0,"word-spacing":!0,"writing-mode":!0};let t=function(t){let e=h.createElement("div");return e.innerHTML=t,e.firstChild};Us=class{constructor(){"altglyph"===t("<svg><altGlyph /></svg>").firstElementChild.nodeName&&Ws.altGlyph&&(Ws.altglyph=Ws.altGlyph,delete Ws.altGlyph,Ws.altglyphdef=Ws.altGlyphDef,delete Ws.altGlyphDef,Ws.altglyphitem=Ws.altGlyphItem,delete Ws.altGlyphItem,Ws.glyphref=Ws.glyphRef,delete Ws.glyphRef)}isStandardSvgAttribute(t,e){return Qs[t]&&Ys[e]||Ws[t]&&-1!==Ws[t].indexOf(e)}}}const Ws=Ns,Qs=Ds,Ys=zs,Js=Us||class{isStandardSvgAttribute(){return!1}};let Xs=(Lt=It=class{constructor(t,e,i,s,n){this.taskQueue=t,this.eventManager=e,this.dirtyChecker=i,this.svgAnalyzer=s,this.parser=n,this.adapters=[],this.logger=y("observer-locator")}getObserver(t,e){let i,s=t.__observers__;return s&&e in s?s[e]:((i=this.createPropertyObserver(t,e)).doNotCache||(void 0===s&&(s=this.getOrCreateObserversLookup(t)),s[e]=i),i)}getOrCreateObserversLookup(t){return t.__observers__||this.createObserversLookup(t)}createObserversLookup(t){let e={};return Reflect.defineProperty(t,"__observers__",{enumerable:!1,configurable:!1,writable:!1,value:e})||this.logger.warn("Cannot add observers to object",t),e}addAdapter(t){this.adapters.push(t)}getAdapterObserver(t,e,i){for(let s=0,n=this.adapters.length;s<n;s++){let n=this.adapters[s].getObserver(t,e,i);if(n)return n}return null}createPropertyObserver(t,e){let i,s,n;if(!(t instanceof Object))return new $s(t,e);if(t instanceof h.Element){if("class"===e)return new Bs(t);if("style"===e||"css"===e)return new _s(t,e);if(s=this.eventManager.getElementHandler(t,e),"value"===e&&"select"===t.tagName.toLowerCase())return new Ms(t,s,this);if("checked"===e&&"input"===t.tagName.toLowerCase())return new Ls(t,s,this);if(s)return new Is(t,e,s);if(n=/^xlink:(.+)$/.exec(e))return new Vs(t,e,n[1]);if("role"===e&&(t instanceof h.Element||t instanceof h.SVGElement)||/^\w+:|^data-|^aria-/.test(e)||t instanceof h.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(t.nodeName,e))return new Ss(t,e)}if(Fs(i=Object.getPropertyDescriptor(t,e)))return Gs(t,e,i,this);if(i){const s=i.get||i.set;if(s){if(s.getObserver)return s.getObserver(t);let n=this.getAdapterObserver(t,e,i);return n||new Ps(this.dirtyChecker,t,e)}}return t instanceof Array?"length"===e?this.getArrayObserver(t).getLengthObserver():new Ps(this.dirtyChecker,t,e):t instanceof Map?"size"===e?this.getMapObserver(t).getLengthObserver():new Ps(this.dirtyChecker,t,e):t instanceof Set?"size"===e?this.getSetObserver(t).getLengthObserver():new Ps(this.dirtyChecker,t,e):new Ts(this.taskQueue,t,e)}getAccessor(t,e){if(t instanceof h.Element){if("class"===e||"style"===e||"css"===e||"value"===e&&("input"===t.tagName.toLowerCase()||"select"===t.tagName.toLowerCase())||"checked"===e&&"input"===t.tagName.toLowerCase()||"model"===e&&"input"===t.tagName.toLowerCase()||/^xlink:.+$/.exec(e))return this.getObserver(t,e);if(/^\w+:|^data-|^aria-/.test(e)||t instanceof h.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(t.nodeName,e)||"img"===t.tagName.toLowerCase()&&"src"===e||"a"===t.tagName.toLowerCase()&&"href"===e)return qs}return Os}getArrayObserver(t){return Ie(this.taskQueue,t)}getMapObserver(t){return function(t,e){return ps.for(t,e)}(this.taskQueue,t)}getSetObserver(t){return dn(this.taskQueue,t)}},It.inject=[At,Rs,As,Js,fs],Lt),Zs=class{constructor(t,e,i,s,n,r){this.observerLocator=t,this.targetProperty=e,this.sourceExpression=i,this.mode=s,this.lookupFunctions=n,this.attribute=r,this.discrete=!1}createBinding(t){return new Ks(this.observerLocator,this.sourceExpression,t,this.targetProperty,this.mode,this.lookupFunctions)}},Ks=Kt()(Mt=class{constructor(t,e,i,s,n,r){this.observerLocator=t,this.sourceExpression=e,this.target=i,this.targetProperty=s,this.mode=n,this.lookupFunctions=r}updateTarget(t){this.targetObserver.setValue(t,this.target,this.targetProperty)}updateSource(t){this.sourceExpression.assign(this.source,t,this.lookupFunctions)}call(t,e,i){if(this.isBound){if(t===Dt)return i=this.targetObserver.getValue(this.target,this.targetProperty),(e=this.sourceExpression.evaluate(this.source,this.lookupFunctions))!==i&&this.updateTarget(e),void(this.mode!==ri.oneTime&&(this.m++,this.sourceExpression.connect(this,this.source),this.unobserve(!1)));if(t!==Nt)throw new Error(`Unexpected call context ${t}`);e!==this.sourceExpression.evaluate(this.source,this.lookupFunctions)&&this.updateSource(e)}}bind(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t,this.sourceExpression.bind&&this.sourceExpression.bind(this,t,this.lookupFunctions);let e=this.mode;if(!this.targetObserver){let t=e===ri.twoWay||e===ri.fromView?"getObserver":"getAccessor";this.targetObserver=this.observerLocator[t](this.target,this.targetProperty)}if("bind"in this.targetObserver&&this.targetObserver.bind(),this.mode!==ri.fromView){let e=this.sourceExpression.evaluate(t,this.lookupFunctions);this.updateTarget(e)}e!==ri.oneTime&&(e===ri.toView?oe(this):e===ri.twoWay?(this.sourceExpression.connect(this,t),this.targetObserver.subscribe(Nt,this)):e===ri.fromView&&this.targetObserver.subscribe(Nt,this))}unbind(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,"unbind"in this.targetObserver&&this.targetObserver.unbind(),this.targetObserver.unsubscribe&&this.targetObserver.unsubscribe(Nt,this),this.unobserve(!0))}connect(t){if(this.isBound){if(t){let t=this.sourceExpression.evaluate(this.source,this.lookupFunctions);this.updateTarget(t)}this.sourceExpression.connect(this,this.source)}}})||Mt,tn=class{constructor(t,e,i,s){this.observerLocator=t,this.targetProperty=e,this.sourceExpression=i,this.lookupFunctions=s}createBinding(t){return new en(this.observerLocator,this.sourceExpression,t,this.targetProperty,this.lookupFunctions)}},en=class{constructor(t,e,i,s,n){this.sourceExpression=e,this.target=i,this.targetProperty=t.getObserver(i,s),this.lookupFunctions=n}callSource(t){let e=this.source.overrideContext;Object.assign(e,t),e.$event=t;let i=this.sourceExpression.evaluate(this.source,this.lookupFunctions,!0);delete e.$event;for(let i in t)delete e[i];return i}bind(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t,this.sourceExpression.bind&&this.sourceExpression.bind(this,t,this.lookupFunctions),this.targetProperty.setValue(t=>this.callSource(t))}unbind(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this.targetProperty.setValue(null))}},sn=class t{constructor(t){this.name=t}static convention(e){if(e.endsWith("ValueConverter"))return new t(Ut(e.substring(0,e.length-14)))}initialize(t,e){this.instance=t.get(e)}register(t,e){t.registerValueConverter(e||this.name,this.instance)}load(t,e){}};let nn=class t{constructor(t){this.name=t}static convention(e){if(e.endsWith("BindingBehavior"))return new t(Ut(e.substring(0,e.length-15)))}initialize(t,e){this.instance=t.get(e)}register(t,e){t.registerBindingBehavior(e||this.name,this.instance)}load(t,e){}};let rn=class{constructor(t,e,i,s,n,r){this.eventManager=t,this.targetEvent=e,this.sourceExpression=i,this.delegationStrategy=s,this.discrete=!0,this.preventDefault=n,this.lookupFunctions=r}createBinding(t){return new hn(this.eventManager,this.targetEvent,this.delegationStrategy,this.sourceExpression,t,this.preventDefault,this.lookupFunctions)}},hn=class{constructor(t,e,i,s,n,r,h){this.eventManager=t,this.targetEvent=e,this.delegationStrategy=i,this.sourceExpression=s,this.target=n,this.preventDefault=r,this.lookupFunctions=h}callSource(t){let e=this.source.overrideContext;e.$event=t;let i=this.sourceExpression.evaluate(this.source,this.lookupFunctions,!0);return delete e.$event,!0!==i&&this.preventDefault&&t.preventDefault(),i}handleEvent(t){this.callSource(t)}bind(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t,this.sourceExpression.bind&&this.sourceExpression.bind(this,t,this.lookupFunctions),this.A=this.eventManager.addEventListener(this.target,this.targetEvent,this,this.delegationStrategy)}unbind(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this.A(),this.A=null)}};function ln(t){let e=t.au;if(void 0===e)throw new Error(`No Aurelia APIs are defined for the element: "${t.tagName}".`);return e}let on=class t{constructor(t,e,i){this.sourceExpression=t,this.apiName=e,this.lookupFunctions=i,this.discrete=!0}createBinding(e){return new un(this.sourceExpression,t.locateAPI(e,this.apiName),this.lookupFunctions)}static locateAPI(t,e){switch(e){case"element":return t;case"controller":return ln(t).controller;case"view-model":return ln(t).controller.viewModel;case"view":return ln(t).controller.view;default:let i=ln(t)[e];if(void 0===i)throw new Error(`Attempted to reference "${e}", but it was not found amongst the target's API.`);return i.viewModel}}},un=class{constructor(t,e,i){this.sourceExpression=t,this.target=e,this.lookupFunctions=i}bind(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t,this.sourceExpression.bind&&this.sourceExpression.bind(this,t,this.lookupFunctions),this.sourceExpression.assign(this.source,this.target,this.lookupFunctions)}unbind(){this.isBound&&(this.isBound=!1,this.sourceExpression.evaluate(this.source,this.lookupFunctions)===this.target&&this.sourceExpression.assign(this.source,null,this.lookupFunctions),this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null)}};const an={bindingBehaviors:t=>null,valueConverters:t=>null};let cn=(Ft=Bt=class{constructor(t,e){this.observerLocator=t,this.parser=e}createBindingExpression(t,e,i=ri.toView,s=an){return new Zs(this.observerLocator,t,this.parser.parse(e),i,s)}propertyObserver(t,e){return{subscribe:i=>{let s=this.observerLocator.getObserver(t,e);return s.subscribe(i),{dispose:()=>s.unsubscribe(i)}}}}collectionObserver(t){return{subscribe:e=>{let i;if(t instanceof Array)i=this.observerLocator.getArrayObserver(t);else if(t instanceof Map)i=this.observerLocator.getMapObserver(t);else{if(!(t instanceof Set))throw new Error("collection must be an instance of Array, Map or Set.");i=this.observerLocator.getSetObserver(t)}return i.subscribe(e),{dispose:()=>i.unsubscribe(e)}}}}expressionObserver(t,e){let i={bindingContext:t,overrideContext:Ht(t)};return new ve(i,this.parser.parse(e),this.observerLocator,an)}parseExpression(t){return this.parser.parse(t)}registerAdapter(t){this.observerLocator.addAdapter(t)}},Bt.inject=[Xs,fs],Ft),fn=Set.prototype;function dn(t,e){return mn.for(t,e)}let mn=class t extends Pe{constructor(t,e){super(t,e)}static for(e,i){return"__set_observer__"in i||Reflect.defineProperty(i,"__set_observer__",{value:t.create(e,i),enumerable:!1,configurable:!1}),i.__set_observer__}static create(e,i){let s=new t(e,i),n=fn;return n.add===i.add&&n.delete===i.delete&&n.clear===i.clear||(n={add:i.add,delete:i.delete,clear:i.clear}),i.add=function(){let t=i.size,e=n.add.apply(i,arguments);return i.size===t||s.addChangeRecord({type:"add",object:i,value:Array.from(i).pop()}),e},i.delete=function(){let t=i.has(arguments[0]),e=n.delete.apply(i,arguments);return t&&s.addChangeRecord({type:"delete",object:i,value:arguments[0]}),e},i.clear=function(){let t=n.clear.apply(i,arguments);return s.addChangeRecord({type:"clear",object:i}),t},s}};const pn={};function gn(t,e){pn.hasOwnProperty(e)||(pn[e]=0),t.observeProperty(pn,e)}var wn,vn,bn,xn,yn,kn,Cn,En,Rn,An,Pn;let jn=class{enter(t){return Promise.resolve(!1)}leave(t){return Promise.resolve(!1)}removeClass(t,e){return t.classList.remove(e),Promise.resolve(!1)}addClass(t,e){return t.classList.add(e),Promise.resolve(!1)}animate(t,e){return Promise.resolve(!1)}runSequence(t){}registerEffect(t,e){}unregisterEffect(t){}},On=class{constructor(t){this.owner=t,this.owner.P++}done(){this.owner.P--,this.owner.j()}},$n=class{constructor(t){this.owner=t,this.owner.O=this,this.thenable=this.$()}waitForCompositionComplete(){return this.owner.j(),this.thenable}resolve(){this.T()}$(){return new Promise((t,e)=>{this.T=t})}},Tn=class{constructor(){this.O=null,this.P=0}tryCapture(){return null===this.O?new $n(this):null}enlist(){return new On(this)}j(){if(this.P<=0&&(this.P=0,null!==this.O)){let t=this.O;this.O=null,t.resolve()}}};const Vn=/([A-Z])/g;function qn(t){return"-"+t.toLowerCase()}function Sn(t){return(t.charAt(0).toLowerCase()+t.slice(1)).replace(Vn,qn)}function _n(t){return!(t.auInterpolationTarget||/[^\t\n\r ]/.test(t.textContent))}let In=class t{constructor(){}initialize(t,e){this.instance=t.get(e)}register(t,e){t.registerViewEngineHooks(this.instance)}load(t,e){}static convention(e){if(e.endsWith("ViewEngineHooks"))return new t}};let Ln=class{constructor(t){this.element=t,this.subscriptions={}}V(t){this.subscriptions[t.eventName]=this.subscriptions[t.eventName]||[],this.subscriptions[t.eventName].push(t)}q(t){let e,i=this.subscriptions[t.eventName];return i&&(e=i.indexOf(t))>-1&&i.splice(e,1),t}publish(t,e={},i=!0,s=!0){let n=h.createCustomEvent(t,{cancelable:s,bubbles:i,detail:e});this.element.dispatchEvent(n)}subscribe(t,e,i=!0){if("function"==typeof e){return new Mn(this,t,e,i,!1)}}subscribeOnce(t,e,i=!0){if("function"==typeof e){return new Mn(this,t,e,i,!0)}}dispose(t){if(t&&"string"==typeof t){let e=this.subscriptions[t];if(e)for(;e.length;){let t=e.pop();t&&t.dispose()}}else this.disposeAll()}disposeAll(){for(let t in this.subscriptions)this.dispose(t)}},Mn=class{constructor(t,e,i,s,n){this.owner=t,this.eventName=e,this.handler=i,this.capture="boolean"==typeof s?s:s.capture,this.bubbles=!this.capture,this.captureOrOptions=s,this.once=n,t.element.addEventListener(e,this,s),t.V(this)}handleEvent(t){(0,this.handler)(t),this.once&&this.dispose()}dispose(){this.owner.element.removeEventListener(this.eventName,this,this.captureOrOptions),this.owner.q(this),this.owner=this.handler=null}},Bn=class{constructor(){this.dependencies={}}addDependency(t){this.dependencies[t]=!0}hasDependency(t){return t in this.dependencies}},Fn=class{constructor(t=!1,e=!1){this.targetShadowDOM=t,this.compileSurrogate=e,this.associatedModuleId=null}};Fn.normal=new Fn;let Nn=class t{static enhance(){let e=new t;return e.enhance=!0,e}static unitTest(e,i){let s=new t;return s.type=e,s.attributes=i||{},s}static element(e,i){let s=new t;return s.type=i,s.attributes={},s.anchorIsContainer=!(e.hasAttribute("containerless")||i.containerless),s.initiatedByBehavior=!0,s}static attribute(e,i){let s=new t;return s.attrName=e,s.type=i||null,s.attributes={},s}static dynamic(e,i,s){let n=new t;return n.host=e,n.viewModel=i,n.viewFactory=s,n.inheritBindingContext=!0,n}constructor(){this.initiatedByBehavior=!1,this.enhance=!1,this.partReplacements=null,this.viewFactory=null,this.originalAttrName=null,this.skipContentProcessing=!1,this.contentFactory=null,this.viewModel=null,this.anchorIsContainer=!1,this.host=null,this.attributes=null,this.type=null,this.attrName=null,this.inheritBindingContext=!1}};Nn.normal=new Nn;let Dn=(vn=wn=class t{static shadowSlot(e){let i=new t;return i.parentInjectorId=e,i.shadowSlot=!0,i}static contentExpression(e){let i=new t;return i.contentExpression=e,i}static lifting(e,i){let s=new t;return s.parentInjectorId=e,s.expressions=t.noExpressions,s.behaviorInstructions=[i],s.viewFactory=i.viewFactory,s.providers=[i.type.target],s.lifting=!0,s}static normal(e,i,s,n,r,h){let l=new t;return l.injectorId=e,l.parentInjectorId=i,l.providers=s,l.behaviorInstructions=n,l.expressions=r,l.anchorIsContainer=!h||h.anchorIsContainer,l.elementInstruction=h,l}static surrogate(e,i,s,n){let r=new t;return r.expressions=s,r.behaviorInstructions=i,r.providers=e,r.values=n,r}constructor(){this.injectorId=null,this.parentInjectorId=null,this.shadowSlot=!1,this.slotName=null,this.slotFallbackFactory=null,this.contentExpression=null,this.expressions=null,this.behaviorInstructions=null,this.providers=null,this.viewFactory=null,this.anchorIsContainer=!1,this.elementInstruction=null,this.lifting=!1,this.values=null}},wn.noExpressions=Object.freeze([]),vn);const zn=M.create("aurelia:view-strategy",{validate:t=>"function"==typeof t.loadViewFactory||"View strategies must implement: loadViewFactory(viewEngine: ViewEngine, compileInstruction: ViewCompileInstruction, loadContext?: ResourceLoadContext): Promise<ViewFactory>",compose(t){"function"!=typeof t.makeRelativeTo&&(t.makeRelativeTo=r.noop)}});let Un=zn()(bn=class{constructor(t){this.path=t,this.absolutePath=null}loadViewFactory(t,e,i,s){return null===this.absolutePath&&this.moduleId&&(this.absolutePath=dt(this.path,this.moduleId)),e.associatedModuleId=this.moduleId,t.loadViewFactory(this.absolutePath||this.path,e,i,s)}makeRelativeTo(t){null===this.absolutePath&&(this.absolutePath=dt(this.path,t))}})||bn,Hn=zn()(xn=class{constructor(t,e){this.moduleId=e.moduleId,this.viewUrl=t.convertOriginToViewUrl(e)}loadViewFactory(t,e,i,s){return e.associatedModuleId=this.moduleId,t.loadViewFactory(this.viewUrl,e,i,s)}})||xn,Gn=zn()(yn=class{constructor(t,e){this.dependencies=t||null,this.dependencyBaseUrl=e||""}loadViewFactory(t,e,i,s){let n=this.entry,r=this.dependencies;if(n&&n.factoryIsReady)return Promise.resolve(null);if(this.entry=n=new kt(this.moduleId||this.dependencyBaseUrl),n.dependencies=[],n.templateIsLoaded=!0,null!==r)for(let t=0,e=r.length;t<e;++t){let e=r[t];"string"==typeof e||"function"==typeof e?n.addDependency(e):n.addDependency(e.from,e.as)}return e.associatedModuleId=this.moduleId,t.loadViewFactory(n,e,i,s)}})||yn;class Wn{constructor(t,e){this.moduleId=t,this.entry=e}loadViewFactory(t,e,i,s){let n=this.entry;return n.factoryIsReady?Promise.resolve(n.factory):(e.associatedModuleId=this.moduleId,t.loadViewFactory(n,e,i,s))}}zn()(Wn);class Qn{constructor(t,e,i){this.markup=t,this.dependencies=e||null,this.dependencyBaseUrl=i||""}loadViewFactory(t,e,i,s){let n=this.entry,r=this.dependencies;if(n&&n.factoryIsReady)return Promise.resolve(n.factory);if(this.entry=n=new kt(this.moduleId||this.dependencyBaseUrl),n.template=h.createTemplateFromMarkup(this.markup),null!==r)for(let t=0,e=r.length;t<e;++t){let e=r[t];"string"==typeof e||"function"==typeof e?n.addDependency(e):n.addDependency(e.from,e.as)}return e.associatedModuleId=this.moduleId,t.loadViewFactory(n,e,i,s)}}zn()(Qn);class Yn{constructor(t){("string"==typeof t||t instanceof HTMLTemplateElement)&&(t={template:t}),this.template=t.template,this.dependencies=t.dependencies||[],this.factoryIsReady=!1,this.onReady=null}loadViewFactory(t,e,i,s){if(this.factoryIsReady)return Promise.resolve(this.factory);let n=this.dependencies;return n="function"==typeof n?n():n?Array.isArray(n)?n:[n]:[],this.onReady=Promise.resolve(n).then(t=>Promise.all(t)).then(i=>{const n=t.container,r=t.appResources,h=t.viewCompiler,l=new rr(r);let o,u=[];l.autoRegister(n,s);for(let t of i){if("function"==typeof t)o=l.autoRegister(n,t);else{if(!t||"object"!=typeof t)throw new Error(`dependency neither function nor object. Received: "${typeof t}"`);for(let e in t)o=l.autoRegister(n,t[e])}null!==o.elementName&&u.push(o)}return Promise.all(u.map(t=>t.load(n,t.target))).then(()=>{const t=h.compile(this.template,l,e);return this.factoryIsReady=!0,this.factory=t,t})}),this.onReady}}zn()(Yn);class Jn{getViewStrategy(t){if(!t)return null;if("object"==typeof t&&"getViewStrategy"in t){let e=T.get(t.constructor);return"string"==typeof(t=t.getViewStrategy())&&(t=new Un(t)),zn.assert(t),e.moduleId&&t.makeRelativeTo(e.moduleId),t}if("string"==typeof t&&(t=new Un(t)),zn.validate(t))return t;if("function"!=typeof t&&(t=t.constructor),t.view){let e=t.view;if(null===(e="function"==typeof e?e():e))return new Gn;let i=e instanceof Yn?e:new Yn(e);return j.define(Jn.viewStrategyMetadataKey,i,t),i}let e=T.get(t),i=j.get(Jn.viewStrategyMetadataKey,t);if(i)e.moduleId&&(i.moduleId=e.moduleId);else{if(!e.moduleId)throw new Error("Cannot determine default view strategy for object.",t);i=this.createFallbackViewStrategy(e)}return i}createFallbackViewStrategy(t){return new Hn(this,t)}convertOriginToViewUrl(t){let e=t.moduleId;return(e.endsWith(".js")||e.endsWith(".ts")?e.substring(0,e.length-3):e)+".html"}}function Xn(t){throw new Error(`BindingLanguage must implement ${t}().`)}Jn.viewStrategyMetadataKey="aurelia:view-strategy";let Zn=class{inspectAttribute(t,e,i,s){Xn("inspectAttribute")}createAttributeInstruction(t,e,i,s){Xn("createAttributeInstruction")}inspectTextContent(t,e){Xn("inspectTextContent")}},Kn=Object.freeze([]),tr=ft(h.Element)(kn=class{constructor(t){this.element=t,this.element.auSlotAttribute=this}valueChanged(t,e){}})||kn,er=class t{constructor(t,e,i,s){this.anchor=t,this.anchor.viewSlot=this,this.name=e,this.destinationName=i,this.fallbackFactory=s,this.destinationSlot=null,this.projections=0,this.contentView=null,new tr(this.anchor).value=this.destinationName}get needsFallbackRendering(){return this.fallbackFactory&&0===this.projections}renderFallbackContent(t,e,i,s){if(null===this.contentView){this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext);let t=Object.create(null);t[this.destinationSlot.name]=this.destinationSlot,sr.distributeView(this.contentView,t,i,s,this.destinationSlot.name)}}passThroughTo(t){this.destinationSlot=t}addNode(e,i,s,n){null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),i.viewSlot instanceof t?i.viewSlot.passThroughTo(this):(this.projections++,this.destinationSlot.addNode(e,i,s,n))}removeView(t,e){this.projections--,this.destinationSlot.removeView(t,e),this.needsFallbackRendering&&this.renderFallbackContent(null,Kn,e)}removeAll(t){this.projections=0,this.destinationSlot.removeAll(t),this.needsFallbackRendering&&this.renderFallbackContent(null,Kn,t)}projectFrom(t,e){this.destinationSlot.projectFrom(t,e)}created(t){this.ownerView=t}bind(t){this.contentView&&this.contentView.bind(t.bindingContext,t.overrideContext)}attached(){this.contentView&&this.contentView.attached()}detached(){this.contentView&&this.contentView.detached()}unbind(){this.contentView&&this.contentView.unbind()}},ir=class{constructor(t,e,i){this.anchor=t,this.anchor.isContentProjectionSource=!0,this.anchor.viewSlot=this,this.name=e,this.fallbackFactory=i,this.contentView=null,this.projections=0,this.children=[],this.projectFromAnchors=null,this.destinationSlots=null}get needsFallbackRendering(){return this.fallbackFactory&&0===this.projections}addNode(t,e,i,s,n){if(null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),e.viewSlot instanceof er)e.viewSlot.passThroughTo(this);else if(null!==this.destinationSlots)sr.distributeNodes(t,[e],this.destinationSlots,this,s);else{e.auOwnerView=t,e.auProjectionSource=i,e.auAssignedSlot=this;let n=this.S(t,e,i,s);n.parentNode.insertBefore(e,n),this.children.push(e),this.projections++}}removeView(t,e){if(null!==this.destinationSlots)sr.undistributeView(t,this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)sr.undistributeView(t,this.contentView.slots,e);else{let i=this.children.find(t=>t.auSlotProjectFrom===e);if(i){let s=i.auProjectionChildren;for(let e=0,i=s.length;e<i;++e){let n=s[e];n.auOwnerView===t&&(s.splice(e,1),t.fragment.appendChild(n),e--,i--,this.projections--)}this.needsFallbackRendering&&this.renderFallbackContent(t,Kn,e)}}}removeAll(t){if(null!==this.destinationSlots)sr.undistributeAll(this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)sr.undistributeAll(this.contentView.slots,t);else{let e=this.children.find(e=>e.auSlotProjectFrom===t);if(e){let i=e.auProjectionChildren;for(let t=0,e=i.length;t<e;++t){let e=i[t];e.auOwnerView.fragment.appendChild(e),this.projections--}e.auProjectionChildren=[],this.needsFallbackRendering&&this.renderFallbackContent(null,Kn,t)}}}S(t,e,i,s){if(i){let n=this.children.find(t=>t.auSlotProjectFrom===i);if(n){if(void 0!==s){let i,r=n.auProjectionChildren,h=-1;for(let n=0,l=r.length;n<l;++n){let l=r[n];if(l.auOwnerView!==i&&(h++,i=l.auOwnerView,h>=s&&i!==t))return r.splice(n,0,e),l}}return n.auProjectionChildren.push(e),n}}return this.anchor}projectTo(t){this.destinationSlots=t}projectFrom(t,e){let i=h.createComment("anchor"),s=this.anchor.parentNode;i.auSlotProjectFrom=e,i.auOwnerView=t,i.auProjectionChildren=[],s.insertBefore(i,this.anchor),this.children.push(i),null===this.projectFromAnchors&&(this.projectFromAnchors=[]),this.projectFromAnchors.push(i)}renderFallbackContent(t,e,i,s){if(null===this.contentView&&(this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext),this.contentView.insertNodesBefore(this.anchor)),this.contentView.hasSlots){let n=this.contentView.slots,r=this.projectFromAnchors;if(null!==r)for(let t in n){let e=n[t];for(let t=0,i=r.length;t<i;++t){let i=r[t];e.projectFrom(i.auOwnerView,i.auSlotProjectFrom)}}this.fallbackSlots=n,sr.distributeNodes(t,e,n,i,s)}}created(t){this.ownerView=t}bind(t){this.contentView&&this.contentView.bind(t.bindingContext,t.overrideContext)}attached(){this.contentView&&this.contentView.attached()}detached(){this.contentView&&this.contentView.detached()}unbind(){this.contentView&&this.contentView.unbind()}},sr=(En=Cn=class t{static getSlotName(e){return void 0===e.auSlotAttribute?t.defaultSlotKey:e.auSlotAttribute.value}static distributeView(e,i,s,n,r){let h;if(null===e)h=Kn;else{let t=e.fragment.childNodes,i=t.length;h=new Array(i);for(let e=0;e<i;++e)h[e]=t[e]}t.distributeNodes(e,h,i,s,n,r)}static undistributeView(t,e,i){for(let s in e)e[s].removeView(t,i)}static undistributeAll(t,e){for(let i in t)t[i].removeAll(e)}static distributeNodes(e,i,s,n,r,h){for(let l=0,o=i.length;l<o;++l){let u=i[l],a=u.nodeType;if(u.isContentProjectionSource){u.viewSlot.projectTo(s);for(let t in s)s[t].projectFrom(e,u.viewSlot);i.splice(l,1),o--,l--}else if(1===a||3===a||u.viewSlot instanceof er)if(3===a&&_n(u))i.splice(l,1),o--,l--;else{let a=s[h||t.getSlotName(u)];a&&(a.addNode(e,u,n,r),i.splice(l,1),o--,l--)}else i.splice(l,1),o--,l--}for(let t in s){let h=s[t];h.needsFallbackRendering&&h.renderFallbackContent(e,i,n,r)}}},Cn.defaultSlotKey="__au-default-slot-key__",En);function nr(t,e,i,s){if(!e)return;let n=t[e];if(n){if(n!==i)throw new Error(`Attempted to register ${s} when one with the same name already exists. Name: ${e}.`)}else t[e]=i}class rr{static convention(t,e){let i,s=t.resource;if(s){if("string"==typeof s)(i=e||new Ir).elementName||(i.elementName=s);else{"function"==typeof s&&(s=s()),"string"==typeof s&&(s={name:s});let n=(s=Object.assign({},s)).type||"element",r=s.name||t.name;switch(n){case"element":case"attribute":i=e||new Ir,"element"===n?i.elementName||(i.elementName=Sn(r)):i.attributeName||(i.attributeName=Sn(r)),s.templateController&&(s.liftsContent=s.templateController,delete s.templateController),"defaultBindingMode"in s&&void 0!==i.attributeDefaultBindingMode&&(s.attributeDefaultBindingMode=s.defaultBindingMode,delete s.defaultBindingMode),Object.assign(i,s);break;case"valueConverter":i=new sn(Ut(r));break;case"bindingBehavior":i=new nn(Ut(r));break;case"viewEngineHooks":i=new In}}if(i instanceof Ir){let e="string"==typeof s?void 0:s.bindables;if(Array.isArray(e))for(let s=0,n=e.length;n>s;++s){let n=e[s];if(!n||"string"!=typeof n&&!n.name)throw new Error('Invalid bindable property. Expected either a string or an object with "name" property.');new Vr(n).registerWith(t,i)}}}return i}constructor(t,e){this.bindingLanguage=null,this.parent=t||null,this.hasParent=null!==this.parent,this.viewUrl=e||"",this.lookupFunctions={valueConverters:this.getValueConverter.bind(this),bindingBehaviors:this.getBindingBehavior.bind(this)},this.attributes=Object.create(null),this.elements=Object.create(null),this.valueConverters=Object.create(null),this.bindingBehaviors=Object.create(null),this.attributeMap=Object.create(null),this.values=Object.create(null),this.beforeCompile=this.afterCompile=this.beforeCreate=this.afterCreate=this.beforeBind=this.beforeUnbind=!1}_(t,e){if("function"==typeof t[e]){let i,s=t[e].bind(t),n=1;for(;void 0!==this[i=e+n.toString()];)n++;this[e]=!0,this[i]=s}}I(t,e,i,s,n){if(this.hasParent&&this.parent.I(t,e,i,s,n),this[t]){this[t+"1"](e,i,s,n);let r=t+"2";if(this[r]&&(this[r](e,i,s,n),this[r=t+"3"])){this[r](e,i,s,n);let h=4;for(;void 0!==this[r=t+h.toString()];)this[r](e,i,s,n),h++}}}registerViewEngineHooks(t){this._(t,"beforeCompile"),this._(t,"afterCompile"),this._(t,"beforeCreate"),this._(t,"afterCreate"),this._(t,"beforeBind"),this._(t,"beforeUnbind")}getBindingLanguage(t){return this.bindingLanguage||(this.bindingLanguage=t)}patchInParent(t){let e=this.parent;this.parent=t||null,this.hasParent=null!==this.parent,null===t.parent&&(t.parent=e,t.hasParent=null!==e)}relativeToView(t){return dt(t,this.viewUrl)}registerElement(t,e){nr(this.elements,t,e,"an Element")}getElement(t){return this.elements[t]||(this.hasParent?this.parent.getElement(t):null)}mapAttribute(t){return this.attributeMap[t]||(this.hasParent?this.parent.mapAttribute(t):null)}registerAttribute(t,e,i){this.attributeMap[t]=i,nr(this.attributes,t,e,"an Attribute")}getAttribute(t){return this.attributes[t]||(this.hasParent?this.parent.getAttribute(t):null)}registerValueConverter(t,e){nr(this.valueConverters,t,e,"a ValueConverter")}getValueConverter(t){return this.valueConverters[t]||(this.hasParent?this.parent.getValueConverter(t):null)}registerBindingBehavior(t,e){nr(this.bindingBehaviors,t,e,"a BindingBehavior")}getBindingBehavior(t){return this.bindingBehaviors[t]||(this.hasParent?this.parent.getBindingBehavior(t):null)}registerValue(t,e){nr(this.values,t,e,"a value")}getValue(t){return this.values[t]||(this.hasParent?this.parent.getValue(t):null)}autoRegister(t,e){let i=j.get(j.resource,e);return i?i instanceof Ir&&(rr.convention(e,i),null===i.attributeName&&null===i.elementName&&Ir.convention(e.name,i),null===i.attributeName&&null===i.elementName&&(i.elementName=Sn(e.name))):((i=rr.convention(e)||Ir.convention(e.name)||sn.convention(e.name)||nn.convention(e.name)||In.convention(e.name))||((i=new Ir).elementName=Sn(e.name)),j.define(j.resource,i,e)),i.initialize(t,e),i.register(this),i}}let hr=class{constructor(t,e,i,s,n,r,h){this.container=t,this.viewFactory=e,this.resources=e.resources,this.fragment=i,this.firstChild=i.firstChild,this.lastChild=i.lastChild,this.controllers=s,this.bindings=n,this.children=r,this.slots=h,this.hasSlots=!1,this.fromCache=!1,this.isBound=!1,this.isAttached=!1,this.bindingContext=null,this.overrideContext=null,this.controller=null,this.viewModelScope=null,this.animatableElement=void 0,this.L=!1,this.contentView=null;for(let t in h){this.hasSlots=!0;break}}returnToCache(){this.viewFactory.returnViewToCache(this)}created(){let t,e,i=this.controllers;for(t=0,e=i.length;t<e;++t)i[t].created(this)}bind(t,e,i){let s,n,r,h,l;if(!i||!this.L){if(this.isBound){if(this.bindingContext===t)return;this.unbind()}for(this.isBound=!0,this.bindingContext=t,this.overrideContext=e||Ht(t),this.resources.I("beforeBind",this),h=0,l=(n=this.bindings).length;h<l;++h)n[h].bind(this);for(null!==this.viewModelScope&&(t.bind(this.viewModelScope.bindingContext,this.viewModelScope.overrideContext),this.viewModelScope=null),h=0,l=(s=this.controllers).length;h<l;++h)s[h].bind(this);for(h=0,l=(r=this.children).length;h<l;++h)r[h].bind(t,e,!0);this.hasSlots&&sr.distributeView(this.contentView,this.slots)}}addBinding(t){this.bindings.push(t),this.isBound&&t.bind(this)}unbind(){let t,e,i,s,n;if(this.isBound){for(this.isBound=!1,this.resources.I("beforeUnbind",this),null!==this.controller&&this.controller.unbind(),s=0,n=(e=this.bindings).length;s<n;++s)e[s].unbind();for(s=0,n=(t=this.controllers).length;s<n;++s)t[s].unbind();for(s=0,n=(i=this.children).length;s<n;++s)i[s].unbind();this.bindingContext=null,this.overrideContext=null}}insertNodesBefore(t){t.parentNode.insertBefore(this.fragment,t)}appendNodesTo(t){t.appendChild(this.fragment)}removeNodes(){let t,e=this.fragment,i=this.firstChild,s=this.lastChild;for(;i&&(t=i.nextSibling,e.appendChild(i),i!==s);)i=t}attached(){let t,e,i,s;if(!this.isAttached){for(this.isAttached=!0,null!==this.controller&&this.controller.attached(),i=0,s=(t=this.controllers).length;i<s;++i)t[i].attached();for(i=0,s=(e=this.children).length;i<s;++i)e[i].attached()}}detached(){let t,e,i,s;if(this.isAttached){for(this.isAttached=!1,null!==this.controller&&this.controller.detached(),i=0,s=(t=this.controllers).length;i<s;++i)t[i].detached();for(i=0,s=(e=this.children).length;i<s;++i)e[i].detached()}}};let lr=class{constructor(t,e,i=jn.instance){this.anchor=t,this.anchorIsContainer=e,this.bindingContext=null,this.overrideContext=null,this.animator=i,this.children=[],this.isBound=!1,this.isAttached=!1,this.contentSelectors=null,t.viewSlot=this,t.isContentProjectionSource=!1}animateView(t,e="enter"){let i=function(t){if(void 0!==t.animatableElement)return t.animatableElement;let e=t.firstChild;for(;e&&1!==e.nodeType;)e=e.nextSibling;return e&&1===e.nodeType?t.animatableElement=e.classList.contains("au-animate")?e:null:t.animatableElement=null}(t);if(null!==i)switch(e){case"enter":return this.animator.enter(i);case"leave":return this.animator.leave(i);default:throw new Error("Invalid animation direction: "+e)}}transformChildNodesIntoView(){let t=this.anchor;this.children.push({fragment:t,firstChild:t.firstChild,lastChild:t.lastChild,returnToCache(){},removeNodes(){let e;for(;e=t.lastChild;)t.removeChild(e)},created(){},bind(){},unbind(){},attached(){},detached(){}})}bind(t,e){let i,s,n;if(this.isBound){if(this.bindingContext===t)return;this.unbind()}for(this.isBound=!0,this.bindingContext=t=t||this.bindingContext,this.overrideContext=e=e||this.overrideContext,i=0,s=(n=this.children).length;i<s;++i)n[i].bind(t,e,!0)}unbind(){if(this.isBound){let t,e,i=this.children;for(this.isBound=!1,this.bindingContext=null,this.overrideContext=null,t=0,e=i.length;t<e;++t)i[t].unbind()}}add(t){if(this.anchorIsContainer?t.appendNodesTo(this.anchor):t.insertNodesBefore(this.anchor),this.children.push(t),this.isAttached)return t.attached(),this.animateView(t,"enter")}insert(t,e){let i=this.children,s=i.length;return 0===t&&0===s||t>=s?this.add(e):(e.insertNodesBefore(i[t].firstChild),i.splice(t,0,e),this.isAttached?(e.attached(),this.animateView(e,"enter")):void 0)}move(t,e){if(t===e)return;const i=this.children,s=i[t];s.removeNodes(),s.insertNodesBefore(i[e].firstChild),i.splice(t,1),i.splice(e,0,s)}remove(t,e,i){return this.removeAt(this.children.indexOf(t),e,i)}removeMany(t,e,i){const s=this.children;let n,r=t.length,h=[];t.forEach(t=>{if(i)return void t.removeNodes();let e=this.animateView(t,"leave");e?h.push(e.then(()=>t.removeNodes())):t.removeNodes()});let l=()=>{if(this.isAttached)for(n=0;n<r;++n)t[n].detached();if(e)for(n=0;n<r;++n)t[n].returnToCache();for(n=0;n<r;++n){const e=s.indexOf(t[n]);e>=0&&s.splice(e,1)}};return h.length>0?Promise.all(h).then(()=>l()):l()}removeAt(t,e,i){let s=this.children[t],n=()=>(t=this.children.indexOf(s),s.removeNodes(),this.children.splice(t,1),this.isAttached&&s.detached(),e&&s.returnToCache(),s);if(!i){let t=this.animateView(s,"leave");if(t)return t.then(()=>n())}return n()}removeAll(t,e){let i,s=this.children,n=s.length,r=[];s.forEach(t=>{if(e)return void t.removeNodes();let i=this.animateView(t,"leave");i?r.push(i.then(()=>t.removeNodes())):t.removeNodes()});let h=()=>{if(this.isAttached)for(i=0;i<n;++i)s[i].detached();if(t)for(i=0;i<n;++i){const t=s[i];t&&t.returnToCache()}this.children=[]};return r.length>0?Promise.all(r).then(()=>h()):h()}attached(){let t,e,i,s;if(!this.isAttached)for(this.isAttached=!0,t=0,e=(i=this.children).length;t<e;++t)(s=i[t]).attached(),this.animateView(s,"enter")}detached(){let t,e,i;if(this.isAttached)for(this.isAttached=!1,t=0,e=(i=this.children).length;t<e;++t)i[t].detached()}projectTo(t){this.projectToSlots=t,this.add=this.M,this.insert=this.B,this.move=this.F,this.remove=this.N,this.removeAt=this.D,this.removeMany=this.z,this.removeAll=this.U,this.children.forEach(e=>sr.distributeView(e,t,this))}M(t){sr.distributeView(t,this.projectToSlots,this),this.children.push(t),this.isAttached&&t.attached()}B(t,e){0===t&&!this.children.length||t>=this.children.length?this.add(e):(sr.distributeView(e,this.projectToSlots,this,t),this.children.splice(t,0,e),this.isAttached&&e.attached())}F(t,e){if(t===e)return;const i=this.children,s=i[t];sr.undistributeView(s,this.projectToSlots,this),sr.distributeView(s,this.projectToSlots,this,e),i.splice(t,1),i.splice(e,0,s)}N(t,e){sr.undistributeView(t,this.projectToSlots,this),this.children.splice(this.children.indexOf(t),1),this.isAttached&&t.detached()}D(t,e){let i=this.children[t];sr.undistributeView(i,this.projectToSlots,this),this.children.splice(t,1),this.isAttached&&i.detached()}z(t,e){t.forEach(t=>this.remove(t,e))}U(t){sr.undistributeAll(this.projectToSlots,this);let e=this.children;if(this.isAttached)for(let t=0,i=e.length;t<i;++t)e[t].detached();this.children=[]}},or=new(G(Rn=class{get(t,e){let i=e.__providerId__;return i in t?t[i]:t[i]=t.invoke(e)}})||Rn);function ur(t){if(t===h.Element)return this.element;if(t===gr){if(this.boundViewFactory)return this.boundViewFactory;let t=this.instruction.viewFactory,e=this.partReplacements;return e&&(t=e[t.part]||t),this.boundViewFactory=new gr(this,t,e),this.boundViewFactory}return t===lr?(void 0===this.viewSlot&&(this.viewSlot=new lr(this.element,this.instruction.anchorIsContainer),this.element.isContentProjectionSource=this.instruction.lifting,this.children.push(this.viewSlot)),this.viewSlot):t===Ln?this.elementEvents||(this.elementEvents=new Ln(this.element)):t===Tn?this.compositionTransaction||(this.compositionTransaction=this.parent.get(t)):t===rr?this.viewResources:t===Dn?this.instruction:this.superGet(t)}function ar(t){return this.H.hasAttribute(t)}function cr(t){return this.H.getAttribute(t)}function fr(t,e){this.H.setAttribute(t,e)}function dr(t,e,i,s,n,r,l,o,u){let a,c,f,d,m,p=i.behaviorInstructions,g=i.expressions;if(i.contentExpression)return n.push(i.contentExpression.createBinding(e.nextSibling)),e.nextSibling.auInterpolationTarget=!0,void e.parentNode.removeChild(e);if(i.shadowSlot){let t,n=h.createComment("slot");return t=i.slotDestination?new er(n,i.slotName,i.slotDestination,i.slotFallbackFactory):new ir(n,i.slotName,i.slotFallbackFactory),h.replaceNode(n,e),l[i.slotName]=t,void s.push(t)}if(p.length)for(i.anchorIsContainer||(e=function(t,e){let i=h.createComment("anchor");if(e){let e=t.firstChild;e&&"AU-CONTENT"===e.tagName&&(i.contentElement=e),i.H=t,i.hasAttribute=ar,i.getAttribute=cr,i.setAttribute=fr}return h.replaceNode(i,t),i}(e,i.elementInstruction)),t[i.injectorId]=a=function(t,e,i,s,n,r){let h,l,o=t.createChild();for(o.element=e,o.instruction=i,o.children=s,o.viewResources=r,o.partReplacements=n,l=(h=i.providers).length;l--;)o.h.set(h[l],or);return o.superGet=o.get,o.get=ur,o}(t[i.parentInjectorId],e,i,r,o,u),c=0,f=p.length;c<f;++c)m=(d=p[c]).type.create(a,d,e,n),s.push(m);for(c=0,f=g.length;c<f;++c)n.push(g[c].createBinding(e))}function mr(t,e){let i,s,n,r,h,l=t.split(";");for(e=e||{},s=0;s<l.length;s++)i=(n=l[s]).indexOf(":"),r=n.substring(0,i).trim(),h=n.substring(i+1).trim(),e[r]=h;return e}function pr(t){let e="";for(let i in t)e+=i+":"+t[i]+";";return e}let gr=class{constructor(t,e,i){this.parentContainer=t,this.viewFactory=e,this.factoryCreateInstruction={partReplacements:i}}create(){let t=this.viewFactory.create(this.parentContainer.createChild(),this.factoryCreateInstruction);return t.L=!0,t}get isCaching(){return this.viewFactory.isCaching}setCacheSize(t,e){this.viewFactory.setCacheSize(t,e)}getCachedView(){return this.viewFactory.getCachedView()}returnViewToCache(t){this.viewFactory.returnViewToCache(t)}},wr=class{constructor(t,e,i){this.isCaching=!1,this.template=t,this.instructions=e,this.resources=i,this.cacheSize=-1,this.cache=null}setCacheSize(t,e){t&&("*"===t?t=Number.MAX_VALUE:"string"==typeof t&&(t=parseInt(t,10))),-1!==this.cacheSize&&e||(this.cacheSize=t),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}getCachedView(){return null!==this.cache&&this.cache.pop()||null}returnViewToCache(t){t.isAttached&&t.detached(),t.isBound&&t.unbind(),null!==this.cache&&this.cache.length<this.cacheSize&&(t.fromCache=!0,this.cache.push(t))}create(t,e,i){e=e||Nn.normal;let s=this.getCachedView();if(null!==s)return s;let n,r,h,l,o,u=e.enhance?this.template:this.template.cloneNode(!0),a=u.querySelectorAll(".au-target"),c=this.instructions,f=this.resources,d=[],m=[],p=[],g=Object.create(null),w={root:t},v=e.partReplacements;for(this.resources.I("beforeCreate",this,t,u,e),i&&null!==this.surrogateInstruction&&function(t,e,i,s,n,r){let h,l,o,u,a,c=i.behaviorInstructions,f=i.expressions,d=i.providers,m=i.values;for(h=d.length;h--;)t.h.set(d[h],or);for(let t in m)if(a=e.getAttribute(t)){if("class"===t)e.setAttribute("class",a+" "+m[t]);else if("style"===t){let i=mr(m[t]);mr(a,i),e.setAttribute("style",pr(i))}}else e.setAttribute(t,m[t]);if(c.length)for(h=0,l=c.length;h<l;++h)(u=(o=c[h]).type.create(t,o,e,n)).contentView&&r.push(u.contentView),s.push(u);for(h=0,l=f.length;h<l;++h)n.push(f[h].createBinding(e))}(t,i,this.surrogateInstruction,d,m,p),e.enhance&&u.hasAttribute("au-target-id")&&dr(w,l=u,o=c[l.getAttribute("au-target-id")],d,m,p,g,v,f),n=0,r=a.length;n<r;++n)dr(w,l=a[n],o=c[l.getAttribute("au-target-id")],d,m,p,g,v,f);return h=new hr(t,this,u,d,m,p,g),e.initiatedByBehavior||h.created(),this.resources.I("afterCreate",h),h}},vr=0;let br=0;function xr(t){let e=t.getAttribute("class"),i=(++br).toString();return t.setAttribute("class",e?e+" au-target":"au-target"),t.setAttribute("au-target-id",i),i}class yr{static inject(){return[Zn,rr]}constructor(t,e){this.bindingLanguage=t,this.resources=e}compile(t,e,i){let s,r,l;e=e||this.resources,i=i||Fn.normal,(t="string"==typeof t?h.createTemplateFromMarkup(t):t).content?(r=t.getAttribute("part"),l=t.getAttribute("view-cache"),s=h.adoptNode(t.content)):s=t,i.targetShadowDOM=i.targetShadowDOM&&n.shadowDOM,e.I("beforeCompile",s,e,i);let o={};this.G(s,e,o,t,"root",!i.targetShadowDOM);let u=s.firstChild;if(u&&1===u.nodeType){let t=u.getAttribute("au-target-id");if(t){let e=o[t];(e.shadowSlot||e.lifting||e.elementInstruction&&!e.elementInstruction.anchorIsContainer)&&s.insertBefore(h.createComment("view"),u)}}let a=new wr(s,o,e);return a.surrogateInstruction=i.compileSurrogate?this.W(t,e):null,a.part=r,l&&a.setCacheSize(l),e.I("afterCompile",a),a}G(t,e,i,s,n,r){switch(t.nodeType){case 1:return this.Q(t,e,i,s,n,r);case 3:let l=e.getBindingLanguage(this.bindingLanguage).inspectTextContent(e,t.wholeText);if(l){let e=h.createElement("au-marker"),n=xr(e);for((t.parentNode||s).insertBefore(e,t),t.textContent=" ",i[n]=Dn.contentExpression(l);t.nextSibling&&3===t.nextSibling.nodeType;)(t.parentNode||s).removeChild(t.nextSibling)}else for(;t.nextSibling&&3===t.nextSibling.nodeType;)t=t.nextSibling;return t.nextSibling;case 11:let o=t.firstChild;for(;o;)o=this.G(o,e,i,t,n,r)}return t.nextSibling}W(t,e){let i,s,n,r,h,l,o,u,a,c,f,d=t.tagName.toLowerCase(),m=t.attributes,p=e.getBindingLanguage(this.bindingLanguage),g=[],w=[],v={},b=!1,x=[];for(r=0,h=m.length;r<h;++r){if(o=(l=m[r]).name,u=l.value,a=p.inspectAttribute(e,d,o,u),(c=e.getAttribute(a.attrName))&&(i=e.mapAttribute(a.attrName))&&(s=c.attributes[i])&&(a.defaultBindingMode=s.defaultBindingMode,a.command||a.expression||(a.command=s.hasOptions?"options":null),a.command&&"options"!==a.command&&c.primaryProperty)){const t=c.primaryProperty;o=a.attrName=t.attribute,a.defaultBindingMode=t.defaultBindingMode}if(n=p.createAttributeInstruction(e,t,a,void 0,c))if(n.alteredAttr&&(c=e.getAttribute(n.attrName)),n.discrete)g.push(n);else if(c){if(n.type=c,this.Y(n,e),c.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");w.push(n)}else g.push(n.attributes[n.attrName]);else if(c){if((n=Nn.attribute(o,c)).attributes[e.mapAttribute(o)]=u,c.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");w.push(n)}else"id"!==o&&"part"!==o&&"replace-part"!==o&&(b=!0,v[o]=u)}if(g.length||w.length||b){for(r=0,h=w.length;r<h;++r)(n=w[r]).type.compile(this,e,t,n),x.push(n.type.target);for(r=0,h=g.length;r<h;++r)void 0!==(f=g[r]).attrToRemove&&t.removeAttribute(f.attrToRemove);return Dn.surrogate(x,w,g,v)}return null}Q(t,e,i,s,n,r){let l,o,u,a,c,f,d,m,p,g,w,v,b,x,y,k,C,E,R=t.tagName.toLowerCase(),A=t.attributes,P=[],j=[],O=[],$=e.getBindingLanguage(this.bindingLanguage);if("slot"===R)return r&&(t=function(t,e,i,s,n){let r=h.createElement("au-shadow-slot");h.replaceNode(r,i);let l=xr(r),o=Dn.shadowSlot(n);if(o.slotName=i.getAttribute("name")||sr.defaultSlotKey,o.slotDestination=i.getAttribute("slot"),i.innerHTML.trim()){let s,n=h.createDocumentFragment();for(;s=i.firstChild;)n.appendChild(s);o.slotFallbackFactory=t.compile(n,e)}return s[l]=o,r}(this,e,t,i,n)),t.nextSibling;if("template"===R){if(!("content"in t))throw new Error("You cannot place a template element within "+t.namespaceURI+" namespace");(u=this.compile(t,e)).part=t.getAttribute("part")}else(a=e.getElement(t.getAttribute("as-element")||R))&&(c=Nn.element(t,a),a.processAttributes(this,e,t,A,c),j.push(c));for(d=0,m=A.length;d<m;++d){if(v=g=(p=A[d]).name,w=p.value,x=$.inspectAttribute(e,R,g,w),r&&"slot"===x.attrName&&(x.attrName=g="au-slot"),f=null,a=e.getAttribute(x.attrName)){if((k=e.mapAttribute(x.attrName))&&(y=a.attributes[k])&&(x.defaultBindingMode=y.defaultBindingMode,x.command||x.expression||(x.command=y.hasOptions?"options":null),x.command&&"options"!==x.command&&a.primaryProperty)){const t=a.primaryProperty;g=x.attrName=t.attribute,x.defaultBindingMode=t.defaultBindingMode}}else c&&(f=c.type.attributes[x.attrName])&&(x.defaultBindingMode=f.defaultBindingMode);if(b=f?$.createAttributeInstruction(e,t,x,c):$.createAttributeInstruction(e,t,x,void 0,a))if(b.alteredAttr&&(a=e.getAttribute(b.attrName)),b.discrete)P.push(b);else if(a){if(b.type=a,this.Y(b,e),a.liftsContent){b.originalAttrName=v,o=b;break}j.push(b)}else f?c.attributes[x.attrName].targetProperty=f.name:P.push(b.attributes[b.attrName]);else if(a){if((b=Nn.attribute(g,a)).attributes[e.mapAttribute(g)]=w,a.liftsContent){b.originalAttrName=v,o=b;break}j.push(b)}else f&&(c.attributes[g]=w)}if(o)o.viewFactory=u,i[C=xr(t=o.type.compile(this,e,t,o,s))]=Dn.lifting(n,o);else{let h=!1;if(P.length||j.length){for(E=!!j.length&&++vr,d=0,m=j.length;d<m;++d)(b=j[d]).type.compile(this,e,t,b,s),O.push(b.type.target),h=h||b.skipContentProcessing;for(d=0,m=P.length;d<m;++d)void 0!==(l=P[d]).attrToRemove&&t.removeAttribute(l.attrToRemove);i[C=xr(t)]=Dn.normal(E,n,O,j,P,c)}if(h)return t.nextSibling;let o=t.firstChild;for(;o;)o=this.G(o,e,i,t,E||n,r)}return t.nextSibling}Y(t,e){let i,s,n,r=t.type,h=t.attrName,l=t.attributes,o=e.mapAttribute(h);for(s in o&&h in l&&o!==h&&(l[o]=l[h],delete l[h]),l)null!==(n=l[s])&&"object"==typeof n&&(i=r.attributes[s],n.targetProperty=void 0!==i?i.name:s)}}let kr=class{constructor(t){this.id=t,this.moduleInstance=null,this.mainResource=null,this.resources=null,this.viewStrategy=null,this.isInitialized=!1,this.onLoaded=null,this.loadContext=null}initialize(t){let e=this.mainResource,i=this.resources,s=this.viewStrategy;if(!this.isInitialized){this.isInitialized=!0,void 0!==e&&(e.metadata.viewStrategy=s,e.initialize(t));for(let n=0,r=i.length;n<r;++n)(e=i[n]).metadata.viewStrategy=s,e.initialize(t)}}register(t,e){let i=this.mainResource,s=this.resources;void 0!==i&&(i.register(t,e),e=null);for(let i=0,n=s.length;i<n;++i)s[i].register(t,e),e=null}load(t,e){if(null!==this.onLoaded)return this.loadContext===e?Promise.resolve():this.onLoaded;let i,s=this.mainResource,n=this.resources;if(void 0!==s){(i=new Array(n.length+1))[0]=s.load(t,e);for(let s=0,r=n.length;s<r;++s)i[s+1]=n[s].load(t,e)}else{i=new Array(n.length);for(let s=0,r=n.length;s<r;++s)i[s]=n[s].load(t,e)}return this.loadContext=e,this.onLoaded=Promise.all(i),this.onLoaded}},Cr=class{constructor(t,e,i){i||(i=j.get(j.resource,e))||((i=new Ir).elementName=Sn(t),j.define(j.resource,i,e)),i instanceof Ir?void 0===i.elementName?i.elementName=Sn(t):void 0===i.attributeName?i.attributeName=Sn(t):null===i.attributeName&&null===i.elementName&&Ir.convention(t,i):i.name||(i.name=Sn(t)),this.metadata=i,this.value=e}initialize(t){this.metadata.initialize(t,this.value)}register(t,e){this.metadata.register(t,e)}load(t,e){return this.metadata.load(t,this.value,e)}},Er=class{constructor(){this.cache=Object.create(null)}getAnalysis(t){return this.cache[t]}analyze(t,e,i){let s,n,r,h,l,o,u,a,c,f=[];if(c=this.cache[t])return c;for(l in c=new kr(t),this.cache[t]=c,"function"==typeof e&&(e={default:e}),i&&(s=new Cr(i,e[i])),e)o=e[l],l!==i&&"function"==typeof o&&((h=j.get(j.resource,o))?(h instanceof Ir&&(rr.convention(o,h),null===h.attributeName&&null===h.elementName&&Ir.convention(l,h),null===h.attributeName&&null===h.elementName&&(h.elementName=Sn(l))),!s&&h instanceof Ir&&null!==h.elementName?s=new Cr(l,o,h):f.push(new Cr(l,o,h))):zn.decorates(o)?a=o:o instanceof kt?a=new Wn(t,o):(u=rr.convention(o))?(null===u.elementName||s?f.push(new Cr(l,o,u)):s=new Cr(l,o,u),j.define(j.resource,u,o)):(u=Ir.convention(l))?(null===u.elementName||s?f.push(new Cr(l,o,u)):s=new Cr(l,o,u),j.define(j.resource,u,o)):(u=sn.convention(l)||nn.convention(l)||In.convention(l))?(f.push(new Cr(l,o,u)),j.define(j.resource,u,o)):n||(n=o,r=l));return!s&&n&&(s=new Cr(r,n)),c.moduleInstance=e,c.mainResource=s,c.resources=f,c.viewStrategy=a,c}},Rr=y("templating");let Ar=class{constructor(t){t.then(t=>this.viewFactory=t)}create(t,e,i,s){return this.viewFactory.create(t,e,i,s)}get isCaching(){return this.viewFactory.isCaching}setCacheSize(t,e){this.viewFactory.setCacheSize(t,e)}getCachedView(){return this.viewFactory.getCachedView()}returnViewToCache(t){this.viewFactory.returnViewToCache(t)}},Pr=null;class jr{static inject(){return[Ct,ct,yr,Er,rr]}constructor(t,e,i,s,n){this.loader=t,this.container=e,this.viewCompiler=i,this.moduleAnalyzer=s,this.appResources=n,this.J={},null===Pr&&((Pr=new Ir).attributeName="au-slot",j.define(j.resource,Pr,tr)),Pr.initialize(e,tr),Pr.register(n)}addResourcePlugin(t,e){let i=t.replace(".","")+"-resource-plugin";this.J[t]=i,this.loader.addPlugin(i,e)}loadViewFactory(t,e,i,s){return i=i||new Bn,function(t,e){return e instanceof kt?Promise.resolve(e):t.loadTemplate(e)}(this.loader,t).then(t=>{const n=t.address;return t.onReady?i.hasDependency(n)?null===t.template?t.onReady:Promise.resolve(new Ar(t.onReady)):(i.addDependency(n),t.onReady):(i.addDependency(n),t.onReady=this.loadTemplateResources(t,e,i,s).then(i=>{if(t.resources=i,null===t.template)return t.factory=null;let s=this.viewCompiler.compile(t.template,i,e);return t.factory=s}),t.onReady)})}loadTemplateResources(t,e,i,s){let n,r,h=new rr(this.appResources,t.address),l=t.dependencies;if(e=e||Fn.normal,0===l.length&&!e.associatedModuleId)return Promise.resolve(h);if(n=l.map(t=>t.src),r=l.map(t=>t.name),Rr.debug(`importing resources for ${t.address}`,n),s){let i=j.get(jr.viewModelRequireMetadataKey,s);if(i){let s=n.length;for(let e=0,s=i.length;e<s;++e){let s=i[e],h="function"==typeof s?T.get(s).moduleId:dt(s.src||s,t.address);-1===n.indexOf(h)&&(n.push(h),r.push(s.as))}Rr.debug(`importing ViewModel resources for ${e.associatedModuleId}`,n.slice(s))}}return this.importViewResources(n,r,h,e,i)}importViewModelResource(t,e){return this.loader.loadModule(t).then(i=>{let s=T.get(i).moduleId,n=this.moduleAnalyzer.analyze(s,i,e);if(!n.mainResource)throw new Error(`No view model found in module "${t}".`);return n.initialize(this.container),n.mainResource})}importViewResources(t,e,i,s,n){return n=n||new Bn,s=s||Fn.normal,t=t.map(t=>this.X(t)),this.loader.loadAllModules(t).then(t=>{let r,h,l,o,u,a,c=this.container,f=this.moduleAnalyzer,d=new Array(t.length);for(r=0,h=t.length;r<h;++r)u=t[r],o=T.get(u).moduleId,(l=f.analyze(o,u)).initialize(c),l.register(i,e[r]),d[r]=l;for(s.associatedModuleId&&(a=f.getAnalysis(s.associatedModuleId))&&a.register(i),r=0,h=d.length;r<h;++r)d[r]=d[r].load(c,n);return Promise.all(d).then(()=>i)})}X(t){let e=t.lastIndexOf(".");if(-1!==e){let i=t.substring(e),s=this.J[i];return void 0===s?t:this.loader.applyPluginToUrl(t,s)}return t}}jr.viewModelRequireMetadataKey="aurelia:view-model-require";class Or{constructor(t,e,i,s){this.behavior=t,this.instruction=e,this.viewModel=i,this.isAttached=!1,this.view=null,this.isBound=!1,this.scope=null,this.container=s,this.elementEvents=s.elementEvents||null;let n,r,h=t.observerLocator.getOrCreateObserversLookup(i),l=t.handlesBind,o=e.attributes,u=this.boundProperties=[],a=t.properties;for(t.Z(i,h),n=0,r=a.length;n<r;++n)a[n].K(i,h,o,l,u)}created(t){this.behavior.handlesCreated&&this.viewModel.created(t,this.view)}automate(t,e){this.view.bindingContext=this.viewModel,this.view.overrideContext=t||Ht(this.viewModel),this.view.L=!0,this.behavior.handlesCreated&&this.viewModel.created(e||null,this.view),this.bind(this.view)}bind(t){let e,i,s,n,r,h,l=this.behavior.handlesBind,o=this.boundProperties;if(this.isBound){if(this.scope===t)return;this.unbind()}for(this.isBound=!0,this.scope=t,e=0,i=o.length;e<i;++e)r=(n=(s=o[e]).observer).selfSubscriber,n.publishing=!1,l&&(n.selfSubscriber=null),s.binding.bind(t),n.call(),n.publishing=!0,n.selfSubscriber=r;null!==this.view?(l&&(this.view.viewModelScope=t),this.viewModel===t.overrideContext.bindingContext?h=t.overrideContext:this.instruction.inheritBindingContext?h=Ht(this.viewModel,t.overrideContext):(h=Ht(this.viewModel)).__parentOverrideContext=t.overrideContext,this.view.bind(this.viewModel,h)):l&&(h=t.overrideContext,void 0!==t.overrideContext.__parentOverrideContext&&this.viewModel.viewFactory&&this.viewModel.viewFactory.factoryCreateInstruction.partReplacements&&((h=Object.assign({},t.overrideContext)).parentOverrideContext=t.overrideContext.__parentOverrideContext),this.viewModel.bind(t.bindingContext,h))}unbind(){if(this.isBound){let t,e,i=this.boundProperties;for(this.isBound=!1,this.scope=null,null!==this.view&&this.view.unbind(),this.behavior.handlesUnbind&&this.viewModel.unbind(),null!==this.elementEvents&&this.elementEvents.disposeAll(),t=0,e=i.length;t<e;++t)i[t].binding.unbind()}}attached(){this.isAttached||(this.isAttached=!0,this.behavior.handlesAttached&&this.viewModel.attached(),null!==this.view&&this.view.attached())}detached(){this.isAttached&&(this.isAttached=!1,null!==this.view&&this.view.detached(),this.behavior.handlesDetached&&this.viewModel.detached())}}let $r=we()(An=class{constructor(t,e,i,s,n){this.taskQueue=t,this.obj=e,this.propertyName=i,this.notqueued=!0,this.publishing=!1,this.selfSubscriber=s,this.currentValue=this.oldValue=n}getValue(){return this.currentValue}setValue(t){let e=this.currentValue;e!==t&&(this.oldValue=e,this.currentValue=t,this.publishing&&this.notqueued&&(this.taskQueue.flushing?this.call():(this.notqueued=!1,this.taskQueue.queueMicroTask(this))))}call(){let t=this.oldValue,e=this.currentValue;this.notqueued=!0,e!==t&&(this.selfSubscriber&&this.selfSubscriber(e,t),this.callSubscribers(e,t),this.oldValue=e)}subscribe(t,e){this.addSubscriber(t,e)}unsubscribe(t,e){this.removeSubscriber(t,e)}})||An;function Tr(t,e){let i=t.__observers__;if(void 0===i){let e=Object.getPrototypeOf(t).constructor,s=j.get(j.resource,e);s.isInitialized||s.initialize(ct.instance||new ct,t.constructor),i=s.observerLocator.getOrCreateObserversLookup(t),s.Z(t,i)}return i[e]}let Vr=class{constructor(t){"string"==typeof t?this.name=t:Object.assign(this,t),this.attribute=this.attribute||Sn(this.name);let e=this.defaultBindingMode;null==e?this.defaultBindingMode=ri.oneWay:"string"==typeof e&&(this.defaultBindingMode=ri[e]||ri.oneWay),this.changeHandler=this.changeHandler||null,this.owner=null,this.descriptor=null}registerWith(t,e,i){if(e.properties.push(this),e.attributes[this.attribute]=this,this.owner=e,i)return this.descriptor=i,this.tt(i)}tt(t){let e=this.name;return t.configurable=!0,t.enumerable=!0,"initializer"in t&&(this.defaultValue=t.initializer,delete t.initializer,delete t.writable),"value"in t&&(this.defaultValue=t.value,delete t.value,delete t.writable),t.get=function(){return Tr(this,e).getValue()},t.set=function(t){Tr(this,e).setValue(t)},t.get.getObserver=function(t){return Tr(t,e)},t}defineOn(t,e){let i,s=this.name;null===this.changeHandler&&(i=s+"Changed")in t.prototype&&(this.changeHandler=i),null===this.descriptor&&Object.defineProperty(t.prototype,s,this.tt(e,{}))}createObserver(t){let e,i=null,s=this.defaultValue,n=this.changeHandler,r=this.name;if(!this.hasOptions){if(n in t)i="propertyChanged"in t?(e,i)=>{t[n](e,i),t.propertyChanged(r,e,i)}:(e,i)=>t[n](e,i);else if("propertyChanged"in t)i=((e,i)=>t.propertyChanged(r,e,i));else if(null!==n)throw new Error(`Change handler ${n} was specified but not declared on the class.`);return void 0!==s&&(e="function"==typeof s?s.call(t):s),new $r(this.owner.taskQueue,t,this.name,i,e)}}K(t,e,i,s,n){let r,h,l,o=this.defaultValue;if(this.isDynamic)for(let r in i)this.et(t,e,s,r,i[r],n);else this.hasOptions||(h=e[this.name],null!==i&&(r=h.selfSubscriber,l=i[this.attribute],s&&(h.selfSubscriber=null),"string"==typeof l?(t[this.name]=l,h.call()):l?n.push({observer:h,binding:l.createBinding(t)}):void 0!==o&&h.call(),h.selfSubscriber=r),h.publishing=!0)}et(t,e,i,s,n,r){let h,l,o=s+"Changed",u=null;o in t?u="propertyChanged"in t?(e,i)=>{t[o](e,i),t.propertyChanged(s,e,i)}:(e,i)=>t[o](e,i):"propertyChanged"in t&&(u=((e,i)=>t.propertyChanged(s,e,i))),h=e[s]=new $r(this.owner.taskQueue,t,s,u),Object.defineProperty(t,s,{configurable:!0,enumerable:!0,get:h.getValue.bind(h),set:h.setValue.bind(h)}),i&&(h.selfSubscriber=null),"string"==typeof n?(t[s]=n,h.call()):n&&(l={observer:h,binding:n.createBinding(t)},r.push(l)),h.publishing=!0,h.selfSubscriber=u}},qr=0;function Sr(){return!0}function _r(){}let Ir=class t{constructor(){this.elementName=null,this.attributeName=null,this.attributeDefaultBindingMode=void 0,this.liftsContent=!1,this.targetShadowDOM=!1,this.shadowDOMOptions=null,this.processAttributes=_r,this.processContent=Sr,this.usesShadowDOM=!1,this.childBindings=null,this.hasDynamicOptions=!1,this.containerless=!1,this.properties=[],this.attributes={},this.isInitialized=!1,this.primaryProperty=null}static convention(e,i){let s;return e.endsWith("CustomAttribute")&&((s=i||new t).attributeName=Sn(e.substring(0,e.length-15))),e.endsWith("CustomElement")&&((s=i||new t).elementName=Sn(e.substring(0,e.length-13))),s}addChildBinding(t){null===this.childBindings&&(this.childBindings=[]),this.childBindings.push(t)}initialize(t,e){let i,s,r,h,l=e.prototype,o=this.properties,u=this.attributeName,a=this.attributeDefaultBindingMode;if(!this.isInitialized)if(this.isInitialized=!0,e.__providerId__=++qr,this.observerLocator=t.get(Xs),this.taskQueue=t.get(At),this.target=e,this.usesShadowDOM=this.targetShadowDOM&&n.shadowDOM,this.handlesCreated="created"in l,this.handlesBind="bind"in l,this.handlesUnbind="unbind"in l,this.handlesAttached="attached"in l,this.handlesDetached="detached"in l,this.htmlName=this.elementName||this.attributeName,null!==u)if(0===o.length&&(new Vr({name:"value",changeHandler:"valueChanged"in l?"valueChanged":null,attribute:u,defaultBindingMode:a}).registerWith(e,this),h=!0),r=o[0],h)r.isDynamic=r.hasOptions=this.hasDynamicOptions,r.defineOn(e,this);else{for(i=0,s=o.length;i<s;++i)if(o[i].defineOn(e,this),o[i].primaryProperty){if(this.primaryProperty)throw new Error("Only one bindable property on a custom element can be defined as the default");this.primaryProperty=o[i]}(r=new Vr({name:"value",changeHandler:"valueChanged"in l?"valueChanged":null,attribute:u,defaultBindingMode:a})).hasOptions=!0,r.registerWith(e,this)}else{for(i=0,s=o.length;i<s;++i)o[i].defineOn(e,this);this.it(t,e)}}register(t,e){null!==this.attributeName&&(t.registerAttribute(e||this.attributeName,this,this.attributeName),Array.isArray(this.aliases)&&this.aliases.forEach(e=>{t.registerAttribute(e,this,this.attributeName)})),null!==this.elementName&&t.registerElement(e||this.elementName,this)}load(t,e,i,s,n){let r;return null!==this.elementName?(s=t.get(Jn).getViewStrategy(s||this.viewStrategy||e),r=new Fn(this.targetShadowDOM,!0),s.moduleId||(s.moduleId=T.get(e).moduleId),s.loadViewFactory(t.get(jr),r,i,e).then(t=>(n&&this.viewFactory||(this.viewFactory=t),t))):Promise.resolve(this)}compile(t,e,i,s,n){if(this.liftsContent){if(!s.viewFactory){let r=h.createElement("template"),l=h.createDocumentFragment(),o=i.getAttribute("view-cache"),u=i.getAttribute("part");i.removeAttribute(s.originalAttrName),h.replaceNode(r,i,n),l.appendChild(i),s.viewFactory=t.compile(l,e),u&&(s.viewFactory.part=u,i.removeAttribute("part")),o&&(s.viewFactory.setCacheSize(o),i.removeAttribute("view-cache")),i=r}}else if(null!==this.elementName){let r={};if(this.processContent(t,e,i,s)&&i.hasChildNodes()){let l,o,u=i.firstChild,a=this.usesShadowDOM?null:h.createElement("au-content");for(;u;)l=u.nextSibling,"TEMPLATE"===u.tagName&&(o=u.getAttribute("replace-part"))?(r[o]=t.compile(u,e),h.removeNode(u,n),s.partReplacements=r):null!==a&&(3===u.nodeType&&_n(u)?h.removeNode(u,n):a.appendChild(u)),u=l;null!==a&&a.hasChildNodes()&&i.appendChild(a),s.skipContentProcessing=!1}else s.skipContentProcessing=!0}else this.processContent(t,e,i,s)||(s.skipContentProcessing=!0);return i}create(t,e,i,s){let n,r=null;e=e||Nn.normal,i=i||null,s=s||null,null!==this.elementName&&i&&(this.usesShadowDOM?(n=i.attachShadow(this.shadowDOMOptions),t.registerInstance(h.boundary,n)):(n=i,this.targetShadowDOM&&t.registerInstance(h.boundary,n))),null!==i&&(i.au=r=i.au||{});let l,o=e.viewModel||t.get(this.target),u=new Or(this,e,o,t),a=this.childBindings;if(this.liftsContent)r.controller=u;else if(null!==this.elementName){if(l=e.viewFactory||this.viewFactory,t.viewModel=o,l&&(u.view=l.create(t,e,i)),null!==i){if(r.controller=u,u.view){if(!this.usesShadowDOM&&(1===i.childNodes.length||i.contentElement)){let t=i.childNodes[0]||i.contentElement;u.view.contentView={fragment:t},t.parentNode&&h.removeNode(t)}if(e.anchorIsContainer){if(null!==a)for(let t=0,e=a.length;t<e;++t)u.view.addBinding(a[t].create(i,o,u));u.view.appendNodesTo(n)}else u.view.insertNodesBefore(n)}else if(null!==a)for(let t=0,e=a.length;t<e;++t)s.push(a[t].create(i,o,u))}else if(u.view){if(u.view.controller=u,null!==a)for(let t=0,i=a.length;t<i;++t)u.view.addBinding(a[t].create(e.host,o,u))}else if(null!==a)for(let t=0,i=a.length;t<i;++t)s.push(a[t].create(e.host,o,u))}else if(null!==a)for(let t=0,e=a.length;t<e;++t)s.push(a[t].create(i,o,u));return null!==r&&(r[this.htmlName]=u),e.initiatedByBehavior&&l&&u.view.created(),u}Z(t,e){let i,s,n,r;if(!("__propertiesDefined__"in e))for(e.__propertiesDefined__=!0,s=0,n=(i=this.properties).length;s<n;++s)void 0!==(r=i[s].createObserver(t))&&(e[r.propertyName]=r)}it(t,e){let i,s=e;for(;;){let t=Object.getPrototypeOf(e.prototype);if(!(e=t&&t.constructor))return;if(i=j.getOwn(j.resource,e))break}i.initialize(t,e);for(let t=0,e=i.properties.length;t<e;++t){let e=i.properties[t];this.properties.some(t=>t.name===e.name)||new Vr(e).registerWith(s,this)}}};function Lr(t,e){return function(i,s,n){let r="string"==typeof s?i.constructor:i,h=j.getOrCreateOwn(j.resource,Ir,r);"string"==typeof t&&(t={selector:t,name:s}),n&&(n.writable=!0,n.configurable=!0),t.all=e,h.addChildBinding(new Mr(t))}}let Mr=class{constructor(t){this.name=t.name,this.changeHandler=t.changeHandler||this.name+"Changed",this.selector=t.selector,this.all=t.all}create(t,e,i){return new Dr(this.selector,t,this.name,e,i,this.changeHandler,this.all)}};const Br=[];function Fr(t,e,i){let s=t.get(e);s||(s=[],t.set(e,s)),s.push(i)}function Nr(t,e){let i=e.binders,s=i.length,n=new Map;for(let e=0,r=t.length;e<r;++e){let r=t[e],h=r.addedNodes,l=r.removedNodes;for(let t=0,e=l.length;t<e;++t){let e=l[t];if(1===e.nodeType)for(let t=0;t<s;++t){let s=i[t];s.onRemove(e)&&Fr(n,s,r)}}for(let t=0,e=h.length;t<e;++t){let e=h[t];if(1===e.nodeType)for(let t=0;t<s;++t){let s=i[t];s.onAdd(e)&&Fr(n,s,r)}}}n.forEach((t,e)=>{null!==e.changeHandler&&e.viewModel[e.changeHandler](t)})}let Dr=class{constructor(t,e,i,s,n,r,h){this.selector=t,this.viewHost=e,this.property=i,this.viewModel=s,this.controller=n,this.changeHandler=r in s?r:null,this.usesShadowDOM=n.behavior.usesShadowDOM,this.all=h,!this.usesShadowDOM&&n.view&&n.view.contentView?this.contentView=n.view.contentView:this.contentView=null}matches(t){if(t.matches(this.selector)){if(null===this.contentView)return!0;let e=this.contentView,i=t.auAssignedSlot;if(i&&i.projectFromAnchors){let t=i.projectFromAnchors;for(let i=0,s=t.length;i<s;++i)if(t[i].auOwnerView===e)return!0;return!1}return t.auOwnerView===e}return!1}bind(t){let e=this.viewHost,i=this.viewModel,s=e.__childObserver__;if(!s){s=e.__childObserver__=h.createMutationObserver(Nr);let t={childList:!0,subtree:!this.usesShadowDOM};s.observe(e,t),s.binders=[]}if(s.binders.push(this),this.usesShadowDOM){let t=e.firstElementChild;if(this.all){let e=i[this.property];for(e?e.length=0:e=i[this.property]=[];t;)this.matches(t)&&e.push(t.au&&t.au.controller?t.au.controller.viewModel:t),t=t.nextElementSibling;null!==this.changeHandler&&this.viewModel[this.changeHandler](Br)}else for(;t;){if(this.matches(t)){let e=t.au&&t.au.controller?t.au.controller.viewModel:t;this.viewModel[this.property]=e,null!==this.changeHandler&&this.viewModel[this.changeHandler](e);break}t=t.nextElementSibling}}}onRemove(t){if(this.matches(t)){let e=t.au&&t.au.controller?t.au.controller.viewModel:t;if(this.all){let t=this.viewModel[this.property]||(this.viewModel[this.property]=[]),i=t.indexOf(e);return-1!==i&&t.splice(i,1),!0}return!1}return!1}onAdd(t){if(this.matches(t)){let e=t.au&&t.au.controller?t.au.controller.viewModel:t;if(this.all){let i=this.viewModel[this.property]||(this.viewModel[this.property]=[]);if("*"===this.selector)return i.push(e),!0;let s=0,n=t.previousElementSibling;for(;n;)this.matches(n)&&s++,n=n.previousElementSibling;return i.splice(s,0,e),!0}this.viewModel[this.property]=e,null!==this.changeHandler&&this.viewModel[this.changeHandler](e)}return!1}unbind(){this.viewHost.__childObserver__&&(this.viewHost.__childObserver__.disconnect(),this.viewHost.__childObserver__=null)}};function zr(t,e){return Array.isArray(e)?t.removeMany(e,!0):t.remove(e,!0)}const Ur={before:(t,e,i)=>void 0===e?i():i().then(()=>zr(t,e)),with:(t,e,i)=>void 0===e?i():Promise.all([zr(t,e),i()]),after:(t,e,i)=>Promise.resolve(t.removeAll(!0)).then(i)};function Hr(t){return t.skipActivation||"function"!=typeof t.viewModel.activate?Promise.resolve():t.viewModel.activate(t.model)||Promise.resolve()}class Gr{static inject(){return[jr,Jn]}constructor(t,e){this.viewEngine=t,this.viewLocator=e}st(t,e){let i=Ur[t.swapOrder]||Ur.after,s=t.viewSlot.children.slice();return i(t.viewSlot,s,()=>Promise.resolve(t.viewSlot.add(e)).then(()=>{t.currentController&&t.currentController.unbind()})).then(()=>{t.compositionTransactionNotifier&&t.compositionTransactionNotifier.done()})}nt(t){return this.createController(t).then(e=>(e.automate(t.overrideContext,t.owningView),t.compositionTransactionOwnershipToken?t.compositionTransactionOwnershipToken.waitForCompositionComplete().then(()=>this.st(t,e.view)).then(()=>e):this.st(t,e.view).then(()=>e)))}createController(t){let e,i,s,n;return this.ensureViewModel(t).then(Hr).then(()=>{e=t.childContainer,i=t.viewModel,s=t.viewModelResource,n=s.metadata;let r=this.viewLocator.getViewStrategy(t.view||i);return t.viewResources&&r.makeRelativeTo(t.viewResources.viewUrl),n.load(e,s.value,null,r,!0)}).then(s=>n.create(e,Nn.dynamic(t.host,i,s)))}ensureViewModel(t){let e=t.childContainer=t.childContainer||t.container.createChild();if("string"==typeof t.viewModel)return t.viewModel=t.viewResources?t.viewResources.relativeToView(t.viewModel):t.viewModel,this.viewEngine.importViewModelResource(t.viewModel).then(i=>(e.autoRegister(i.value),t.host&&e.registerInstance(h.Element,t.host),t.viewModel=e.viewModel=e.get(i.value),t.viewModelResource=i,t));let i="function"==typeof t.viewModel,s=i?t.viewModel:t.viewModel.constructor,n=j.getOrCreateOwn(j.resource,Ir,s);return n.elementName=n.elementName||"dynamic-element",rr.convention(s,n),n.initialize(i?e:t.container||e,s),t.viewModelResource={metadata:n,value:s},t.host&&e.registerInstance(h.Element,t.host),e.viewModel=t.viewModel=i?e.get(s):t.viewModel,Promise.resolve(t)}compose(t){t.childContainer=t.childContainer||t.container.createChild(),t.view=this.viewLocator.getViewStrategy(t.view);let e=t.childContainer.get(Tn),i=e.tryCapture();return i?t.compositionTransactionOwnershipToken=i:t.compositionTransactionNotifier=e.enlist(),t.viewModel?this.nt(t):t.view?(t.viewResources&&t.view.makeRelativeTo(t.viewResources.viewUrl),t.view.loadViewFactory(this.viewEngine,new Fn).then(e=>{let i=e.create(t.childContainer);return i.bind(t.bindingContext,t.overrideContext),t.compositionTransactionOwnershipToken?t.compositionTransactionOwnershipToken.waitForCompositionComplete().then(()=>this.st(t,i)).then(()=>i):this.st(t,i).then(()=>i)})):t.viewSlot?(t.viewSlot.removeAll(),t.compositionTransactionNotifier&&t.compositionTransactionNotifier.done(),Promise.resolve(null)):Promise.resolve(null)}}class Wr{initialize(t,e){}register(t,e){}load(t,e){let i=new e;t.get(Rs).registerElementConfig(i)}}function Qr(t,e){if(/[A-Z]/.test(t)){let i=Sn(t);return y("templating").warn(`'${t}' is not a valid ${e} name and has been converted to '${i}'. Upper-case letters are not allowed because the DOM is not case-sensitive.`),i}return t}function Yr(t){return function(e){j.getOrCreateOwn(j.resource,Ir,e).elementName=Qr(t,"custom element")}}const Jr={mode:"open"};function Xr(){return!1}function Zr(t){return function(e){j.define(Jn.viewStrategyMetadataKey,t,e)}}function Kr(t){return Zr(new Un(t))}let th=ft(ct,Er,yr,Gr)(Pn=class{constructor(t,e,i,s){this.rt=t,this.ht=e,this.lt=i,this.ot=s,t.registerInstance(jn,jn.instance=new jn)}configureAnimator(t){this.rt.unregister(jn),this.rt.registerInstance(jn,jn.instance=t)}compose(t){return this.ot.compose(t)}enhance(t){t instanceof h.Element&&(t={element:t});let e={},i=t.resources||this.rt.get(rr);this.lt.G(t.element,i,e,t.element.parentNode,"root",!0);let s=new wr(t.element,e,i),n=t.container||this.rt.createChild(),r=s.create(n,Nn.enhance());return r.bind(t.bindingContext||{},t.overrideContext),r.firstChild=r.lastChild=r.fragment,r.fragment=h.createDocumentFragment(),r.attached(),r}})||Pn;var eh,ih,sh;let nh=(ih=eh=class{constructor(t){this.elements=Object.create(null),this.allElements=Object.create(null),this.svg=t,this.registerUniversal("accesskey","accessKey"),this.registerUniversal("contenteditable","contentEditable"),this.registerUniversal("tabindex","tabIndex"),this.registerUniversal("textcontent","textContent"),this.registerUniversal("innerhtml","innerHTML"),this.registerUniversal("scrolltop","scrollTop"),this.registerUniversal("scrollleft","scrollLeft"),this.registerUniversal("readonly","readOnly"),this.register("label","for","htmlFor"),this.register("img","usemap","useMap"),this.register("input","maxlength","maxLength"),this.register("input","minlength","minLength"),this.register("input","formaction","formAction"),this.register("input","formenctype","formEncType"),this.register("input","formmethod","formMethod"),this.register("input","formnovalidate","formNoValidate"),this.register("input","formtarget","formTarget"),this.register("textarea","maxlength","maxLength"),this.register("td","rowspan","rowSpan"),this.register("td","colspan","colSpan"),this.register("th","rowspan","rowSpan"),this.register("th","colspan","colSpan")}register(t,e,i){t=t.toLowerCase(),e=e.toLowerCase(),(this.elements[t]=this.elements[t]||Object.create(null))[e]=i}registerUniversal(t,e){t=t.toLowerCase(),this.allElements[t]=e}map(t,e){if(this.svg.isStandardSvgAttribute(t,e))return e;t=t.toLowerCase(),e=e.toLowerCase();const i=this.elements[t];return void 0!==i&&e in i?i[e]:e in this.allElements?this.allElements[e]:/(?:^data-)|(?:^aria-)|:/.test(e)?e:Ut(e)}},eh.inject=[Js],ih),rh=class{constructor(t,e,i,s,n,r){this.observerLocator=t,this.targetProperty=e,this.parts=i,this.mode=s,this.lookupFunctions=n,this.attribute=this.attrToRemove=r,this.discrete=!1}createBinding(t){return 3===this.parts.length?new oh(t,this.observerLocator,this.parts[1],this.mode,this.lookupFunctions,this.targetProperty,this.parts[0],this.parts[2]):new lh(this.observerLocator,this.parts,t,this.targetProperty,this.mode,this.lookupFunctions)}};function hh(t,e){if("style"===e)y("templating-binding").info('Internet Explorer does not support interpolation in "style" attributes.  Use the style attribute\'s alias, "css" instead.');else if(t.parentElement&&"TEXTAREA"===t.parentElement.nodeName&&"textContent"===e)throw new Error('Interpolation binding cannot be used in the content of a textarea element.  Use <textarea value.bind="expression"></textarea> instead.')}let lh=class{constructor(t,e,i,s,n,r){hh(i,s),this.observerLocator=t,this.parts=e,this.target=i,this.targetProperty=s,this.targetAccessor=t.getAccessor(i,s),this.mode=n,this.lookupFunctions=r}interpolate(){if(this.isBound){let t="",e=this.parts;for(let i=0,s=e.length;i<s;i++)t+=i%2==0?e[i]:this[`childBinding${i}`].value;this.targetAccessor.setValue(t,this.target,this.targetProperty)}}updateOneTimeBindings(){for(let t=1,e=this.parts.length;t<e;t+=2){let e=this[`childBinding${t}`];e.mode===ri.oneTime&&e.call()}}bind(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.source=t;let e=this.parts;for(let i=1,s=e.length;i<s;i+=2){let s=new oh(this,this.observerLocator,e[i],this.mode,this.lookupFunctions);s.bind(t),this[`childBinding${i}`]=s}this.isBound=!0,this.interpolate()}unbind(){if(!this.isBound)return;this.isBound=!1,this.source=null;for(let t=1,e=this.parts.length;t<e;t+=2){this[`childBinding${t}`].unbind()}}},oh=Kt()(sh=class{constructor(t,e,i,s,n,r,h,l){t instanceof lh?this.parent=t:(hh(t,r),this.target=t,this.targetProperty=r,this.targetAccessor=e.getAccessor(t,r)),this.observerLocator=e,this.sourceExpression=i,this.mode=s,this.lookupFunctions=n,this.left=h,this.right=l}updateTarget(t){(t=null==t?"":t.toString())!==this.value&&(this.value=t,this.parent?this.parent.interpolate():this.targetAccessor.setValue(this.left+t+this.right,this.target,this.targetProperty))}call(){this.isBound&&(this.rawValue=this.sourceExpression.evaluate(this.source,this.lookupFunctions),this.updateTarget(this.rawValue),this.mode!==ri.oneTime&&(this.m++,this.sourceExpression.connect(this,this.source),this.rawValue instanceof Array&&this.observeArray(this.rawValue),this.unobserve(!1)))}bind(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t;let e=this.sourceExpression;e.bind&&e.bind(this,t,this.lookupFunctions),this.rawValue=e.evaluate(t,this.lookupFunctions),this.updateTarget(this.rawValue),this.mode===ri.oneWay&&oe(this)}unbind(){if(!this.isBound)return;this.isBound=!1;let t=this.sourceExpression;t.unbind&&t.unbind(this,this.source),this.source=null,this.value=null,this.rawValue=null,this.unobserve(!0)}connect(t){this.isBound&&(t&&(this.rawValue=this.sourceExpression.evaluate(this.source,this.lookupFunctions),this.updateTarget(this.rawValue)),this.sourceExpression.connect(this,this.source),this.rawValue instanceof Array&&this.observeArray(this.rawValue))}})||sh;class uh{static inject(){return[fs,Xs,Rs,nh]}constructor(t,e,i,s){this.parser=t,this.observerLocator=e,this.eventManager=i,this.attributeMap=s}interpret(t,e,i,s,n){return i.command in this?this[i.command](t,e,i,s,n):this.handleUnknownCommand(t,e,i,s,n)}handleUnknownCommand(t,e,i,s,n){return y("templating-binding").warn("Unknown binding command.",i),s}determineDefaultBindingMode(t,e,i){let s=t.tagName.toLowerCase();return"input"===s&&("value"===e||"files"===e)&&"checkbox"!==t.type&&"radio"!==t.type||"input"===s&&"checked"===e&&("checkbox"===t.type||"radio"===t.type)||("textarea"===s||"select"===s)&&"value"===e||("textcontent"===e||"innerhtml"===e)&&"true"===t.contentEditable||"scrolltop"===e||"scrollleft"===e?ri.twoWay:i&&e in i.attributes&&i.attributes[e]&&i.attributes[e].defaultBindingMode>=ri.oneTime?i.attributes[e].defaultBindingMode:ri.oneWay}bind(t,e,i,s,n){let r=s||Nn.attribute(i.attrName);return r.attributes[i.attrName]=new Zs(this.observerLocator,this.attributeMap.map(e.tagName,i.attrName),this.parser.parse(i.attrValue),void 0===i.defaultBindingMode||null===i.defaultBindingMode?this.determineDefaultBindingMode(e,i.attrName,n):i.defaultBindingMode,t.lookupFunctions),r}trigger(t,e,i){return new rn(this.eventManager,i.attrName,this.parser.parse(i.attrValue),Es.none,!0,t.lookupFunctions)}capture(t,e,i){return new rn(this.eventManager,i.attrName,this.parser.parse(i.attrValue),Es.capturing,!0,t.lookupFunctions)}delegate(t,e,i){return new rn(this.eventManager,i.attrName,this.parser.parse(i.attrValue),Es.bubbling,!0,t.lookupFunctions)}call(t,e,i,s){let n=s||Nn.attribute(i.attrName);return n.attributes[i.attrName]=new tn(this.observerLocator,i.attrName,this.parser.parse(i.attrValue),t.lookupFunctions),n}options(t,e,i,s,n){let r,h,l,o=s||Nn.attribute(i.attrName),u=i.attrValue,a=this.language,c=null,f="",d=!1,m=!1,p=!1;for(h=0,l=u.length;h<l;++h){if(";"!==(r=u[h])||d)if(":"===r&&null===c)p=!0,c=f.trim(),f="";else{if("\\"===r){f+=r,m=!0;continue}f+=r,null!==c&&!1===m&&"'"===r&&(d=!d)}else p||(c=this.ut(t,n)),i=a.inspectAttribute(t,"?",c,f.trim()),a.createAttributeInstruction(t,e,i,o,n),o.attributes[i.attrName]||(o.attributes[i.attrName]=i.attrValue),f="",c=null;m=!1}return p||(c=this.ut(t,n)),null!==c&&(i=a.inspectAttribute(t,"?",c,f.trim()),a.createAttributeInstruction(t,e,i,o,n),o.attributes[i.attrName]||(o.attributes[i.attrName]=i.attrValue)),o}ut(t,e){let i=t.getAttribute(e.attributeName);return i&&i.primaryProperty?i.primaryProperty.name:null}for(t,e,i,s){let n,r,h,l,o;if(2!==(n=(o=(l=i.attrValue).match(/^ *[[].+[\]]/))?l.split("of "):l.split(" of ")).length)throw new Error('Incorrect syntax for "for". The form is: "$local of $items" or "[$key, $value] of $items".');return h=s||Nn.attribute(i.attrName),o?(r=n[0].replace(/[[\]]/g,"").replace(/,/g," ").replace(/\s+/g," ").trim().split(" "),h.attributes.key=r[0],h.attributes.value=r[1]):h.attributes.local=n[0],h.attributes.items=new Zs(this.observerLocator,"items",this.parser.parse(n[1]),ri.oneWay,t.lookupFunctions),h}"two-way"(t,e,i,s){let n=s||Nn.attribute(i.attrName);return n.attributes[i.attrName]=new Zs(this.observerLocator,this.attributeMap.map(e.tagName,i.attrName),this.parser.parse(i.attrValue),ri.twoWay,t.lookupFunctions),n}"to-view"(t,e,i,s){let n=s||Nn.attribute(i.attrName);return n.attributes[i.attrName]=new Zs(this.observerLocator,this.attributeMap.map(e.tagName,i.attrName),this.parser.parse(i.attrValue),ri.toView,t.lookupFunctions),n}"from-view"(t,e,i,s){let n=s||Nn.attribute(i.attrName);return n.attributes[i.attrName]=new Zs(this.observerLocator,this.attributeMap.map(e.tagName,i.attrName),this.parser.parse(i.attrValue),ri.fromView,t.lookupFunctions),n}"one-time"(t,e,i,s){let n=s||Nn.attribute(i.attrName);return n.attributes[i.attrName]=new Zs(this.observerLocator,this.attributeMap.map(e.tagName,i.attrName),this.parser.parse(i.attrValue),ri.oneTime,t.lookupFunctions),n}}uh.prototype["one-way"]=uh.prototype["to-view"];let ah={};class ch extends Zn{static inject(){return[fs,Xs,uh,nh]}constructor(t,e,i,s){super(),this.parser=t,this.observerLocator=e,this.syntaxInterpreter=i,this.emptyStringExpression=this.parser.parse("''"),i.language=this,this.attributeMap=s}inspectAttribute(t,e,i,s){let n=i.split(".");if(ah.defaultBindingMode=null,2===n.length)ah.attrName=n[0].trim(),ah.attrValue=s,ah.command=n[1].trim(),"ref"===ah.command?(ah.expression=new on(this.parser.parse(s),ah.attrName,t.lookupFunctions),ah.command=null,ah.attrName="ref"):ah.expression=null;else if("ref"===i)ah.attrName=i,ah.attrValue=s,ah.command=null,ah.expression=new on(this.parser.parse(s),"element",t.lookupFunctions);else{ah.attrName=i,ah.attrValue=s,ah.command=null;const n=this.parseInterpolation(t,s);ah.expression=null===n?null:new rh(this.observerLocator,this.attributeMap.map(e,i),n,ri.oneWay,t.lookupFunctions,i)}return ah}createAttributeInstruction(t,e,i,s,n){let r;if(i.expression){if("ref"===i.attrName)return i.expression;(r=s||Nn.attribute(i.attrName)).attributes[i.attrName]=i.expression}else i.command&&(r=this.syntaxInterpreter.interpret(t,e,i,s,n));return r}inspectTextContent(t,e){const i=this.parseInterpolation(t,e);return null===i?null:new rh(this.observerLocator,"textContent",i,ri.oneWay,t.lookupFunctions,"textContent")}parseInterpolation(t,e){let i,s,n,r=e.indexOf("${",0),h=e.length,l=0,o=0,u=null,a=0;for(;r>=0&&r<h-2;){o=1,s=r,r+=2;do{i=e[r],r++,"'"!==i&&'"'!==i?"\\"!==i?null===u&&("{"===i?o++:"}"===i&&o--):r++:null===u?u=i:u===i&&(u=null)}while(o>0&&r<h);if(0!==o)break;n=n||[],"\\"===e[s-1]&&"\\"!==e[s-2]?(n[a]=e.substring(l,s-1)+e.substring(s,r),n[++a]=this.emptyStringExpression,a++):(n[a]=e.substring(l,s),n[++a]=this.parser.parse(e.substring(s+2,r-1)),a++),l=r,r=e.indexOf("${",r)}return 0===a?null:(n[a]=e.substr(l),n)}}let fh={H:"element",at:"attribute",ct:"bindingBehavior",ft:"valueConverter"};class dh{static inject(){return[gr,lr]}static resource(){return{type:"attribute",name:"with",templateController:!0}}constructor(t,e){this.viewFactory=t,this.viewSlot=e,this.parentOverrideContext=null,this.view=null}bind(t,e){this.parentOverrideContext=e,this.valueChanged(this.value)}valueChanged(t){let e=Ht(t,this.parentOverrideContext);this.view?this.view.bind(t,e):(this.view=this.viewFactory.create(),this.view.bind(t,e),this.viewSlot.add(this.view))}unbind(){this.parentOverrideContext=null,this.view&&this.view.unbind()}}const mh="The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">",ph="The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.";class gh{static resource(){return{type:fh.ct,name:"updateTrigger"}}bind(t,e,...i){if(0===i.length)throw new Error(mh);if(t.mode!==ri.twoWay&&t.mode!==ri.fromView)throw new Error(ph);let s=t.observerLocator.getObserver(t.target,t.targetProperty);if(!s.handler)throw new Error(ph);t.targetObserver=s,s.originalHandler=t.targetObserver.handler;let n=new EventSubscriber(i);s.handler=n}unbind(t,e){t.targetObserver.handler.dispose(),t.targetObserver.handler=t.targetObserver.originalHandler,t.targetObserver.originalHandler=null}}function wh(t){let e=this.throttleState,i=+new Date-e.last;if(i>=e.delay)return clearTimeout(e.timeoutId),e.timeoutId=null,e.last=+new Date,void this.throttledMethod(t);e.newValue=t,null===e.timeoutId&&(e.timeoutId=setTimeout(()=>{e.timeoutId=null,e.last=+new Date,this.throttledMethod(e.newValue)},e.delay-i))}class vh{static resource(){return{type:fh.ct,name:"throttle"}}bind(t,e,i=200){let s="updateTarget";t.callSource?s="callSource":t.updateSource&&t.mode===ri.twoWay&&(s="updateSource"),t.throttledMethod=t[s],t.throttledMethod.originalName=s,t[s]=wh,t.throttleState={delay:i,last:0,timeoutId:null}}unbind(t,e){t[t.throttledMethod.originalName]=t.throttledMethod,t.throttledMethod=null,clearTimeout(t.throttleState.timeoutId),t.throttleState=null}}function bh(t){let e=function(t){return t.path&&t.path[0]||t.deepPath&&t.deepPath[0]||t.target}(t);this.target===e&&this.selfEventCallSource(t)}class xh{static resource(){return{type:fh.ct,name:"self"}}bind(t,e){if(!t.callSource||!t.targetEvent)throw new Error("Self binding behavior only supports event.");t.selfEventCallSource=t.callSource,t.callSource=bh}unbind(t,e){t.callSource=t.selfEventCallSource,t.selfEventCallSource=null}}class yh{static inject(){return[gr,lr]}static resource(){return{type:fh.at,name:"replaceable",templateController:!0}}constructor(t,e){this.viewFactory=t,this.viewSlot=e,this.view=null}bind(t,e){null===this.view&&(this.view=this.viewFactory.create(),this.viewSlot.add(this.view)),this.view.bind(t,e)}unbind(){this.view.unbind()}}const kh=ri.oneTime;function Ch(t,e){let i=t.length;for(e>0&&(e-=1);e<i;++e)Rh(t[e].overrideContext,e,i)}function Eh(t,e,i,s,n){let r={},h=Ht(r,t.scope.overrideContext);return void 0!==n?(r[t.key]=n,r[t.value]=e):r[t.local]=e,Rh(h,i,s),h}function Rh(t,e,i){let s=0===e,n=e===i-1,r=e%2==0;t.$index=e,t.$first=s,t.$last=n,t.$middle=!(s||n),t.$odd=!r,t.$even=r}function Ah(t){t.call&&t.mode===kh?t.call(Dt):t.updateOneTimeBindings&&t.updateOneTimeBindings()}function Ph(t,e,i,s){if(!i)return t.indexOf(e);const n=t.length;for(let r=s||0;r<n;r++)if(i(t[r],e))return r;return-1}class jh{instanceChanged(t,e){t.removeAllViews(!0)}getCollectionObserver(t,e){}}class Oh{constructor(t,e){this.viewFactory=t,this.viewSlot=e,this.view=null,this.bindingContext=null,this.overrideContext=null,this.showing=!1}bind(t,e){this.bindingContext=t,this.overrideContext=e}unbind(){null!==this.view&&(this.view.unbind(),this.viewFactory.isCaching&&(this.showing?(this.showing=!1,this.viewSlot.remove(this.view,!0,!0)):this.view.returnToCache(),this.view=null))}dt(){if(!this.showing)return null===this.view&&(this.view=this.viewFactory.create()),this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext),this.showing=!0,this.viewSlot.add(this.view);this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext)}mt(){if(!this.showing)return;this.showing=!1;let t=this.viewSlot.remove(this.view);if(t instanceof Promise)return t.then(()=>this.view.unbind());this.view.unbind()}}class $h{static inject(){return[h.Element,At]}static resource(){return{type:fh.at,name:"focus",attributeDefaultBindingMode:ri.twoWay}}constructor(t,e){this.element=t,this.taskQueue=e,this.isAttached=!1,this.needsApply=!1}valueChanged(t){this.isAttached?this.pt():this.needsApply=!0}pt(){this.value?this.taskQueue.queueMicroTask(()=>{this.value&&this.element.focus()}):this.element.blur()}attached(){this.isAttached=!0,this.needsApply&&(this.needsApply=!1,this.pt()),this.element.addEventListener("focus",this),this.element.addEventListener("blur",this)}detached(){this.isAttached=!1,this.element.removeEventListener("focus",this),this.element.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:h.activeElement!==this.element&&(this.value=!1)}}const Th={};function Vh(t){const e=this.debounceState;clearTimeout(e.timeoutId),e.timeoutId=setTimeout(()=>this.debouncedMethod(t),e.delay)}function qh(t,e,i){const s=this.debounceState;if(clearTimeout(s.timeoutId),t!==s.callContextToDebounce)return s.oldValue=Th,void this.debouncedMethod(t,e,i);s.oldValue===Th&&(s.oldValue=i),s.timeoutId=setTimeout(()=>{const i=s.oldValue;s.oldValue=Th,this.debouncedMethod(t,e,i)},s.delay)}class Sh{static resource(){return{type:fh.ct,name:"debounce"}}bind(t,e,i=200){const s=void 0!==t.callSource,n=s?"callSource":"call",r=s?Vh:qh,h=t.mode,l=h===ri.twoWay||h===ri.fromView?Nt:Dt;t.debouncedMethod=t[n],t.debouncedMethod.originalName=n,t[n]=r,t.debounceState={callContextToDebounce:l,delay:i,timeoutId:0,oldValue:Th}}unbind(t,e){t[t.debouncedMethod.originalName]=t.debouncedMethod,t.debouncedMethod=null,clearTimeout(t.debounceState.timeoutId),t.debounceState=null}}const _h=y("templating-resources");class Ih{static inject(){return[h.Element,ct,Gr,lr,rr,At]}static resource(){return{type:fh.H,name:"compose",bindables:["model","view","viewModel","swapOrder"]}}static view(){return null}constructor(t,e,i,s,n,r){this.element=t,this.container=e,this.compositionEngine=i,this.viewSlot=s,this.viewResources=n,this.taskQueue=r,this.currentController=null,this.currentViewModel=null,this.changes=Object.create(null)}created(t){this.owningView=t}bind(t,e){this.bindingContext=t,this.overrideContext=e,this.changes.view=this.view,this.changes.viewModel=this.viewModel,this.changes.model=this.model,Lh(this)}unbind(){this.changes=Object.create(null),this.pendingTask=null,this.bindingContext=null,this.overrideContext=null;this.viewSlot.removeAll(!0,!0)}modelChanged(t,e){this.changes.model=t,Mh(this)}viewChanged(t,e){this.changes.view=t,Mh(this)}viewModelChanged(t,e){this.changes.viewModel=t,Mh(this)}}function Lh(t){const e=t.changes;if(t.changes=Object.create(null),"view"in e||"viewModel"in e||!("model"in e)){let i={view:t.view,viewModel:t.currentViewModel||t.viewModel,model:t.model};i=Object.assign(i,e),i=function(t,e){return Object.assign(e,{bindingContext:t.bindingContext,overrideContext:t.overrideContext,owningView:t.owningView,container:t.container,viewSlot:t.viewSlot,viewResources:t.viewResources,currentController:t.currentController,host:t.element,swapOrder:t.swapOrder})}(t,i),t.pendingTask=t.compositionEngine.compose(i).then(e=>{t.currentController=e,t.currentViewModel=e?e.viewModel:null})}else if(t.pendingTask=function(t,e){if(t&&"function"==typeof t.activate)return Promise.resolve(t.activate(e))}(t.currentViewModel,e.model),!t.pendingTask)return;t.pendingTask=t.pendingTask.catch(t=>{_h.error(t)}).then(()=>{t.pendingTask&&(t.pendingTask=null,function(t){for(const e in t)return!1;return!0}(t.changes)||Lh(t))})}function Mh(t){t.pendingTask||t.updateRequested||(t.updateRequested=!0,t.taskQueue.queueMicroTask(()=>{t.updateRequested=!1,Lh(t)}))}class Bh{constructor(){this.signals={}}signal(t){let e=this.signals[t];if(!e)return;let i=e.length;for(;i--;)e[i].call(Dt)}}let Fh={bind(t,e,i){t.originalMode=t.mode,t.mode=this.mode},unbind(t,e){t.mode=t.originalMode,t.originalMode=null}};class Nh{static resource(){return{type:fh.ct,name:"oneTime"}}constructor(){this.mode=ri.oneTime}}V(Fh)(Nh);class Dh{static resource(){return{type:fh.ct,name:"oneWay"}}constructor(){this.mode=ri.oneWay}}V(Fh)(Dh);class zh{static resource(){return{type:fh.ct,name:"twoWay"}}constructor(){this.mode=ri.twoWay}}V(Fh)(zh);class Uh{static resource(){return{type:fh.ct,name:"fromView"}}constructor(){this.mode=ri.fromView}}V(Fh)(Uh);const Hh="aurelia-hide",Gh=`.${Hh} { display:none !important; }`;function Wh(t){n.shadowDOM&&t&&!t.hasAureliaHideStyle&&(t.hasAureliaHideStyle=!0,h.injectStyles(Gh,t))}class Qh{static resource(){return{type:fh.ct,name:"attr"}}bind(t,e){t.targetObserver=new Ss(t.target,t.targetProperty)}unbind(t,e){}}const Yh=["focus","if","else","repeat","show","hide","with"];function Jh(t){let e=t.type,i=null!==e.elementName?e.elementName:e.attributeName;return-1===Yh.indexOf(i)&&(e.handlesAttached||e.handlesBind||e.handlesCreated||e.handlesDetached||e.handlesUnbind)||e.viewFactory&&Zh(e.viewFactory)||t.viewFactory&&Zh(t.viewFactory)}function Xh(t){let e=t.behaviorInstructions;if(e){let t=e.length;for(;t--;)if(Jh(e[t]))return!0}return t.viewFactory&&Zh(t.viewFactory)}function Zh(t){if("__viewsRequireLifecycle"in t)return t.__viewsRequireLifecycle;if(t.__viewsRequireLifecycle=!1,t.viewFactory)return t.__viewsRequireLifecycle=Zh(t.viewFactory),t.__viewsRequireLifecycle;if(t.template.querySelector(".au-animate"))return t.__viewsRequireLifecycle=!0,!0;for(let e in t.instructions)if(Xh(t.instructions[e]))return t.__viewsRequireLifecycle=!0,!0;return t.__viewsRequireLifecycle=!1,!1}class Kh{constructor(t){Object.assign(this,{local:"items",viewsRequireLifecycle:!0},t)}viewCount(){throw new Error("subclass must implement `viewCount`")}views(){throw new Error("subclass must implement `views`")}view(t){throw new Error("subclass must implement `view`")}matcher(){throw new Error("subclass must implement `matcher`")}addView(t,e){throw new Error("subclass must implement `addView`")}insertView(t,e,i){throw new Error("subclass must implement `insertView`")}moveView(t,e){throw new Error("subclass must implement `moveView`")}removeAllViews(t,e){throw new Error("subclass must implement `removeAllViews`")}removeViews(t,e,i){throw new Error("subclass must implement `removeView`")}removeView(t,e,i){throw new Error("subclass must implement `removeView`")}updateBindings(t){throw new Error("subclass must implement `updateBindings`")}}class tl{getCollectionObserver(t,e){return t.getArrayObserver(e)}instanceChanged(t,e){const i=e.length;if(!e||0===i)return void t.removeAllViews(!0,!t.viewsRequireLifecycle);const s=t.views(),n=s.length;if(0!==n)if(t.viewsRequireLifecycle){const r=s.slice(0),h=t.local,l=t.matcher();let o=[];const u=[];for(let t=0;t<n;t++){const i=r[t],s=i.bindingContext[h];-1===Ph(e,s,l)?u.push(i):o.push(s)}let a,c;o.length>0?(c=t.removeViews(u,!0,!t.viewsRequireLifecycle),a=(()=>{for(let n=0;n<i;n++){const r=e[n],h=Ph(o,r,l,n);let u;if(-1===h){const s=Eh(t,e[n],n,i);t.insertView(n,s.bindingContext,s),o.splice(n,0,void 0)}else h===n?(u=s[h],o[h]=void 0):(u=s[h],t.moveView(h,n),o.splice(h,1),o.splice(n,0,void 0));u&&Rh(u.overrideContext,n,i)}this.gt(t,e)})):(c=t.removeAllViews(!0,!t.viewsRequireLifecycle),a=(()=>this.wt(t,e))),c instanceof Promise?c.then(a):a()}else this.gt(t,e);else this.wt(t,e)}wt(t,e){for(let i=0,s=e.length;i<s;i++){let n=Eh(t,e[i],i,s);t.addView(n.bindingContext,n)}}gt(t,e){let i=e.length,s=t.viewCount();for(;s>i;)s--,t.removeView(s,!0,!t.viewsRequireLifecycle);let n=t.local;for(let r=0;r<s;r++){let s=t.view(r),h=r===i-1,l=0!==r&&!h;s.bindingContext[n]===e[r]&&s.overrideContext.$middle===l&&s.overrideContext.$last===h||(s.bindingContext[n]=e[r],s.overrideContext.$middle=l,s.overrideContext.$last=h,t.updateBindings(s))}for(let n=s;n<i;n++){let s=Eh(t,e[n],n,i);t.addView(s.bindingContext,s)}}instanceMutated(t,e,i){if(t.__queuedSplices){for(let e=0,s=i.length;e<s;++e){let{index:s,removed:n,addedCount:r}=i[e];Ee(t.__queuedSplices,s,n,r)}return void(t.__array=e.slice(0))}let s=this.vt(t,e.slice(0),i);if(s instanceof Promise){let e=t.__queuedSplices=[],i=()=>{if(!e.length)return t.__queuedSplices=void 0,void(t.__array=void 0);let s=this.vt(t,t.__array,e)||Promise.resolve();e=t.__queuedSplices=[],s.then(i)};s.then(i)}}vt(t,e,i){let s=0,n=[];for(let e=0,r=i.length;e<r;++e){let r=i[e];for(let e=0,i=r.removed.length;e<i;++e){let e=t.removeView(r.index+s+n.length,!0);e instanceof Promise&&n.push(e)}s-=r.addedCount}if(n.length>0)return Promise.all(n).then(()=>{let s=this.bt(t,e,i);Ch(t.views(),s)});let r=this.bt(t,e,i);Ch(t.views(),r)}bt(t,e,i){let s,n,r=e.length;for(let h=0,l=i.length;h<l;++h){let l=i[h],o=s=l.index,u=l.index+l.addedCount;for((null==n||n>l.index)&&(n=s);o<u;++o){let i=Eh(t,e[o],o,r);t.insertView(o,i.bindingContext,i)}}return n}}class el{getCollectionObserver(t,e){return t.getMapObserver(e)}instanceChanged(t,e){let i=t.removeAllViews(!0,!t.viewsRequireLifecycle);i instanceof Promise?i.then(()=>this.xt(t,e)):this.xt(t,e)}xt(t,e){let i,s=0;e.forEach((n,r)=>{i=Eh(t,n,s,e.size,r),t.addView(i.bindingContext,i),++s})}instanceMutated(t,e,i){let s,n,r,h,l,o,u,a,c=[];for(n=0,r=i.length;n<r;++n)switch(s=(u=i[n]).key,u.type){case"update":l=this.yt(t,s),(a=t.removeView(l,!0,!t.viewsRequireLifecycle))instanceof Promise&&c.push(a),h=Eh(t,e.get(s),l,e.size,s),t.insertView(l,h.bindingContext,h);break;case"add":o=t.viewCount()<=e.size-1?t.viewCount():e.size-1,h=Eh(t,e.get(s),o,e.size,s),t.insertView(e.size-1,h.bindingContext,h);break;case"delete":if(void 0===u.oldValue)return;l=this.yt(t,s),(a=t.removeView(l,!0,!t.viewsRequireLifecycle))instanceof Promise&&c.push(a);break;case"clear":t.removeAllViews(!0,!t.viewsRequireLifecycle);break;default:continue}c.length>0?Promise.all(c).then(()=>{Ch(t.views(),0)}):Ch(t.views(),0)}yt(t,e){let i,s,n;for(i=0,s=t.viewCount();i<s;++i)if((n=t.view(i)).bindingContext[t.key]===e)return i}}class il{getCollectionObserver(){return null}instanceChanged(t,e){let i=t.removeAllViews(!0,!t.viewsRequireLifecycle);i instanceof Promise?i.then(()=>this.xt(t,e)):this.xt(t,e)}xt(t,e){let i,s,n,r,h=t.viewCount();if((r=h-(e=Math.floor(e)))>0)for(r>h&&(r=h),i=0,s=r;i<s;++i)t.removeView(h-(i+1),!0,!t.viewsRequireLifecycle);else{for(i=h,s=e;i<s;++i)n=Eh(t,i,i,s),t.addView(n.bindingContext,n);Ch(t.views(),0)}}}class sl{getCollectionObserver(t,e){return t.getSetObserver(e)}instanceChanged(t,e){let i=t.removeAllViews(!0,!t.viewsRequireLifecycle);i instanceof Promise?i.then(()=>this.xt(t,e)):this.xt(t,e)}xt(t,e){let i,s=0;e.forEach(n=>{i=Eh(t,n,s,e.size),t.addView(i.bindingContext,i),++s})}instanceMutated(t,e,i){let s,n,r,h,l,o,u,a=[];for(n=0,r=i.length;n<r;++n)switch(s=(o=i[n]).value,o.type){case"add":let r=Math.max(e.size-1,0);h=Eh(t,s,r,e.size),t.insertView(r,h.bindingContext,h);break;case"delete":l=this.kt(t,s),(u=t.removeView(l,!0,!t.viewsRequireLifecycle))instanceof Promise&&a.push(u);break;case"clear":t.removeAllViews(!0,!t.viewsRequireLifecycle);break;default:continue}a.length>0?Promise.all(a).then(()=>{Ch(t.views(),0)}):Ch(t.views(),0)}kt(t,e){let i,s,n;for(i=0,s=t.viewCount();i<s;++i)if((n=t.view(i)).bindingContext[t.local]===e)return i}}class nl extends Oh{static inject(){return[gr,lr]}static resource(){return{type:fh.at,name:"else"}}static view(){return null}constructor(t,e){super(t,e),this.Ct()}bind(t,e){super.bind(t,e),this.ifVm.condition?this.mt():this.dt()}Ct(){let t=this.viewSlot.anchor.previousSibling;for(;t&&!t.au;)t=t.previousSibling;if(!t||!t.au.if)throw new Error("Can't find matching If for Else custom attribute.");this.ifVm=t.au.if.viewModel,this.ifVm.elseVm=this}}class rl extends Oh{static inject(){return[gr,lr]}static resource(){return{type:fh.at,name:"if",bindables:[{name:"condition",primaryProperty:!0},"swapOrder"]}}static view(){return null}bind(t,e){super.bind(t,e),this.condition?this.dt():this.mt()}conditionChanged(t){this.Et(t)}Et(t){if(this.animating)return;let e;(e=this.elseVm?t?this.st(this.elseVm,this):this.st(this,this.elseVm):t?this.dt():this.mt())&&(this.animating=!0,e.then(()=>{this.animating=!1,this.condition!==this.showing&&this.Et(this.condition)}))}st(t,e){switch(this.swapOrder){case"before":return Promise.resolve(e.dt()).then(()=>t.mt());case"with":return Promise.all([t.mt(),e.dt()]);default:let i=t.mt();return i?i.then(()=>e.dt()):e.dt()}}}function hl(t){h.injectStyles(Gh),t.globalResources([Ih,rl,"undefined"==typeof AU_ELSE?nl:null,dh,cl,ul,ol,yh,$h,null,Nh,null,zh,Uh,xh,vh,Sh,ll,Qh,gh].filter(Boolean))}class ll{static inject(){return[Bh]}static resource(){return{type:fh.ct,name:"signal"}}constructor(t){this.signals=t.signals}bind(t,e){if(!t.updateTarget)throw new Error("Only property bindings and string interpolation bindings can be signaled.  Trigger, delegate and call bindings cannot be signaled.");if(3===arguments.length){let e=arguments[2];(this.signals[e]||(this.signals[e]=[])).push(t),t.signalName=e}else{if(!(arguments.length>3))throw new Error("Signal name is required.");{let e=Array.prototype.slice.call(arguments,2),i=e.length;for(;i--;){let s=e[i];(this.signals[s]||(this.signals[s]=[])).push(t)}t.signalName=e}}}unbind(t,e){let i=t.signalName;if(t.signalName=null,Array.isArray(i)){let e=i,s=e.length;for(;s--;){let i=e[s],n=this.signals[i];n.splice(n.indexOf(t),1)}}else{let e=this.signals[i];e.splice(e.indexOf(t),1)}}}class ol{static inject(){return[h.Element,jn,Y.of(h.boundary,!0)]}static resource(){return{type:fh.at,name:"hide"}}constructor(t,e,i){this.element=t,this.animator=e,this.domBoundary=i}created(){Wh(this.domBoundary)}valueChanged(t){t?this.animator.addClass(this.element,Hh):this.animator.removeClass(this.element,Hh)}bind(t){this.valueChanged(this.value)}}class ul{static inject(){return[h.Element,jn,Y.of(h.boundary,!0)]}static resource(){return{type:fh.at,name:"show"}}constructor(t,e,i){this.element=t,this.animator=e,this.domBoundary=i}created(){Wh(this.domBoundary)}valueChanged(t){t?this.animator.removeClass(this.element,Hh):this.animator.addClass(this.element,Hh)}bind(t){this.valueChanged(this.value)}}class al{constructor(){this.matchers=[],this.strategies=[],this.addStrategy(t=>null==t,new jh),this.addStrategy(t=>t instanceof Array,new tl),this.addStrategy(t=>t instanceof Map,new el),this.addStrategy(t=>t instanceof Set,new sl),this.addStrategy(t=>"number"==typeof t,new il)}addStrategy(t,e){this.matchers.push(t),this.strategies.push(e)}getStrategy(t){let e=this.matchers;for(let i=0,s=e.length;i<s;++i)if(e[i](t))return this.strategies[i];return null}}class cl extends Kh{static inject(){return[gr,Dn,lr,rr,Xs,al]}static resource(){return{type:fh.at,name:"repeat",templateController:!0,bindables:["items","local","key","value"]}}constructor(t,e,i,s,n,r){super({local:"item",viewsRequireLifecycle:Zh(t)}),this.viewFactory=t,this.instruction=e,this.viewSlot=i,this.lookupFunctions=s.lookupFunctions,this.observerLocator=n,this.key="key",this.value="value",this.strategyLocator=r,this.ignoreMutation=!1,this.sourceExpression=function(t,e){return t.behaviorInstructions.filter(t=>t.originalAttrName===e)[0].attributes.items.sourceExpression}(this.instruction,"repeat.for"),this.isOneTime=function(t){for(;t instanceof Fe;){if("oneTime"===t.name)return!0;t=t.expression}return!1}(this.sourceExpression),this.viewsRequireLifecycle=Zh(t)}call(t,e){this[t](this.items,e)}bind(t,e){this.scope={bindingContext:t,overrideContext:e},this.matcherBinding=this.Rt(),this.itemsChanged()}unbind(){this.scope=null,this.items=null,this.matcherBinding=null,this.viewSlot.removeAll(!0,!0),this.At()}At(){this.collectionObserver&&(this.collectionObserver.unsubscribe(this.callContext,this),this.collectionObserver=null,this.callContext=null)}itemsChanged(){if(this.At(),!this.scope)return;let t=this.items;if(this.strategy=this.strategyLocator.getStrategy(t),!this.strategy)throw new Error(`Value for '${this.sourceExpression}' is non-repeatable`);this.isOneTime||this.Pt()||this.jt(),this.strategy.instanceChanged(this,t)}Ot(){let t=function(t){let e=!1;for(;t instanceof Fe;)t=t.expression;for(;t instanceof Ne;)t=t.expression,e=!0;return e?t:null}(this.sourceExpression);return t?t.evaluate(this.scope,null):null}handleCollectionMutated(t,e){this.collectionObserver&&this.strategy.instanceMutated(this,t,e)}handleInnerCollectionMutated(t,e){if(!this.collectionObserver)return;if(this.ignoreMutation)return;this.ignoreMutation=!0;let i=this.sourceExpression.evaluate(this.scope,this.lookupFunctions);this.observerLocator.taskQueue.queueMicroTask(()=>this.ignoreMutation=!1),i===this.items?this.itemsChanged():this.items=i}Pt(){let t=this.Ot(),e=this.strategyLocator.getStrategy(t);return!!e&&(this.collectionObserver=e.getCollectionObserver(this.observerLocator,t),!!this.collectionObserver&&(this.callContext="handleInnerCollectionMutated",this.collectionObserver.subscribe(this.callContext,this),!0))}jt(){let t=this.items;this.collectionObserver=this.strategy.getCollectionObserver(this.observerLocator,t),this.collectionObserver&&(this.callContext="handleCollectionMutated",this.collectionObserver.subscribe(this.callContext,this))}Rt(){if(this.viewFactory.viewFactory){const t=this.viewFactory.viewFactory.instructions,e=Object.keys(t);for(let i=0;i<e.length;i++){const s=t[e[i]].expressions;if(s)for(let t=0;i<s.length;i++)if("matcher"===s[t].targetProperty){const e=s[t];return s.splice(t,1),e}}}}viewCount(){return this.viewSlot.children.length}views(){return this.viewSlot.children}view(t){return this.viewSlot.children[t]}matcher(){return this.matcherBinding?this.matcherBinding.sourceExpression.evaluate(this.scope,this.matcherBinding.lookupFunctions):null}addView(t,e){let i=this.viewFactory.create();i.bind(t,e),this.viewSlot.add(i)}insertView(t,e,i){let s=this.viewFactory.create();s.bind(e,i),this.viewSlot.insert(t,s)}moveView(t,e){this.viewSlot.move(t,e)}removeAllViews(t,e){return this.viewSlot.removeAll(t,e)}removeViews(t,e,i){return this.viewSlot.removeMany(t,e,i)}removeView(t,e,i){return this.viewSlot.removeAt(t,e,i)}updateBindings(t){let e=t.bindings.length;for(;e--;)Ah(t.bindings[e]);for(e=t.controllers.length;e--;){let i=t.controllers[e].boundProperties.length;for(;i--;){Ah(t.controllers[e].boundProperties[i].binding)}}}}const fl=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g");let dl=class{constructor(t,e){this.string=t,this.caseSensitive=e}eachChar(t){let e=this.string;for(let i=0,s=e.length;i<s;++i){let s=e[i];t({validChars:this.caseSensitive?s:s.toUpperCase()+s.toLowerCase()})}}regex(){return this.string.replace(fl,"\\$1")}generate(){return this.string}},ml=class{constructor(t,e){this.name=t,this.optional=e}eachChar(t){t({invalidChars:"/",repeat:!0})}regex(){return this.optional?"([^/]+)?":"([^/]+)"}generate(t,e){return e[this.name]=!0,t[this.name]}},pl=class{constructor(t){this.name=t}eachChar(t){t({invalidChars:"",repeat:!0})}regex(){return"(.+)"}generate(t,e){return e[this.name]=!0,t[this.name]}},gl=class{eachChar(){}regex(){return""}generate(){return""}},wl=class{constructor(){this.rootState=new class t{constructor(t){this.charSpec=t,this.nextStates=[]}get(t){for(let e of this.nextStates)if(e.charSpec.validChars===t.validChars&&e.charSpec.invalidChars===t.invalidChars)return e}put(e){let i=this.get(e);return i||(i=new t(e),this.nextStates.push(i),e.repeat&&i.nextStates.push(i),i)}match(t){let e=this.nextStates,i=[];for(let s=0,n=e.length;s<n;s++){let n=e[s],r=n.charSpec;void 0!==r.validChars?-1!==r.validChars.indexOf(t)&&i.push(n):void 0!==r.invalidChars&&-1===r.invalidChars.indexOf(t)&&i.push(n)}return i}},this.names={}}add(t){if(Array.isArray(t))return void t.forEach(t=>this.add(t));let e=this.rootState,i="^",s={statics:0,dynamics:0,stars:0},n=[],r=t.handler.name,h=!0,l=!0,o=function(t,e,i,s){let n=t;"/"===t.charAt(0)&&(n=t.substr(1));let r=[],h=n.split("/");for(let n=0,l=h.length;n<l;++n){let l=h[n],o=l.match(/^:([^?]+)(\?)?$/);if(o){let[,s,n]=o;if(-1!==s.indexOf("="))throw new Error(`Parameter ${s} in route ${t} has a default value, which is not supported.`);r.push(new ml(s,!!n)),e.push(s),i.dynamics++}else(o=l.match(/^\*(.+)$/))?(r.push(new pl(o[1])),e.push(o[1]),i.stars++):""===l?r.push(new gl):(r.push(new dl(l,s)),i.statics++)}return r}(t.path,n,s,t.caseSensitive);for(let t=0,s=o.length;t<s;t++){let s=o[t];s instanceof gl||(h=!1,l=l&&s.optional,e=xl(e,s),i+=s.optional?"/?":"/",i+=s.regex())}if(l)if(h)e=e.put({validChars:"/"}),i+="/";else{let t=this.rootState.put({validChars:"/"});e.epsilon=[t],e=t}let u=[{handler:t.handler,names:n}];if(r){let t=Array.isArray(r)?r:[r];for(let e=0;e<t.length;e++)this.names[t[e]]={segments:o,handlers:u}}return e.handlers=u,e.regex=new RegExp(i+"$",t.caseSensitive?"":"i"),e.types=s,e}handlersFor(t){let e=this.names[t];if(!e)throw new Error(`There is no route named ${t}`);return[...e.handlers]}hasRoute(t){return!!this.names[t]}generate(t,e){let i=this.names[t];if(!i)throw new Error(`There is no route named ${t}`);let s=i.handlers[0].handler;if(s.generationUsesHref)return s.href;let n=Object.assign({},e),r=i.segments,h={},l="";for(let e=0,i=r.length;e<i;e++){let i=r[e];if(i instanceof gl)continue;let s=i.generate(n,h);if(null==s){if(!i.optional)throw new Error(`A value is required for route parameter '${i.name}' in route '${t}'.`)}else l+="/",l+=s}"/"!==l.charAt(0)&&(l="/"+l);for(let t in h)delete n[t];let o=vt(n);return l+=o?`?${o}`:""}recognize(t){let e=[this.rootState],i={},s=!1,n=t,r=n.indexOf("?");if(-1!==r){let t=n.substr(r+1,n.length);n=n.substr(0,r),i=xt(t)}"/"!==(n=decodeURI(n)).charAt(0)&&(n="/"+n);let h=n.length;h>1&&"/"===n.charAt(h-1)&&(n=n.substr(0,h-1),s=!0);for(let t=0,i=n.length;t<i&&(e=bl(e,n.charAt(t))).length;t++);let l=[];for(let t=0,i=e.length;t<i;t++)e[t].handlers&&l.push(e[t]);e=function(t){return t.sort((t,e)=>{if(t.types.stars!==e.types.stars)return t.types.stars-e.types.stars;if(t.types.stars){if(t.types.statics!==e.types.statics)return e.types.statics-t.types.statics;if(t.types.dynamics!==e.types.dynamics)return e.types.dynamics-t.types.dynamics}return t.types.dynamics!==e.types.dynamics?t.types.dynamics-e.types.dynamics:t.types.statics!==e.types.statics?e.types.statics-t.types.statics:0})}(l);let o=l[0];if(o&&o.handlers)return s&&"(.+)$"===o.regex.source.slice(-5)&&(n+="/"),function(t,e,i){let s=t.handlers,n=t.regex,r=e.match(n),h=1,l=new vl(i);for(let t=0,e=s.length;t<e;t++){let e=s[t],i=e.names,n={};for(let t=0,e=i.length;t<e;t++)n[i[t]]=r[h++];l.push({handler:e.handler,params:n,isDynamic:!!i.length})}return l}(o,n,i)}},vl=class{constructor(t){this.splice=Array.prototype.splice,this.slice=Array.prototype.slice,this.push=Array.prototype.push,this.length=0,this.queryParams=t||{}}};function bl(t,e){let i=[];for(let s=0,n=t.length;s<n;s++){let n=t[s];i.push(...n.match(e))}let s=i.filter(t=>t.epsilon);for(;s.length>0;){let t=[];s.forEach(e=>{i.push(...e.epsilon),t.push(...e.epsilon)}),s=t.filter(t=>t.epsilon)}return i}function xl(t,e){let i=t.put({validChars:"/"});return e.eachChar(t=>{i=i.put(t)}),e.optional&&(t.epsilon=t.epsilon||[],t.epsilon.push(i)),i}function yl(t){throw new Error(`History must implement ${t}().`)}class kl{activate(t){yl("activate")}deactivate(){yl("deactivate")}getAbsoluteRoot(){yl("getAbsoluteRoot")}navigate(t,e){yl("navigate")}navigateBack(){yl("navigateBack")}setTitle(t){yl("setTitle")}setState(t,e){yl("setState")}getState(t){yl("getState")}}const Cl=y("event-aggregator");let El=class{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}};function Rl(t,e,i){try{t(e,i)}catch(t){Cl.error(t)}}function Al(t,e){try{t.handle(e)}catch(t){Cl.error(t)}}class Pl{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){let i,s;if(!t)throw new Error("Event was invalid.");if("string"==typeof t){if(i=this.eventLookup[t])for(s=(i=i.slice()).length;s--;)Rl(i[s],e,t)}else for(s=(i=this.messageHandlers.slice()).length;s--;)Al(i[s],t)}subscribe(t,e){let i,s;if(!t)throw new Error("Event channel/type was invalid.");return"string"==typeof t?(i=e,s=this.eventLookup[t]||(this.eventLookup[t]=[])):(i=new El(t,e),s=this.messageHandlers),s.push(i),{dispose(){let t=s.indexOf(i);-1!==t&&s.splice(t,1)}}}subscribeOnce(t,e){let i=this.subscribe(t,(t,s)=>(i.dispose(),e(t,s)));return i}}function jl(t){t.instance(Pl,function(t){let e=new Pl;return t.subscribeOnce=function(t,i){return e.subscribeOnce(t,i)},t.subscribe=function(t,i){return e.subscribe(t,i)},t.publish=function(t,i){e.publish(t,i)},e}(t.aurelia))}function Ol(t,e,i=!1){return e||"#"===t[0]||(t="#"+t),e&&i&&(t=t.substring(1,t.length)),t}function $l(t,e,i,s){if(ql.test(t))return t;let n="";return e.length&&"/"!==e[0]&&(n+="/"),(n+=e).length&&"/"===n[n.length-1]||"/"===t[0]||(n+="/"),n.length&&"/"===n[n.length-1]&&"/"===t[0]&&(n=n.substring(0,n.length-1)),Ol(n+t,i,s)}function Tl(t,e,i){return Vl.test(t)?Ol(t,i):$l(t,e,i)}const Vl=/^#?\//,ql=/^([a-z][a-z0-9+\-.]*:)?\/\//i,Sl={completed:"completed",canceled:"canceled",rejected:"rejected",running:"running"};class _l{constructor(){this.steps=[]}addStep(t){let e;if("function"==typeof t)e=t;else{if("function"==typeof t.getSteps){let e=t.getSteps();for(let t=0,i=e.length;t<i;t++)this.addStep(e[t]);return this}e=t.run.bind(t)}return this.steps.push(e),this}run(t){let e=-1,i=this.steps;function s(){if(!(++e<i.length))return s.complete();{let n=i[e];try{return n(t,s)}catch(t){return s.reject(t)}}}return s.complete=Il(s,Sl.completed),s.cancel=Il(s,Sl.canceled),s.reject=Il(s,Sl.rejected),s()}}function Il(t,e){return t=>Promise.resolve({status:e,output:t,completed:e===Sl.completed})}class Ll{run(t,e){return t.$t(!0).then(()=>(t.Tt(),e()))}}class Ml{constructor(t){this.plan=null,this.options={},Object.assign(this,t),this.params=this.params||{},this.viewPortInstructions={};let e=[],i=this;do{let t=Object.assign({},i.params);i.config&&i.config.hasChildRouter&&delete t[i.getWildCardName()],e.unshift(t),i=i.parentInstruction}while(i);let s=Object.assign({},this.queryParams,...e);this.lifecycleArgs=[s,this.config,this]}getAllInstructions(){let t=[this];for(let e in this.viewPortInstructions){let i=this.viewPortInstructions[e].childNavigationInstruction;i&&t.push(...i.getAllInstructions())}return t}getAllPreviousInstructions(){return this.getAllInstructions().map(t=>t.previousInstruction).filter(t=>t)}addViewPortInstruction(t,e,i,s){const n=Object.assign({},this.lifecycleArgs[1],{currentViewPort:t});return this.viewPortInstructions[t]={name:t,strategy:e,moduleId:i,component:s,childRouter:s.childRouter,lifecycleArgs:[].concat(this.lifecycleArgs[0],n,this.lifecycleArgs[2])}}getWildCardName(){let t=this.config.route.lastIndexOf("*");return this.config.route.substr(t+1)}getWildcardPath(){let t=this.getWildCardName(),e=this.params[t]||"";return this.queryString&&(e+="?"+this.queryString),e}getBaseUrl(){let t=decodeURI(this.fragment);if(""===t){let e=this.router.routes.find(t=>t.name===this.config.name&&""!==t.route);e&&(t=e.route)}if(!this.params)return encodeURI(t);let e=this.getWildCardName(),i=this.params[e]||"";return i?encodeURI(t.substr(0,t.lastIndexOf(i))):encodeURI(t)}$t(t){let e=this.router;e.currentInstruction=this,this.previousInstruction&&(this.previousInstruction.config.navModel.isActive=!1),this.config.navModel.isActive=!0,e.Vt(),e.refreshNavigation();let i=[],s=[];for(let n in this.viewPortInstructions){let r=this.viewPortInstructions[n],h=e.viewPorts[n];if(!h)throw new Error(`There was no router-view found in the view for ${r.moduleId}.`);r.strategy===zl.replace?r.childNavigationInstruction&&r.childNavigationInstruction.parentCatchHandler?i.push(r.childNavigationInstruction.$t(t)):(t&&s.push({viewPort:h,viewPortInstruction:r}),i.push(h.process(r,t).then(e=>{if(r.childNavigationInstruction)return r.childNavigationInstruction.$t(t)}))):r.childNavigationInstruction&&i.push(r.childNavigationInstruction.$t(t))}return Promise.all(i).then(()=>(s.forEach(t=>t.viewPort.swap(t.viewPortInstruction)),null)).then(()=>(function(t){t.previousInstruction=null,t.plan=null})(this))}Tt(){let t=this.qt();t&&this.router.history.setTitle(t)}qt(t=" | "){let e="",i=[];this.config.navModel.title&&(e=this.router.transformTitle(this.config.navModel.title));for(let e in this.viewPortInstructions){let s=this.viewPortInstructions[e];if(s.childNavigationInstruction){let e=s.childNavigationInstruction.qt(t);e&&i.push(e)}}return i.length&&(e=i.join(t)+(e?t:"")+e),this.router.title&&(e+=(e?t:"")+this.router.transformTitle(this.router.title)),e}}class Bl{constructor(t,e){this.isActive=!1,this.title=null,this.href=null,this.relativeHref=null,this.settings={},this.config=null,this.router=t,this.relativeHref=e}setTitle(t){this.title=t,this.isActive&&this.router.updateTitle()}}function Fl(t){return t&&"function"==typeof t.navigate}class Nl{constructor(t,e={}){this.url=t,this.options=Object.assign({trigger:!0,replace:!0},e),this.shouldContinueProcessing=!1}setRouter(t){this.router=t}navigate(t){(this.options.useAppRouter?t:this.router||t).navigate(this.url,this.options)}}class Dl{constructor(){this.instructions=[],this.options={},this.pipelineSteps=[]}addPipelineStep(t,e){return this.pipelineSteps.push({name:t,step:e}),this}addAuthorizeStep(t){return this.addPipelineStep("authorize",t)}addPreActivateStep(t){return this.addPipelineStep("preActivate",t)}addPreRenderStep(t){return this.addPipelineStep("preRender",t)}addPostRenderStep(t){return this.addPipelineStep("postRender",t)}fallbackRoute(t){return this.St=t,this}map(t){return Array.isArray(t)?(t.forEach(this.map.bind(this)),this):this.mapRoute(t)}useViewPortDefaults(t){return this.viewPortDefaults=t,this}mapRoute(t){return this.instructions.push(e=>{let i,s=[];if(Array.isArray(t.route))for(let e=0,i=t.route.length;e<i;++e){let i=Object.assign({},t);i.route=t.route[e],s.push(i)}else s.push(Object.assign({},t));for(let t=0,n=s.length;t<n;++t){let n=s[t];n.settings=n.settings||{},i||(i=e.createNavModel(n)),e.addRoute(n,i)}}),this}mapUnknownRoutes(t){return this.unknownRouteConfig=t,this}exportToRouter(t){let e=this.instructions;for(let i=0,s=e.length;i<s;++i)e[i](t);this.title&&(t.title=this.title),this.unknownRouteConfig&&t.handleUnknownRoutes(this.unknownRouteConfig),this.St&&(t.fallbackRoute=this.St),this.viewPortDefaults&&t.useViewPortDefaults(this.viewPortDefaults),t.options=this.options;let i=this.pipelineSteps;if(i.length){if(!t.isRoot)throw new Error("Pipeline steps can only be added to the root router");let e=t.pipelineProvider;for(let t=0,s=i.length;t<s;++t){let{name:s,step:n}=i[t];e.addStep(s,n)}}}}const zl={noChange:"no-change",invokeLifecycle:"invoke-lifecycle",replace:"replace"};class Ul{run(t,e){return Hl(t).then(i=>(t.plan=i,e())).catch(e.cancel)}}function Hl(t,e){let i=t.config;if("redirect"in i){let e=Tl(i.redirect,function(t){let e=[];t=t.parentInstruction;for(;t;)e.unshift(t.getBaseUrl()),t=t.parentInstruction;return e.unshift("/"),e.join("")}(t));return t.queryString&&(e+="?"+t.queryString),Promise.reject(new Nl(e))}let s=t.previousInstruction,n={},r=t.router.viewPortDefaults;if(s){let h=function(t,e){let i=t.params,s=e.params,n=e.config.hasChildRouter?e.getWildCardName():null;for(let t in s)if(t!==n&&i[t]!==s[t])return!0;for(let t in i)if(t!==n&&i[t]!==s[t])return!0;if(!e.options.compareQueryParams)return!1;let r=t.queryParams,h=e.queryParams;for(let t in h)if(r[t]!==h[t])return!0;for(let t in r)if(r[t]!==h[t])return!0;return!1}(s,t),l=[];for(let o in s.viewPortInstructions){let u=s.viewPortInstructions[o],a=o in i.viewPorts?i.viewPorts[o]:u;null===a.moduleId&&o in t.router.viewPortDefaults&&(a=r[o]);let c=n[o]={name:o,config:a,prevComponent:u.component,prevModuleId:u.moduleId};if(u.moduleId!==a.moduleId?c.strategy=zl.replace:"determineActivationStrategy"in u.component.viewModel?c.strategy=u.component.viewModel.determineActivationStrategy(...t.lifecycleArgs):i.activationStrategy?c.strategy=i.activationStrategy:c.strategy=h||e?zl.invokeLifecycle:zl.noChange,c.strategy!==zl.replace&&u.childRouter){let e=t.getWildcardPath(),i=u.childRouter._t(e,t).then(t=>(c.childNavigationInstruction=t,Hl(t,c.strategy===zl.invokeLifecycle).then(e=>{t.plan=e})));l.push(i)}}return Promise.all(l).then(()=>n)}for(let e in i.viewPorts){let s=i.viewPorts[e];null===s.moduleId&&e in t.router.viewPortDefaults&&(s=r[e]),n[e]={name:e,strategy:zl.replace,config:s}}return Promise.resolve(n)}class Gl{constructor(t,e){this.parent=null,this.options={},this.viewPortDefaults={},this.transformTitle=(t=>this.parent?this.parent.transformTitle(t):t),this.container=t,this.history=e,this.reset()}reset(){this.viewPorts={},this.routes=[],this.baseUrl="",this.isConfigured=!1,this.isNavigating=!1,this.isExplicitNavigation=!1,this.isExplicitNavigationBack=!1,this.isNavigatingFirst=!1,this.isNavigatingNew=!1,this.isNavigatingRefresh=!1,this.isNavigatingForward=!1,this.isNavigatingBack=!1,this.navigation=[],this.currentInstruction=null,this.viewPortDefaults={},this.It=100,this.Lt=new wl,this.Mt=new wl,this.Bt=new Promise(t=>{this.Ft=t})}get isRoot(){return!this.parent}registerViewPort(t,e){e=e||"default",this.viewPorts[e]=t}ensureConfigured(){return this.Bt}configure(t){this.isConfigured=!0;let e,i=t;return"function"==typeof t&&(i=t(e=new Dl)),Promise.resolve(i).then(t=>{t&&t.exportToRouter&&(e=t),e.exportToRouter(this),this.isConfigured=!0,this.Ft()})}navigate(t,e){return!this.isConfigured&&this.parent?this.parent.navigate(t,e):(this.isExplicitNavigation=!0,this.history.navigate(Tl(t,this.baseUrl,this.history.Nt),e))}navigateToRoute(t,e,i){let s=this.generate(t,e);return this.navigate(s,i)}navigateBack(){this.isExplicitNavigationBack=!0,this.history.navigateBack()}createChild(t){let e=new Gl(t||this.container.createChild(),this.history);return e.parent=this,e}generate(t,e,i={}){let s=this.Lt.hasRoute(t);if((!this.isConfigured||!s)&&this.parent)return this.parent.generate(t,e);if(!s)throw new Error(`A route with name '${t}' could not be found. Check that \`name: '${t}'\` was specified in the route's config.`);let n=$l(this.Lt.generate(t,e),this.baseUrl,this.history.Nt,i.absolute);return i.absolute?`${this.history.getAbsoluteRoot()}${n}`:n}createNavModel(t){let e=new Bl(this,"href"in t?t.href:t.route);return e.title=t.title,e.order=t.nav,e.href=t.href,e.settings=t.settings,e.config=t,e}addRoute(t,e){Wl(t,this.routes),"viewPorts"in t||t.navigationStrategy||(t.viewPorts={default:{moduleId:t.moduleId,view:t.view}}),e||(e=this.createNavModel(t)),this.routes.push(t);let i=t.route;"/"===i.charAt(0)&&(i=i.substr(1));let s=!0===t.caseSensitive,n=this.Lt.add({path:i,handler:t,caseSensitive:s});if(i){let n=t.settings;delete t.settings;let r=JSON.parse(JSON.stringify(t));t.settings=n,r.route=`${i}/*childRoute`,r.hasChildRouter=!0,this.Mt.add({path:r.route,handler:r,caseSensitive:s}),r.navModel=e,r.settings=t.settings,r.navigationStrategy=t.navigationStrategy}if(t.navModel=e,(e.order||0===e.order)&&-1===this.navigation.indexOf(e)){if(!e.href&&""!==e.href&&(n.types.dynamics||n.types.stars))throw new Error('Invalid route config for "'+t.route+'" : dynamic routes must specify an "href:" to be included in the navigation model.');"number"!=typeof e.order&&(e.order=++this.It),this.navigation.push(e),this.navigation=this.navigation.sort((t,e)=>t.order-e.order)}}hasRoute(t){return!!(this.Lt.hasRoute(t)||this.parent&&this.parent.hasRoute(t))}hasOwnRoute(t){return this.Lt.hasRoute(t)}handleUnknownRoutes(t){if(!t)throw new Error("Invalid unknown route handler");this.catchAllHandler=(e=>this.Dt(t,e).then(t=>(e.config=t,e)))}updateTitle(){if(this.parent)return this.parent.updateTitle();this.currentInstruction&&this.currentInstruction.Tt()}refreshNavigation(){let t=this.navigation;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.config.href?i.href=Ol(i.config.href,this.history.Nt):i.href=$l(i.relativeHref,this.baseUrl,this.history.Nt)}}useViewPortDefaults(t){for(let e in t){let i=t[e];this.viewPortDefaults[e]={moduleId:i.moduleId}}}Vt(){if(this.parent){let t=this.parent.currentInstruction.getBaseUrl();this.baseUrl=this.parent.baseUrl+t}}_t(t="",e=null){let i=t,s="",n=t.indexOf("?");-1!==n&&(i=t.substr(0,n),s=t.substr(n+1));let r=this.Lt.recognize(t);r&&r.length||(r=this.Mt.recognize(t));let h={fragment:i,queryString:s,config:null,parentInstruction:e,previousInstruction:this.currentInstruction,router:this,options:{compareQueryParams:this.options.compareQueryParams}};if(r&&r.length){let t=r[0],e=new Ml(Object.assign({},h,{params:t.params,queryParams:t.queryParams||r.queryParams,config:t.config||t.handler}));return"function"==typeof t.handler?Ql(e,t.handler,t):t.handler&&"function"==typeof t.handler.navigationStrategy?Ql(e,t.handler.navigationStrategy,t.handler):Promise.resolve(e)}if(this.catchAllHandler){return Ql(new Ml(Object.assign({},h,{params:{path:i},queryParams:r?r.queryParams:{},config:null})),this.catchAllHandler)}if(this.parent){let t=this.zt(this.parent);if(t){let s=this.Ut(t,e);return Ql(new Ml(Object.assign({},h,{params:{path:i},queryParams:r?r.queryParams:{},router:t,parentInstruction:s,parentCatchHandler:!0,config:null})),t.catchAllHandler)}}return Promise.reject(new Error(`Route not found: ${t}`))}Ut(t,e){return e.router===t?(e.fragment=t.baseUrl,e):e.parentInstruction?this.Ut(t,e.parentInstruction):void 0}zt(t){return t.catchAllHandler?t:!!t.parent&&this.zt(t.parent)}Dt(t,e){return Promise.resolve(t).then(t=>"string"==typeof t?{moduleId:t}:"function"==typeof t?t(e):t).then(t=>"string"==typeof t?{moduleId:t}:t).then(t=>(t.route=e.params.path,Wl(t,this.routes),t.navModel||(t.navModel=this.createNavModel(t)),t))}}function Wl(t,e){if("object"!=typeof t)throw new Error("Invalid Route Config");if("string"!=typeof t.route){let e=t.name||"(no name)";throw new Error('Invalid Route Config for "'+e+'": You must specify a "route:" pattern.')}if(!("redirect"in t||t.moduleId||t.navigationStrategy||t.viewPorts))throw new Error('Invalid Route Config for "'+t.route+'": You must specify a "moduleId:", "redirect:", "navigationStrategy:", or "viewPorts:".')}function Ql(t,e,i){return Promise.resolve(e.call(i,t)).then(()=>("viewPorts"in t.config||(t.config.viewPorts={default:{moduleId:t.config.moduleId}}),t))}class Yl{run(t,e){return Kl(t,"canDeactivate",e)}}class Jl{run(t,e){return eo(t,"canActivate",e)}}class Xl{run(t,e){return Kl(t,"deactivate",e,!0)}}class Zl{run(t,e){return eo(t,"activate",e,!0)}}function Kl(t,e,i,s){let n=function t(e,i,s=[]){for(let n in e){let r=e[n],h=r.prevComponent;if((r.strategy===zl.invokeLifecycle||r.strategy===zl.replace)&&h){let t=h.viewModel;i in t&&s.push(t)}r.strategy===zl.replace&&h?to(h,i,s):r.childNavigationInstruction&&t(r.childNavigationInstruction.plan,i,s)}return s}(t.plan,e),r=n.length;function h(t){return s||io(t)?l():i.cancel(t)}function l(){if(r--)try{return no(n[r][e](t),h,i.cancel)}catch(t){return i.cancel(t)}return i()}return l()}function to(t,e,i){let s=t.childRouter;if(s&&s.currentInstruction){let t=s.currentInstruction.viewPortInstructions;for(let s in t){let n=t[s].component,r=n.viewModel;e in r&&i.push(r),to(n,e,i)}}}function eo(t,e,i,s){let n=function t(e,i,s=[],n){let r=e.plan;Object.keys(r).filter(h=>{let l=r[h],o=e.viewPortInstructions[h],u=o.component.viewModel;(l.strategy===zl.invokeLifecycle||l.strategy===zl.replace)&&i in u&&s.push({viewModel:u,lifecycleArgs:o.lifecycleArgs,router:n}),l.childNavigationInstruction&&t(l.childNavigationInstruction,i,s,o.component.childRouter||n)});return s}(t,e),r=n.length,h=-1;function l(){if(++h<r)try{let t=n[h];return no(t.viewModel[e](...t.lifecycleArgs),e=>(function(t,e){return s||io(t,e)?l():i.cancel(t)})(e,t.router),i.cancel)}catch(t){return i.cancel(t)}return i()}return l()}function io(t,e){return!(t instanceof Error)&&(Fl(t)?("function"==typeof t.setRouter&&t.setRouter(e),!!t.shouldContinueProcessing):void 0===t||t)}class so{constructor(t){this.Ht=!0,this.Gt=t(this),this.Ht||this.unsubscribe()}get subscribed(){return this.Ht}unsubscribe(){this.Ht&&this.Gt&&this.Gt.unsubscribe(),this.Ht=!1}}function no(t,e,i){if(t&&"function"==typeof t.then)return Promise.resolve(t).then(e).catch(i);if(t&&"function"==typeof t.subscribe){let s=t;return new so(n=>s.subscribe({next(){n.subscribed&&(n.unsubscribe(),e(t))},error(t){n.subscribed&&(n.unsubscribe(),i(t))},complete(){n.subscribed&&(n.unsubscribe(),e(t))}}))}try{return e(t)}catch(t){return i(t)}}class ro{loadRoute(t,e,i){throw Error('Route loaders must implement "loadRoute(router, config, navigationInstruction)".')}}class ho{static inject(){return[ro]}constructor(t){this.routeLoader=t}run(t,e){return lo(this.routeLoader,t).then(e).catch(e.cancel)}}function lo(t,e){let i=function t(e,i=[]){let s=e.plan;for(let n in s){let r=s[n];if(r.strategy===zl.replace)i.push({viewPortPlan:r,navigationInstruction:e}),r.childNavigationInstruction&&t(r.childNavigationInstruction,i);else{let s=e.addViewPortInstruction(n,r.strategy,r.prevModuleId,r.prevComponent);r.childNavigationInstruction&&(s.childNavigationInstruction=r.childNavigationInstruction,t(r.childNavigationInstruction,i))}}return i}(e).map(e=>(function(t,e,i){let s=i.config?i.config.moduleId:null;return function(t,e,i){let s=e.router,n=e.lifecycleArgs;return t.loadRoute(s,i,e).then(t=>{let{viewModel:e,childContainer:r}=t;if(t.router=s,t.config=i,"configureRouter"in e){let i=r.getChildRouter();return t.childRouter=i,i.configure(t=>e.configureRouter(t,i,...n)).then(()=>t)}return t})}(t,e,i.config).then(n=>{let r=e.addViewPortInstruction(i.name,i.strategy,s,n),h=n.childRouter;if(h){let s=e.getWildcardPath();return h._t(s,e).then(e=>(i.childNavigationInstruction=e,Hl(e).then(i=>(e.plan=i,r.childNavigationInstruction=e,lo(t,e)))))}})})(t,e.navigationInstruction,e.viewPortPlan));return Promise.all(i)}let oo=class{constructor(t,e,i){this.steps=[],this.container=t,this.slotName=e,this.slotAlias=i}getSteps(){return this.steps.map(t=>this.container.get(t))}};class uo{static inject(){return[ct]}constructor(t){this.container=t,this.steps=[Ul,Yl,ho,this.Wt("authorize"),Jl,this.Wt("preActivate","modelbind"),Xl,Zl,this.Wt("preRender","precommit"),Ll,this.Wt("postRender","postcomplete")]}createPipeline(){let t=new _l;return this.steps.forEach(e=>t.addStep(this.container.get(e))),t}Qt(t){return this.steps.find(e=>e.slotName===t||e.slotAlias===t)}addStep(t,e){let i=this.Qt(t);if(!i)throw new Error(`Invalid pipeline slot name: ${t}.`);i.steps.includes(e)||i.steps.push(e)}removeStep(t,e){let i=this.Qt(t);i&&i.steps.splice(i.steps.indexOf(e),1)}Yt(t=""){let e=this.Qt(t);e&&(e.steps=[])}reset(){this.Yt("authorize"),this.Yt("preActivate"),this.Yt("preRender"),this.Yt("postRender")}Wt(t,e){return new oo(this.container,t,e)}}const ao=y("app-router");class co extends Gl{static inject(){return[ct,kl,uo,Pl]}constructor(t,e,i,s){super(t,e),this.pipelineProvider=i,this.events=s}reset(){super.reset(),this.maxInstructionCount=10,this.Jt?this.Jt.length=0:this.Jt=[]}loadUrl(t){return this._t(t).then(t=>this.Xt(t)).catch(t=>{ao.error(t),fo(this)})}registerViewPort(t,e){if(super.registerViewPort(t,e),this.isActive)this.Zt();else{let e=this.Kt(t);if("configureRouter"in e){if(!this.isConfigured){let t=this.Ft;return this.Ft=(()=>{}),this.configure(t=>e.configureRouter(t,this)).then(()=>{this.activate(),t()})}}else this.activate()}return Promise.resolve()}activate(t){this.isActive||(this.isActive=!0,this.options=Object.assign({routeHandler:this.loadUrl.bind(this)},this.options,t),this.history.activate(this.options),this.Zt())}deactivate(){this.isActive=!1,this.history.deactivate()}Xt(t){return new Promise(e=>{t.resolve=e,this.Jt.unshift(t),this.Zt()})}Zt(t=0){return Promise.resolve().then(()=>{if(this.isNavigating&&!t)return;let e=this.Jt.shift();if(this.Jt.length=0,!e)return;this.isNavigating=!0;let i=this.history.getState("NavigationTracker");if(i||this.currentNavigationTracker?i?this.currentNavigationTracker?this.currentNavigationTracker<i?this.isNavigatingForward=!0:this.currentNavigationTracker>i&&(this.isNavigatingBack=!0):this.isNavigatingRefresh=!0:this.isNavigatingNew=!0:(this.isNavigatingFirst=!0,this.isNavigatingNew=!0),i||(i=Date.now(),this.history.setState("NavigationTracker",i)),this.currentNavigationTracker=i,e.previousInstruction=this.currentInstruction,t){if(t===this.maxInstructionCount-1)return ao.error(`${t+1} navigation instructions have been attempted without success. Restoring last known good location.`),fo(this),this.Zt(t+1);if(t>this.maxInstructionCount)throw new Error("Maximum navigation attempts exceeded. Giving up.")}else this.events.publish("router:navigation:processing",{instruction:e});return this.pipelineProvider.createPipeline().run(e).then(e=>(function(t,e,i,s){e&&"completed"in e&&"output"in e||((e=e||{}).output=new Error(`Expected router pipeline to return a navigation result, but got [${JSON.stringify(e)}] instead.`));let n=null;Fl(e.output)?e.output.navigate(s):(n=e,e.completed||(e.output instanceof Error&&ao.error(e.output),fo(s)));return s.Zt(i+1).then(t=>n||t||e)})(0,e,t,this)).catch(t=>({output:t instanceof Error?t:new Error(t)})).then(i=>(function(t,e,i,s){t.resolve(e);let n={instruction:t,result:e};if(i)s.events.publish("router:navigation:child:complete",n);else{let i;if(s.isNavigating=!1,s.isExplicitNavigation=!1,s.isExplicitNavigationBack=!1,s.isNavigatingFirst=!1,s.isNavigatingNew=!1,s.isNavigatingRefresh=!1,s.isNavigatingForward=!1,s.isNavigatingBack=!1,e.output instanceof Error)i="error";else if(e.completed){let e=t.queryString?"?"+t.queryString:"";s.history.previousLocation=t.fragment+e,i="success"}else i="canceled";s.events.publish(`router:navigation:${i}`,n),s.events.publish("router:navigation:complete",n)}return e})(e,i,!!t,this))})}Kt(t){if(this.container.viewModel)return this.container.viewModel;if(t.container){let e=t.container;for(;e;){if(e.viewModel)return this.container.viewModel=e.viewModel,e.viewModel;e=e.parent}}}}function fo(t){t.history.previousLocation?t.navigate(t.history.previousLocation,{trigger:!1,replace:!0}):t.fallbackRoute?t.navigate(t.fallbackRoute,{trigger:!0,replace:!0}):ao.error("Router navigation failed, and no previous location or fallbackRoute could be restored.")}const mo=y("route-href");function po(t){t.singleton(ro,xo).singleton(Gl,co).globalResources(go,wo),t.container.registerAlias(Gl,co)}class go{static inject(){return[h.Element]}static resource(){return{type:"attribute",bindables:[{name:"route",changeHandler:"processChange",primaryProperty:!0},{name:"params",changeHandler:"processChange"},{name:"attribute",defaultValue:"href"}]}}constructor(t,e){this.router=t,this.element=e}bind(){this.isActive=!0,this.processChange()}unbind(){this.isActive=!1}attributeChanged(t,e){e&&this.element.removeAttribute(e),this.processChange()}processChange(){return this.router.ensureConfigured().then(()=>{if(!this.isActive)return null;let t=this.router.generate(this.route,this.params);return this.element.au.controller?this.element.au.controller.viewModel[this.attribute]=t:this.element.setAttribute(this.attribute,t),null}).catch(t=>{mo.error(t)})}}class wo{static inject(){return[h.Element,ct,lr,Gl,Jn,Tn,Gr]}static resource(){return{name:"router-view",bindables:["swapOrder","layoutView","layoutViewModel","layoutModel"]}}static view(){return null}constructor(t,e,i,s,n,r,h){this.element=t,this.container=e,this.viewSlot=i,this.router=s,this.viewLocator=n,this.compositionTransaction=r,this.compositionEngine=h,this.router.registerViewPort(this,this.element.getAttribute("name")),"initialComposition"in r||(r.initialComposition=!0,this.compositionTransactionNotifier=r.enlist())}created(t){this.owningView=t}bind(t,e){this.container.viewModel=t,this.overrideContext=e}process(t,e){let i=t.component,s=i.childContainer,n=i.viewModel,r=i.viewModelResource,h=r.metadata,l=i.router.currentInstruction.config,o=l.viewPorts&&l.viewPorts[t.name]||{};s.get(vo).te(this);let u={viewModel:o.layoutViewModel||l.layoutViewModel||this.layoutViewModel,view:o.layoutView||l.layoutView||this.layoutView,model:o.layoutModel||l.layoutModel||this.layoutModel,router:t.component.router,childContainer:s,viewSlot:this.viewSlot},a=this.viewLocator.getViewStrategy(i.view||n);return a&&i.view&&a.makeRelativeTo(T.get(i.router.container.viewModel.constructor).moduleId),h.load(s,r.value,null,a,!0).then(i=>{if(this.compositionTransactionNotifier||(this.compositionTransactionOwnershipToken=this.compositionTransaction.tryCapture()),(u.viewModel||u.view)&&(t.layoutInstruction=u),t.controller=h.create(s,Nn.dynamic(this.element,n,i)),e)return null;this.swap(t)})}swap(t){let e=t.layoutInstruction,i=this.view,s=()=>{let t=Ur[this.swapOrder]||Ur.after,e=this.viewSlot;t(e,i,()=>Promise.resolve(e.add(this.view))).then(()=>{this.te()})},n=e=>(t.controller.automate(this.overrideContext,e),this.compositionTransactionOwnershipToken?this.compositionTransactionOwnershipToken.waitForCompositionComplete().then(()=>(this.compositionTransactionOwnershipToken=null,s())):s());return e?(e.viewModel||(e.viewModel={}),this.compositionEngine.createController(e).then(i=>(sr.distributeView(t.controller.view,i.slots||i.view.slots),i.automate(Ht(e.viewModel),this.owningView),i.view.children.push(t.controller.view),i.view||i)).then(t=>(this.view=t,n(t)))):(this.view=t.controller.view,n(this.owningView))}te(){this.compositionTransactionNotifier&&(this.compositionTransactionNotifier.done(),this.compositionTransactionNotifier=null)}}class vo{constructor(){this.promise=new Promise(t=>this.resolve=t)}findNearest(){return this.promise}te(t){this.resolve(t)}}class bo{static view(){return"<template></template>"}}class xo extends ro{static inject(){return[Gr]}constructor(t){super(),this.compositionEngine=t}loadRoute(t,e){let i,s=t.container.createChild();if(null===(e=e||{}).moduleId)i=bo;else if("string"==typeof e.moduleId)i=/\.html$/i.test(e.moduleId)?function(t){var e,i,s;let n=/([^\/^\?]+)\.html/i.exec(t)[1];return e=Yr(n),i=Kr(t),e(s=i(s=class{bind(t){this.$parent=t}})||s)||s}(e.moduleId):dt(e.moduleId,T.get(t.container.viewModel.constructor).moduleId);else{if("function"!=typeof e.moduleId)throw new Error('Unsupported "moduleId" config');i=e.moduleId()}let n={viewModel:i,childContainer:s,view:e.view||e.viewStrategy,router:t};return s.registerSingleton(vo),s.getChildRouter=function(){let e;return s.registerHandler(Gl,i=>e||(e=t.createChild(s))),s.get(Gl)},(i instanceof Promise?i.then(t=>{if("function"==typeof t)n.viewModel=t;else if("object"==typeof t)for(let e in t)if("function"==typeof t[e]){n.viewModel=t[e];break}if("function"!=typeof n.viewModel)throw new Error("Invalid view model.")}):Promise.resolve()).then(()=>this.compositionEngine.ensureViewModel(n))}}class yo{activate(t){}deactivate(){}}class ko extends yo{constructor(){super(),this.handler=(t=>{let{shouldHandleEvent:e,href:i}=ko.getEventInfo(t);e&&(t.preventDefault(),this.history.navigate(i))})}activate(t){t.Nt&&(this.history=t,h.addEventListener("click",this.handler,!0))}deactivate(){h.removeEventListener("click",this.handler)}static getEventInfo(t){let e={shouldHandleEvent:!1,href:null,anchor:null},i=ko.findClosestAnchor(t.target);if(!i||!ko.targetIsThisWindow(i))return e;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return e;let s=i.getAttribute("href");e.anchor=i,e.href=s;let n=1===t.which,r=s&&!("#"===s.charAt(0)||/^[a-z]+:/i.test(s));return e.shouldHandleEvent=n&&r,e}static findClosestAnchor(t){for(;t;){if("A"===t.tagName)return t;t=t.parentNode}}static targetIsThisWindow(t){let e=t.getAttribute("target"),i=r.global;return!e||e===i.name||"_self"===e||"top"===e&&i===i.top}}class Co extends kl{static inject(){return[yo]}constructor(t){super(),this.ee=!1,this.ie=this.se.bind(this),this.location=r.location,this.history=r.history,this.linkHandler=t}activate(t){if(this.ee)throw new Error("History has already been activated.");let e,i=!!t.pushState;if(this.ee=!0,this.options=Object.assign({},{root:"/"},this.options,t),this.root=("/"+this.options.root+"/").replace(Ro,"/"),this.ne=!1!==this.options.hashChange,this.Nt=!!(this.options.pushState&&this.history&&this.history.pushState),this.Nt?e="popstate":this.ne&&(e="hashchange"),r.addEventListener(e,this.ie),this.ne&&i){let t=this.location,e=t.pathname.replace(/[^\/]$/,"$&/")===this.root;if(!this.Nt&&!e)return this.fragment=this.re(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this.Nt&&e&&t.hash&&(this.fragment=this.he().replace(Eo,""),this.history.replaceState({},h.title,this.root+this.fragment+t.search))}if(this.fragment||(this.fragment=this.re()),this.linkHandler.activate(this),!this.options.silent)return this.le()}deactivate(){r.removeEventListener("popstate",this.ie),r.removeEventListener("hashchange",this.ie),this.ee=!1,this.linkHandler.deactivate()}getAbsoluteRoot(){var t,e,i;return`${t=this.location.protocol,e=this.location.hostname,i=this.location.port,`${t}//${e}${i?":"+i:""}`}${this.root}`}navigate(t,{trigger:e=!0,replace:i=!1}={}){if(t&&Po.test(t))return this.location.href=t,!0;if(!this.ee)return!1;if(t=this.re(t||""),this.fragment===t&&!i)return!1;this.fragment=t;let s=this.root+t;if(""===t&&"/"!==s&&(s=s.slice(0,-1)),this.Nt)s=s.replace("//","/"),this.history[i?"replaceState":"pushState"]({},h.title,s);else{if(!this.ne)return this.location.assign(s);!function(t,e,i){if(i){let i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}(this.location,t,i)}return e?this.le(t):void 0}navigateBack(){this.history.back()}setTitle(t){h.title=t}setState(t,e){let i=Object.assign({},this.history.state),{pathname:s,search:n,hash:r}=this.location;i[t]=e,this.history.replaceState(i,null,`${s}${n}${r}`)}getState(t){return Object.assign({},this.history.state)[t]}he(){return this.location.hash.substr(1)}re(t,e){let i;return t||(this.Nt||!this.ne||e?(t=this.location.pathname+this.location.search,i=this.root.replace(Ao,""),t.indexOf(i)||(t=t.substr(i.length))):t=this.he()),"/"+t.replace(Eo,"")}se(){this.re()!==this.fragment&&this.le()}le(t){let e=this.fragment=this.re(t);return!!this.options.routeHandler&&this.options.routeHandler(e)}}const Eo=/^#?\/*|\s+$/g,Ro=/^\/+|\/+$/g,Ao=/\/$/,Po=/^([a-z][a-z0-9+\-.]*:)?\/\//i;let jo,Oo,$o;k(new class{debug(t,...e){console.debug(`DEBUG [${t.id}]`,...e)}info(t,...e){console.info(`INFO [${t.id}]`,...e)}warn(t,...e){console.warn(`WARN [${t.id}]`,...e)}error(t,...e){console.error(`ERROR [${t.id}]`,...e)}}),C(c.debug);class To{constructor(t,e,i){this.loader=t||new r.Loader,e=this.container=e||(new ct).makeGlobal(),this.resources=i||new rr;let s=this.use=new Bo(this);this.logger=y("aurelia"),this.hostConfigured=!1,this.host=null,s.instance(To,this),s.instance(Ct,this.loader),s.instance(rr,this.resources),jo?s.instance(fs,jo):jo=e.get(fs),$o?s.instance(Xs,$o):$o=e.get(Xs),Oo?s.instance(At,Oo||(Oo=e.get(At))):Oo=e.get(At)}start(){return this.oe?this.oe:([function(t){t.container.registerSingleton(Zn,ch),t.container.registerAlias(Zn,ch)},...[function(t){t.singleton(kl,Co),t.transient(yo,ko)},po,jl],hl].filter(Boolean).forEach(t=>this.use.plugin(t)),this.logger.info("Aurelia Starting"),this.oe=this.use.apply().then(()=>{if(h.addEventListener("submit",t=>{const e=t.target,i=e.action;"form"!==e.tagName.toLowerCase()||i||t.preventDefault()}),!this.container.hasResolver(Zn)){let t="You must configure Aurelia with a BindingLanguage implementation.";throw this.logger.error(t),new Error(t)}this.logger.info("Aurelia Started");let t=h.createCustomEvent("aurelia-started",{bubbles:!0,cancelable:!0});return h.dispatchEvent(t),this}))}enhance(t={},e=null){return this.ue(e||h.querySelectorAll("body")[0]),new Promise(e=>{let i=this.container.get(th);this.root=i.enhance({container:this.container,element:this.host,resources:this.resources,bindingContext:t}),this.root.attached(),this.ae(),e(this)})}setRoot(t=null,e=null){let i={};this.root&&this.root.viewModel&&this.root.viewModel.router&&(this.root.viewModel.router.deactivate(),this.root.viewModel.router.reset()),this.ue(e);let s=this.container.get(th);return delete this.container.get(Tn).initialComposition,t||(t=this.configModuleId?dt("./app",this.configModuleId):"app"),i.viewModel=t,i.container=i.childContainer=this.container,i.viewSlot=this.hostSlot,i.host=this.host,s.compose(i).then(t=>(this.root=t,i.viewSlot.attached(),this.ae(),this))}ue(t){if(!this.hostConfigured){if(t=t||this.host,this.host=t&&"string"!=typeof t?t:h.getElementById(t||"applicationHost"),!this.host)throw new Error("No applicationHost was specified.");this.hostConfigured=!0,this.host.aurelia=this,this.hostSlot=new lr(this.host,!0),this.hostSlot.transformChildNodesIntoView(),this.container.registerInstance(h.boundary,this.host)}}ae(){let t=h.createCustomEvent("aurelia-composed",{bubbles:!0,cancelable:!0});setTimeout(()=>h.dispatchEvent(t),1)}}const Vo=y("aurelia"),qo=/\.[^/.]+$/;function So(t,e){let i,s=()=>(i=e.shift())?Promise.resolve(i(t)).then(s):Promise.resolve();return s()}function _o(t,e,i){let s=t.container.get(jr);return Promise.all(Object.keys(e).map(i=>(function(e){let i=e.moduleId,s=Io(i);n(i)&&(i=r(i));return t.loader.normalize(i,e.relativeTo).then(t=>({name:e.moduleId,importId:n(e.moduleId)?function(t,e){return r(t)+"."+e}(t,s):t}))})(e[i]))).then(t=>{let e=[],n=[];return t.forEach(t=>{e.push(void 0),n.push(t.importId)}),s.importViewResources(n,e,i)});function n(t){let e=Io(t);return!!e&&(""!==e&&(".js"!==e&&".ts"!==e))}function r(t){return t.replace(qo,"")}}function Io(t){let e=t.match(qo);if(e&&e.length>0)return e[0].split(".")[1]}function Lo(t){if(t.processed)throw new Error("This config instance has already been applied. To load more plugins or global resources, create a new FrameworkConfiguration instance.")}function Mo(t){return Promise.all(t.behaviorToLoad.map(e=>e.load(t.container,e.target))).then(()=>{t.behaviorToLoad=[]})}class Bo{constructor(t){this.aurelia=t,this.container=t.container,this.info=[],this.processed=!1,this.preTasks=[],this.postTasks=[],this.resourcesToLoad={},this.behaviorToLoad=[],this.postTask(()=>{if(Object.keys(this.resourcesToLoad).length)return _o(t,this.resourcesToLoad,t.ce)})}instance(t,e){return this.container.registerInstance(t,e),this}singleton(t,e){return this.container.registerSingleton(t,e),this}transient(t,e){return this.container.registerTransient(t,e),this}preTask(t){return Lo(this),this.preTasks.push(t),this}postTask(t){return Lo(this),this.postTasks.push(t),this}feature(t,e={}){let i=/\/index$/i.test(t),s=i||Io(t)?t:t+"/index",n=i?t.substr(0,t.length-6):t;return this.plugin({moduleId:s,resourcesRelativeTo:[n,""],config:e})}globalResources(t){Lo(this);let e,i=Array.isArray(t)?t:[...arguments],s=this.resourcesRelativeTo||["",""];for(let t=0,n=i.length;t<n;++t){if(!(e=i[t]))throw new Error("Invalid resource");if("string"==typeof e){let t=s[0],i=s[1],n=e;(e.startsWith("./")||e.startsWith("../"))&&""!==t&&(n=mt(t,e)),this.resourcesToLoad[n]={moduleId:n,relativeTo:i}}else{let t=this.aurelia.resources.autoRegister(this.container,e);t instanceof Ir&&null!==t.elementName&&this.behaviorToLoad.push(t),1===this.behaviorToLoad.length&&this.postTask(()=>Mo(this))}}return this}globalName(t,e){return Lo(this),this.resourcesToLoad[t]={moduleId:e,relativeTo:""},this}plugin(t,e){return Lo(this),"string"==typeof t?this.plugin({moduleId:t,resourcesRelativeTo:[t,""],config:e||{}}):(this.info.push(t),this)}fe(t,e){let i={moduleId:t,resourcesRelativeTo:[t,""],config:e||{}};return this.plugin(i),this.preTask(()=>{let e=[t,this.bootstrapperName];return i.moduleId=t,i.resourcesRelativeTo=e,Promise.resolve()}),this}defaultBindingLanguage(){return this.fe("aurelia-templating-binding")}router(){return this.fe("aurelia-templating-router")}history(){return this.fe("aurelia-history-browser")}defaultResources(){return this.fe("aurelia-templating-resources")}eventAggregator(){return this.fe("aurelia-event-aggregator")}basicConfiguration(){return this.defaultBindingLanguage().defaultResources().eventAggregator()}standardConfiguration(){return this.basicConfiguration().history().router()}developmentLogging(){return this.preTask(()=>this.aurelia.loader.normalize("aurelia-logging-console",this.bootstrapperName).then(t=>this.aurelia.loader.loadModule(t).then(t=>{k(new t.ConsoleAppender),C(c.debug)}))),this}apply(){return this.processed?Promise.resolve():So(this,this.preTasks).then(()=>{let t,e=this.aurelia.loader,i=this.info,s=()=>(t=i.shift())?function(t,e,i){if("function"==typeof i)return Promise.resolve(i(t));{Vo.debug(`Loading plugin ${i.de}.`),t.resourcesRelativeTo=i.resourcesRelativeTo;let s=function(s){return e.loadModule(s).then(e=>{if("configure"in e)return Promise.resolve(e.configure(t,i.config||{})).then(()=>{t.resourcesRelativeTo=null,Vo.debug(`Configured plugin ${i.moduleId}.`)});t.resourcesRelativeTo=null,Vo.debug(`Loaded plugin ${i.moduleId}.`)})},n=i.moduleId;return i.resourcesRelativeTo.length>1?e.normalize(i.moduleId,i.resourcesRelativeTo[1]).then(t=>s(t)):s(n)}}(this,e,t).then(s):(this.processed=!0,Promise.resolve());return s().then(()=>So(this,this.postTasks))})}}const Fo=R;t.Aurelia=To,t.FrameworkConfiguration=Bo,t.LogManager=Fo,t.resolver=G,t.Lazy=W,t.All=Q,t.Optional=Y,t.Parent=J,t.StrategyResolver=X,t.Factory=Z,t.NewInstance=K,t.getDecoratorDependencies=tt,t.lazy=function(t){return function(e,i,s){tt(e,"lazy")[s]=W.of(t)}},t.all=function(t){return function(e,i,s){tt(e,"all")[s]=Q.of(t)}},t.optional=function(t=!0){let e=function(t){return function(e,i,s){let n=tt(e,"optional");n[s]=Y.of(n[s],t)}};return e("boolean"!=typeof t||t)},t.parent=function(t,e,i){let s=tt(t,"parent");s[i]=J.of(s[i])},t.factory=function(t,e){return function(i,s,n){let r=tt(i,"factory"),h=Z.of(t);r[n]=e?h.as(e):h}},t.newInstance=function(t,...e){let i=function(t){return function(i,s,n){let r=tt(i,"newInstance");r[n]=K.of(r[n],...e),t&&r[n].as(t)}};return arguments.length>=1?i(t):i()},t.invoker=function(t){return function(e){j.define(j.invoker,t,e)}},t.invokeAsFactory=function(t){let e=function(t){j.define(j.invoker,et.instance,t)};return t?e(t):e},t.FactoryInvoker=et,t.registration=it,t.transient=function(t){return it(new st(t))},t.singleton=function(t,e=!1){return it(new nt(t,e))},t.TransientRegistration=st,t.SingletonRegistration=nt,t.me=ht,t.InvocationHandler=ot,t.Container=ct,t.autoinject=function(t){let e=function(t){let e=t.inject?t.inject.slice():null,i=j.getOwn(j.paramTypes,t)||ht;if(e){for(let t=0;t<i.length;t++)if(e[t]&&e[t]!==i[t]){const s=e.indexOf(i[t]);s>-1&&e.splice(s,1),e.splice(s>-1&&s<t?t-1:t,0,i[t])}else e[t]||(e[t]=i[t]);t.inject=e}else t.inject=i};return t?e(t):e},t.inject=ft,t.targetContext=Nt,t.sourceContext=Dt,t.camelCase=Ut,t.createOverrideContext=Ht,t.getContextFor=Gt,t.createScopeForTest=function(t,e){return e?{bindingContext:t,overrideContext:Ht(t,Ht(e))}:{bindingContext:t,overrideContext:Ht(t)}},t.connectable=Kt,t.enqueueBindingConnect=oe,t.subscriberCollection=we,t.ExpressionObserver=ve,t.calcSplices=Ce,t.mergeSplice=Ee,t.projectArraySplices=Re,t.getChangeRecords=Ae,t.ModifyCollectionObserver=Pe,t.CollectionLengthObserver=je,t.getArrayObserver=Ie,t.Expression=Me,t.Chain=Be,t.BindingBehavior=Fe,t.ValueConverter=Ne,t.Assign=De,t.Conditional=ze,t.AccessThis=Ue,t.AccessScope=He,t.AccessMember=Ge,t.AccessKeyed=We,t.CallScope=Qe,t.CallMember=Ye,t.CallFunction=Je,t.Binary=Xe,t.PrefixNot=Ze,t.LiteralPrimitive=Ke,t.LiteralString=ti,t.LiteralArray=ei,t.LiteralObject=ii,t.bindingMode=ri,t.Token=hi,t.Lexer=li,t.Scanner=oi,t.Parser=fs,t.ParserImplementation=ds,t.delegationStrategy=Es,t.EventManager=Rs,t.DirtyChecker=As,t.DirtyCheckProperty=Ps,t.propertyAccessor=Os,t.PrimitiveObserver=$s,t.SetterObserver=Ts,t.XLinkAttributeObserver=Vs,t.dataAttributeAccessor=qs,t.DataAttributeObserver=Ss,t.StyleObserver=_s,t.ValueAttributeObserver=Is,t.CheckedObserver=Ls,t.SelectValueObserver=Ms,t.ClassObserver=Bs,t.hasDeclaredDependencies=Fs,t.declarePropertyDependencies=function(t,e,i){Object.getOwnPropertyDescriptor(t.prototype,e).get.dependencies=i},t.computedFrom=function(...t){return function(e,i,s){return s.get.dependencies=t,s}},t.ComputedExpression=Hs,t.createComputedObserver=Gs,t.elements=Ws,t.presentationElements=Qs,t.presentationAttributes=Ys,t.SVGAnalyzer=Js,t.ObserverLocator=Xs,t.ObjectObservationAdapter=class{getObserver(t,e,i){throw new Error("BindingAdapters must implement getObserver(object, propertyName).")}},t.BindingExpression=Zs,t.Binding=Ks,t.CallExpression=tn,t.Call=en,t.ValueConverterResource=sn,t.valueConverter=function(t){if(void 0===t||"string"==typeof t)return function(e){j.define(j.resource,new sn(t),e)};j.define(j.resource,new sn,t)},t.BindingBehaviorResource=nn,t.bindingBehavior=function(t){if(void 0===t||"string"==typeof t)return function(e){j.define(j.resource,new nn(t),e)};j.define(j.resource,new nn,t)},t.ListenerExpression=rn,t.Listener=hn,t.NameExpression=on,t.BindingEngine=cn,t.getSetObserver=dn,t.observable=function(t,e,i){function s(t,e,i,s){const n=void 0===e;n&&(t=t.prototype,e="string"==typeof s?s:s.name);let r=`_${e}`;const h={configurable:!0,enumerable:!1,writable:!0},l=s&&s.changeHandler||`${e}Changed`;if(i?"function"==typeof i.initializer&&(h.value=i.initializer()):i={},"enumerable"in i||(i.enumerable=!0),delete i.value,delete i.writable,delete i.initializer,Reflect.defineProperty(t,r,h),i.get=function(){return this[r]},i.set=function(t){let i=this[r];t!==i&&(this[r]=t,Reflect.defineProperty(this,r,{enumerable:!1}),this[l]&&this[l](t,i,e))},i.get.dependencies=[r],!n)return i;Reflect.defineProperty(t,e,i)}return void 0===e?(e,i,n)=>s(e,i,n,t):s(t,e,i)},t.connectBindingToSignal=gn,t.signalBindings=function(t){pn.hasOwnProperty(t)&&pn[t]++},t.metadata=j,t.Origin=T,t.decorators=function(...t){let e=function(e,i,s){let n=t.length;if(i){for(s=s||{value:e[i],writable:!0,configurable:!0,enumerable:!0};n--;)s=t[n](e,i,s)||s;Object.defineProperty(e,i,s)}else for(;n--;)e=t[n](e)||e;return e};return e.on=e,e},t.deprecated=function(t,e,i){function s(i,s,n){const r=`${i.constructor.name}#${s}`;let h=e?{}:t||{},l=`DEPRECATION - ${r}`;if("function"!=typeof n.value)throw new SyntaxError("Only methods can be marked as deprecated.");return h.message&&(l+=` - ${h.message}`),A({},n,{value:function(){if(h.error)throw new Error(l);return console.warn(l),n.value.apply(this,arguments)}})}return e?s(t,e,i):s},t.mixin=V,t.protocol=M,t.animationEvent={enterBegin:"animation:enter:begin",enterActive:"animation:enter:active",enterDone:"animation:enter:done",enterTimeout:"animation:enter:timeout",leaveBegin:"animation:leave:begin",leaveActive:"animation:leave:active",leaveDone:"animation:leave:done",leaveTimeout:"animation:leave:timeout",staggerNext:"animation:stagger:next",removeClassBegin:"animation:remove-class:begin",removeClassActive:"animation:remove-class:active",removeClassDone:"animation:remove-class:done",removeClassTimeout:"animation:remove-class:timeout",addClassBegin:"animation:add-class:begin",addClassActive:"animation:add-class:active",addClassDone:"animation:add-class:done",addClassTimeout:"animation:add-class:timeout",animateBegin:"animation:animate:begin",animateActive:"animation:animate:active",animateDone:"animation:animate:done",animateTimeout:"animation:animate:timeout",sequenceBegin:"animation:sequence:begin",sequenceDone:"animation:sequence:done"},t.Animator=jn,t.CompositionTransactionNotifier=On,t.CompositionTransactionOwnershipToken=$n,t.CompositionTransaction=Tn,t.pe=Sn,t.ge=_n,t.ViewEngineHooksResource=In,t.viewEngineHooks=function(t){let e=function(t){j.define(j.resource,new In,t)};return t?e(t):e},t.ElementEvents=Ln,t.ResourceLoadContext=Bn,t.ViewCompileInstruction=Fn,t.BehaviorInstruction=Nn,t.TargetInstruction=Dn,t.viewStrategy=zn,t.RelativeViewStrategy=Un,t.ConventionalViewStrategy=Hn,t.NoViewStrategy=Gn,t.TemplateRegistryViewStrategy=Wn,t.InlineViewStrategy=Qn,t.StaticViewStrategy=Yn,t.ViewLocator=Jn,t.BindingLanguage=Zn,t.SlotCustomAttribute=tr,t.PassThroughSlot=er,t.ShadowSlot=ir,t.ShadowDOM=sr,t.ViewResources=rr,t.View=hr,t.ViewSlot=lr,t.BoundViewFactory=gr,t.ViewFactory=wr,t.ViewCompiler=yr,t.ResourceModule=kr,t.ResourceDescription=Cr,t.ModuleAnalyzer=Er,t.ViewEngine=jr,t.Controller=Or,t.BehaviorPropertyObserver=$r,t.BindableProperty=Vr,t.HtmlBehaviorResource=Ir,t.children=function(t){return Lr(t,!0)},t.child=function(t){return Lr(t,!1)},t.SwapStrategies=Ur,t.CompositionEngine=Gr,t.ElementConfigResource=Wr,t.resource=function(t){return function(e){j.define(j.resource,t,e)}},t.behavior=function(t){return function(e){if(t instanceof Ir)j.define(j.resource,t,e);else{let i=j.getOrCreateOwn(j.resource,Ir,e);Object.assign(i,t)}}},t.customElement=Yr,t.customAttribute=function(t,e,i){return function(s){let n=j.getOrCreateOwn(j.resource,Ir,s);n.attributeName=Qr(t,"custom attribute"),n.attributeDefaultBindingMode=e,n.aliases=i}},t.templateController=function(t){let e=function(t){j.getOrCreateOwn(j.resource,Ir,t).liftsContent=!0};return t?e(t):e},t.bindable=function(t,e,i){let s=function(e,i,s){let n,r=i?e.constructor:e,h=j.getOrCreateOwn(j.resource,Ir,r);return i&&((t=t||{}).name=i),(n=new Vr(t)).registerWith(r,h,s)};if(!t)return s;if(e){let n=t;return t=null,s(n,e,i)}return s},t.dynamicOptions=function(t){let e=function(t){j.getOrCreateOwn(j.resource,Ir,t).hasDynamicOptions=!0};return t?e(t):e},t.useShadowDOM=function(t){let e="function"!=typeof t&&t?t:Jr,i=function(t){let i=j.getOrCreateOwn(j.resource,Ir,t);i.targetShadowDOM=!0,i.shadowDOMOptions=e};return"function"==typeof t?i(t):i},t.processAttributes=function(t){return function(e){j.getOrCreateOwn(j.resource,Ir,e).processAttributes=function(e,i,s,n,r){try{t(e,i,s,n,r)}catch(t){y("templating").error(t)}}}},t.processContent=function(t){return function(e){j.getOrCreateOwn(j.resource,Ir,e).processContent=t?function(e,i,s,n){try{return t(e,i,s,n)}catch(t){return y("templating").error(t),!1}}:Xr}},t.containerless=function(t){let e=function(t){j.getOrCreateOwn(j.resource,Ir,t).containerless=!0};return t?e(t):e},t.useViewStrategy=Zr,t.useView=Kr,t.inlineView=function(t,e,i){return Zr(new Qn(t,e,i))},t.noView=function(t,e){let i,s;"function"==typeof t?i=t:(s=t,i=void 0);let n=function(t){j.define(Jn.viewStrategyMetadataKey,new Gn(s,e),t)};return i?n(i):n},t.elementConfig=function(t){let e=function(t){j.define(j.resource,new Wr,t)};return t?e(t):e},t.viewResources=function(...t){return function(e){j.define(jr.viewModelRequireMetadataKey,t,e)}},t.TemplatingEngine=th,t.TemplateDependency=yt,t.TemplateRegistryEntry=kt,t.Loader=Ct,t.TaskQueue=At,t.relativeToFile=dt,t.join=mt,t.buildQueryString=vt,t.parseQueryString=xt,t.AggregateError=s,t.FEATURE=n,t.PLATFORM=r,t.DOM=h,t.initializePAL=l,t.reset=function(){t.isInitialized=!1},t.pipelineStatus=Sl,t.Pipeline=_l,t.CommitChangesStep=Ll,t.NavigationInstruction=Ml,t.NavModel=Bl,t.isNavigationCommand=Fl,t.Redirect=Nl,t.RedirectToRoute=class{constructor(t,e={},i={}){this.route=t,this.params=e,this.options=Object.assign({trigger:!0,replace:!0},i),this.shouldContinueProcessing=!1}setRouter(t){this.router=t}navigate(t){(this.options.useAppRouter?t:this.router||t).navigateToRoute(this.route,this.params,this.options)}},t.RouterConfiguration=Dl,t.activationStrategy=zl,t.BuildNavigationPlanStep=Ul,t.Router=Gl,t.CanDeactivatePreviousStep=Yl,t.CanActivateNextStep=Jl,t.DeactivatePreviousStep=Xl,t.ActivateNextStep=Zl,t.RouteLoader=ro,t.LoadRouteStep=ho,t.PipelineProvider=uo,t.AppRouter=co,t.configure=po,t.RouteHref=go,t.RouterView=wo,t.RouterViewLocator=vo,t.TemplatingRouteLoader=xo,Object.defineProperty(t,"__esModule",{value:!0})});
